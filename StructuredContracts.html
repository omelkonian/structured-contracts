<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>StructuredContracts</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/structured-contracts/tree/master/StructuredContracts.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Prelude.html" class="Module">Prelude</a> <a id="21" class="Keyword">hiding</a> <a id="28" class="Symbol">(</a><a id="29" href="Function.Base.html#624" class="Function">id</a><a id="31" class="Symbol">)</a>

<a id="34" class="Comment">-- ** Ledger</a>

<a id="48" class="Keyword">postulate</a>
  <a id="LEnv"></a><a id="60" href="StructuredContracts.html#60" class="Postulate">LEnv</a> <a id="LState"></a><a id="65" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="Tx"></a><a id="72" href="StructuredContracts.html#72" class="Postulate">Tx</a> <a id="75" class="Symbol">:</a> <a id="77" href="Agda.Primitive.html#320" class="Primitive">Type</a>
  <a id="_⊢_—⟨_∣UTXOW⟩→_"></a><a id="84" href="StructuredContracts.html#84" class="Postulate Operator">_⊢_—⟨_∣UTXOW⟩→_</a> <a id="100" class="Symbol">:</a> <a id="102" href="Prelude.html#1305" class="Function">SSRel</a> <a id="108" class="Symbol">(</a><a id="109" href="StructuredContracts.html#60" class="Postulate">LEnv</a> <a id="114" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="116" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="123" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="125" href="StructuredContracts.html#72" class="Postulate">Tx</a><a id="127" class="Symbol">)</a>

<a id="130" class="Keyword">variable</a>
  <a id="141" href="StructuredContracts.html#141" class="Generalizable">env</a> <a id="145" class="Symbol">:</a> <a id="147" href="StructuredContracts.html#60" class="Postulate">LEnv</a>
  <a id="154" href="StructuredContracts.html#154" class="Generalizable">utxoSt</a> <a id="161" href="StructuredContracts.html#161" class="Generalizable">utxoSt′</a> <a id="169" class="Symbol">:</a> <a id="171" href="StructuredContracts.html#65" class="Postulate">LState</a>
  <a id="180" href="StructuredContracts.html#180" class="Generalizable">tx</a> <a id="183" class="Symbol">:</a> <a id="185" href="StructuredContracts.html#72" class="Postulate">Tx</a>

<a id="189" class="Keyword">data</a> <a id="_⊢_—⟨_∣LEDGER⟩→_"></a><a id="194" href="StructuredContracts.html#194" class="Datatype Operator">_⊢_—⟨_∣LEDGER⟩→_</a> <a id="211" class="Symbol">:</a> <a id="213" href="Prelude.html#1305" class="Function">SSRel</a> <a id="219" class="Symbol">(</a><a id="220" href="StructuredContracts.html#60" class="Postulate">LEnv</a> <a id="225" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="227" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="234" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="236" href="StructuredContracts.html#72" class="Postulate">Tx</a><a id="238" class="Symbol">)</a> <a id="240" class="Keyword">where</a>

  <a id="_⊢_—⟨_∣LEDGER⟩→_.ledger-V"></a><a id="249" href="StructuredContracts.html#249" class="InductiveConstructor">ledger-V</a> <a id="258" class="Symbol">:</a>
    <a id="264" href="StructuredContracts.html#141" class="Generalizable">env</a> <a id="268" href="StructuredContracts.html#84" class="Postulate Operator">⊢</a> <a id="270" href="StructuredContracts.html#154" class="Generalizable">utxoSt</a> <a id="277" href="StructuredContracts.html#84" class="Postulate Operator">—⟨</a> <a id="280" href="StructuredContracts.html#180" class="Generalizable">tx</a> <a id="283" href="StructuredContracts.html#84" class="Postulate Operator">∣UTXOW⟩→</a> <a id="292" href="StructuredContracts.html#161" class="Generalizable">utxoSt′</a>
    <a id="304" href="Prelude.InferenceRules.html#13602" class="Function Operator">────────────────────────────────────</a>
    <a id="345" href="StructuredContracts.html#141" class="Generalizable">env</a> <a id="349" href="StructuredContracts.html#194" class="Datatype Operator">⊢</a> <a id="351" href="StructuredContracts.html#154" class="Generalizable">utxoSt</a> <a id="358" href="StructuredContracts.html#194" class="Datatype Operator">—⟨</a> <a id="361" href="StructuredContracts.html#180" class="Generalizable">tx</a> <a id="364" href="StructuredContracts.html#194" class="Datatype Operator">∣LEDGER⟩→</a> <a id="374" href="StructuredContracts.html#161" class="Generalizable">utxoSt′</a>

<a id="383" class="Comment">-- ** Simulation</a>

<a id="401" class="Keyword">postulate</a>
  <a id="TxInfo"></a><a id="413" href="StructuredContracts.html#413" class="Postulate">TxInfo</a> <a id="420" class="Symbol">:</a> <a id="422" href="Agda.Primitive.html#320" class="Primitive">Type</a>
  <a id="getUTxO"></a><a id="429" href="StructuredContracts.html#429" class="Postulate">getUTxO</a> <a id="437" class="Symbol">:</a> <a id="439" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="446" class="Symbol">→</a> <a id="448" href="StructuredContracts.html#72" class="Postulate">Tx</a> <a id="451" class="Symbol">→</a> <a id="453" href="StructuredContracts.html#413" class="Postulate">TxInfo</a>
  <a id="isValid"></a><a id="462" href="StructuredContracts.html#462" class="Postulate">isValid</a> <a id="470" class="Symbol">:</a> <a id="472" href="StructuredContracts.html#72" class="Postulate">Tx</a> <a id="475" class="Symbol">→</a> <a id="477" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>

<a id="483" class="Keyword">variable</a>
  <a id="494" href="StructuredContracts.html#494" class="Generalizable">txInfo</a> <a id="501" class="Symbol">:</a> <a id="503" href="StructuredContracts.html#413" class="Postulate">TxInfo</a>

<a id="511" class="Keyword">module</a> <a id="Simulation"></a><a id="518" href="StructuredContracts.html#518" class="Module">Simulation</a>
  <a id="531" class="Symbol">{</a><a id="532" href="StructuredContracts.html#532" class="Bound">State</a> <a id="538" href="StructuredContracts.html#538" class="Bound">Input</a> <a id="544" class="Symbol">:</a> <a id="546" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="550" class="Symbol">}</a>
  <a id="554" class="Symbol">⦃</a> <a id="556" href="StructuredContracts.html#556" class="Bound">_</a> <a id="558" class="Symbol">:</a> <a id="560" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="570" href="StructuredContracts.html#538" class="Bound">Input</a> <a id="576" class="Symbol">⦄</a>
  <a id="580" class="Symbol">⦃</a> <a id="582" href="StructuredContracts.html#582" class="Bound">_</a> <a id="584" class="Symbol">:</a> <a id="586" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="593" href="StructuredContracts.html#538" class="Bound">Input</a> <a id="599" class="Symbol">⦄</a>
  <a id="603" class="Symbol">(</a><a id="604" href="StructuredContracts.html#604" class="Bound">πˢ</a> <a id="607" class="Symbol">:</a> <a id="609" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="616" class="Symbol">→</a> <a id="618" href="StructuredContracts.html#532" class="Bound">State</a><a id="623" class="Symbol">)</a>
  <a id="627" class="Symbol">(</a><a id="628" href="StructuredContracts.html#628" class="Bound">πⁱ</a> <a id="631" class="Symbol">:</a> <a id="633" href="StructuredContracts.html#413" class="Postulate">TxInfo</a> <a id="640" class="Symbol">→</a> <a id="642" href="StructuredContracts.html#538" class="Bound">Input</a><a id="647" class="Symbol">)</a>
  <a id="651" class="Symbol">(</a><a id="652" href="StructuredContracts.html#652" class="Bound Operator">_⊢_—⟨_∣SMUP⟩→_</a> <a id="667" class="Symbol">:</a> <a id="669" href="Prelude.html#1305" class="Function">SSRel</a> <a id="675" class="Symbol">(</a><a id="676" href="StructuredContracts.html#413" class="Postulate">TxInfo</a> <a id="683" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="685" href="StructuredContracts.html#532" class="Bound">State</a> <a id="691" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="693" href="StructuredContracts.html#538" class="Bound">Input</a><a id="698" class="Symbol">))</a>
  <a id="703" class="Keyword">where</a>

  <a id="712" class="Keyword">data</a> <a id="Simulation.StatefulStep"></a><a id="717" href="StructuredContracts.html#717" class="Datatype">StatefulStep</a> <a id="730" class="Symbol">:</a> <a id="732" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="737" class="Keyword">where</a>
    <a id="Simulation.StatefulStep.STEP"></a><a id="747" href="StructuredContracts.html#747" class="InductiveConstructor">STEP</a> <a id="752" class="Symbol">:</a>
      <a id="760" class="Symbol">(</a><a id="761" class="Keyword">let</a> <a id="765" href="StructuredContracts.html#765" class="Bound">txInfo</a> <a id="772" class="Symbol">=</a> <a id="774" href="StructuredContracts.html#429" class="Postulate">getUTxO</a> <a id="782" href="StructuredContracts.html#154" class="Generalizable">utxoSt</a> <a id="789" href="StructuredContracts.html#180" class="Generalizable">tx</a> <a id="792" class="Keyword">in</a>
      <a id="801" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="803" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="805" class="Symbol">(</a><a id="806" href="StructuredContracts.html#462" class="Postulate">isValid</a> <a id="814" href="StructuredContracts.html#180" class="Generalizable">tx</a><a id="816" class="Symbol">)</a>
      <a id="824" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="826" href="StructuredContracts.html#628" class="Bound">πⁱ</a> <a id="829" href="StructuredContracts.html#765" class="Bound">txInfo</a> <a id="836" href="Relation.Binary.PropositionalEquality.Core.html#839" class="Function Operator">≢</a> <a id="838" href="Prelude.Monoid.html#222" class="Field">ε</a>
      <a id="846" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="848" href="StructuredContracts.html#141" class="Generalizable">env</a> <a id="852" href="StructuredContracts.html#194" class="Datatype Operator">⊢</a> <a id="854" href="StructuredContracts.html#154" class="Generalizable">utxoSt</a> <a id="861" href="StructuredContracts.html#194" class="Datatype Operator">—⟨</a> <a id="864" href="StructuredContracts.html#180" class="Generalizable">tx</a> <a id="867" href="StructuredContracts.html#194" class="Datatype Operator">∣LEDGER⟩→</a> <a id="877" href="StructuredContracts.html#161" class="Generalizable">utxoSt′</a>
        <a id="893" href="Prelude.InferenceRules.html#12867" class="Function Operator">───────────────────────────────────────────────────</a>
        <a id="953" href="StructuredContracts.html#765" class="Bound">txInfo</a> <a id="960" href="StructuredContracts.html#652" class="Bound Operator">⊢</a> <a id="962" href="StructuredContracts.html#604" class="Bound">πˢ</a> <a id="965" href="StructuredContracts.html#154" class="Generalizable">utxoSt</a> <a id="972" href="StructuredContracts.html#652" class="Bound Operator">—⟨</a> <a id="975" href="StructuredContracts.html#628" class="Bound">πⁱ</a> <a id="978" href="StructuredContracts.html#765" class="Bound">txInfo</a> <a id="985" href="StructuredContracts.html#652" class="Bound Operator">∣SMUP⟩→</a> <a id="993" href="StructuredContracts.html#604" class="Bound">πˢ</a> <a id="996" href="StructuredContracts.html#161" class="Generalizable">utxoSt′</a><a id="1003" class="Symbol">)</a>
      <a id="1011" href="Prelude.InferenceRules.html#14310" class="Function Operator">────────────</a>
      <a id="1030" href="StructuredContracts.html#717" class="Datatype">StatefulStep</a>

  <a id="1046" class="Keyword">data</a> <a id="Simulation.StatefulNoStep"></a><a id="1051" href="StructuredContracts.html#1051" class="Datatype">StatefulNoStep</a> <a id="1066" class="Symbol">:</a> <a id="1068" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1073" class="Keyword">where</a>
    <a id="Simulation.StatefulNoStep.NO-STEP"></a><a id="1083" href="StructuredContracts.html#1083" class="InductiveConstructor">NO-STEP</a> <a id="1091" class="Symbol">:</a>
      <a id="1099" class="Symbol">(</a><a id="1100" class="Keyword">let</a> <a id="1104" href="StructuredContracts.html#1104" class="Bound">txInfo</a> <a id="1111" class="Symbol">=</a> <a id="1113" href="StructuredContracts.html#429" class="Postulate">getUTxO</a> <a id="1121" href="StructuredContracts.html#154" class="Generalizable">utxoSt</a> <a id="1128" href="StructuredContracts.html#180" class="Generalizable">tx</a> <a id="1131" class="Keyword">in</a>
      <a id="1140" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="1142" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="1144" class="Symbol">(</a><a id="1145" href="StructuredContracts.html#462" class="Postulate">isValid</a> <a id="1153" href="StructuredContracts.html#180" class="Generalizable">tx</a><a id="1155" class="Symbol">)</a>
      <a id="1163" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="1165" href="StructuredContracts.html#628" class="Bound">πⁱ</a> <a id="1168" href="StructuredContracts.html#1104" class="Bound">txInfo</a> <a id="1175" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1177" href="Prelude.Monoid.html#222" class="Field">ε</a>
      <a id="1185" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="1187" href="StructuredContracts.html#141" class="Generalizable">env</a> <a id="1191" href="StructuredContracts.html#194" class="Datatype Operator">⊢</a> <a id="1193" href="StructuredContracts.html#154" class="Generalizable">utxoSt</a> <a id="1200" href="StructuredContracts.html#194" class="Datatype Operator">—⟨</a> <a id="1203" href="StructuredContracts.html#180" class="Generalizable">tx</a> <a id="1206" href="StructuredContracts.html#194" class="Datatype Operator">∣LEDGER⟩→</a> <a id="1216" href="StructuredContracts.html#161" class="Generalizable">utxoSt′</a>
        <a id="1232" href="Prelude.InferenceRules.html#13602" class="Function Operator">────────────────────────────────────</a>
        <a id="1277" href="StructuredContracts.html#604" class="Bound">πˢ</a> <a id="1280" href="StructuredContracts.html#154" class="Generalizable">utxoSt</a> <a id="1287" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1289" href="StructuredContracts.html#604" class="Bound">πˢ</a> <a id="1292" href="StructuredContracts.html#161" class="Generalizable">utxoSt′</a><a id="1299" class="Symbol">)</a>
      <a id="1307" href="Prelude.InferenceRules.html#14273" class="Function Operator">──────────────</a>
      <a id="1328" href="StructuredContracts.html#1051" class="Datatype">StatefulNoStep</a>

<a id="IsSimulation"></a><a id="1344" href="StructuredContracts.html#1344" class="Function">IsSimulation</a> <a id="1357" class="Symbol">:</a> <a id="1359" class="Symbol">∀</a> <a id="1361" class="Symbol">{</a><a id="1362" href="StructuredContracts.html#1362" class="Bound">S</a> <a id="1364" href="StructuredContracts.html#1364" class="Bound">I</a> <a id="1366" class="Symbol">:</a> <a id="1368" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="1372" class="Symbol">}</a> <a id="1374" class="Symbol">⦃</a> <a id="1376" href="StructuredContracts.html#1376" class="Bound">_</a> <a id="1378" class="Symbol">:</a> <a id="1380" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="1390" href="StructuredContracts.html#1364" class="Bound">I</a> <a id="1392" class="Symbol">⦄</a> <a id="1394" class="Symbol">→</a> <a id="1396" class="Symbol">⦃</a> <a id="1398" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="1405" href="StructuredContracts.html#1364" class="Bound">I</a> <a id="1407" class="Symbol">⦄</a> <a id="1409" class="Symbol">→</a> <a id="1411" href="Prelude.Init.html#13332" class="Function">Pred₀</a> <a id="1417" class="Symbol">(</a><a id="1418" href="Prelude.html#1305" class="Function">SSRel</a> <a id="1424" class="Symbol">(</a><a id="1425" href="StructuredContracts.html#413" class="Postulate">TxInfo</a> <a id="1432" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1434" href="StructuredContracts.html#1362" class="Bound">S</a> <a id="1436" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1438" href="StructuredContracts.html#1364" class="Bound">I</a><a id="1439" class="Symbol">))</a>
<a id="1442" href="StructuredContracts.html#1344" class="Function">IsSimulation</a> <a id="1455" class="Symbol">{</a><a id="1456" href="StructuredContracts.html#1456" class="Bound">S</a><a id="1457" class="Symbol">}{</a><a id="1459" href="StructuredContracts.html#1459" class="Bound">I</a><a id="1460" class="Symbol">}</a> <a id="1462" href="StructuredContracts.html#1462" class="Bound">ssRel</a> <a id="1468" class="Symbol">=</a>
  <a id="1472" href="Data.Product.html#1378" class="Function">∃</a> <a id="1474" class="Symbol">λ</a> <a id="1476" class="Symbol">(</a><a id="1477" href="StructuredContracts.html#1477" class="Bound">πˢ</a> <a id="1480" class="Symbol">:</a> <a id="1482" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="1489" class="Symbol">→</a> <a id="1491" href="StructuredContracts.html#1456" class="Bound">S</a><a id="1492" class="Symbol">)</a> <a id="1494" class="Symbol">→</a> <a id="1496" href="Data.Product.html#1378" class="Function">∃</a> <a id="1498" class="Symbol">λ</a> <a id="1500" class="Symbol">(</a><a id="1501" href="StructuredContracts.html#1501" class="Bound">πⁱ</a> <a id="1504" class="Symbol">:</a> <a id="1506" href="StructuredContracts.html#413" class="Postulate">TxInfo</a> <a id="1513" class="Symbol">→</a> <a id="1515" href="StructuredContracts.html#1459" class="Bound">I</a><a id="1516" class="Symbol">)</a> <a id="1518" class="Symbol">→</a>
  <a id="1522" class="Keyword">let</a> <a id="1526" class="Keyword">open</a> <a id="1531" href="StructuredContracts.html#518" class="Module">Simulation</a> <a id="1542" href="StructuredContracts.html#1477" class="Bound">πˢ</a> <a id="1545" href="StructuredContracts.html#1501" class="Bound">πⁱ</a> <a id="1548" href="StructuredContracts.html#1462" class="Bound">ssRel</a> <a id="1554" class="Keyword">in</a>
    <a id="1561" href="Prelude.Init.html#1736" class="Function">Surjective≡</a> <a id="1573" class="Symbol">{</a><a id="1574" class="Argument">A</a> <a id="1576" class="Symbol">=</a> <a id="1578" href="StructuredContracts.html#65" class="Postulate">LState</a><a id="1584" class="Symbol">}</a> <a id="1586" href="StructuredContracts.html#1477" class="Bound">πˢ</a>
  <a id="1591" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1593" href="Prelude.Init.html#1736" class="Function">Surjective≡</a> <a id="1605" class="Symbol">{</a><a id="1606" class="Argument">A</a> <a id="1608" class="Symbol">=</a> <a id="1610" href="StructuredContracts.html#413" class="Postulate">TxInfo</a><a id="1616" class="Symbol">}</a> <a id="1618" href="StructuredContracts.html#1501" class="Bound">πⁱ</a>
  <a id="1623" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1625" href="StructuredContracts.html#717" class="Datatype">StatefulStep</a>
  <a id="1640" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1642" href="StructuredContracts.html#1051" class="Datatype">StatefulNoStep</a>

<a id="1658" class="Comment">-- ** NFT state machine library</a>

<a id="1691" class="Keyword">postulate</a>
  <a id="SMS"></a><a id="1703" href="StructuredContracts.html#1703" class="Postulate">SMS</a> <a id="SMI"></a><a id="1707" href="StructuredContracts.html#1707" class="Postulate">SMI</a> <a id="Value"></a><a id="1711" href="StructuredContracts.html#1711" class="Postulate">Value</a> <a id="1717" class="Symbol">:</a> <a id="1719" href="Agda.Primitive.html#320" class="Primitive">Type</a>
  <a id="1726" class="Keyword">instance</a> <a id="1735" href="StructuredContracts.html#1735" class="Postulate">_</a> <a id="1737" class="Symbol">:</a> <a id="1739" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="1749" href="StructuredContracts.html#1703" class="Postulate">SMS</a><a id="1752" class="Symbol">;</a> <a id="1754" href="StructuredContracts.html#1754" class="Postulate">_</a> <a id="1756" class="Symbol">:</a> <a id="1758" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="1765" href="StructuredContracts.html#1703" class="Postulate">SMS</a>
           <a id="1780" href="StructuredContracts.html#1780" class="Postulate">_</a> <a id="1782" class="Symbol">:</a> <a id="1784" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="1794" href="StructuredContracts.html#1711" class="Postulate">Value</a><a id="1799" class="Symbol">;</a> <a id="1801" href="StructuredContracts.html#1801" class="Postulate">_</a> <a id="1803" class="Symbol">:</a> <a id="1805" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="1812" href="StructuredContracts.html#1711" class="Postulate">Value</a>
           <a id="1829" href="StructuredContracts.html#1829" class="Postulate">_</a> <a id="1831" class="Symbol">:</a> <a id="1833" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="1843" href="StructuredContracts.html#1707" class="Postulate">SMI</a><a id="1846" class="Symbol">;</a> <a id="1848" href="StructuredContracts.html#1848" class="Postulate">_</a> <a id="1850" class="Symbol">:</a> <a id="1852" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="1859" href="StructuredContracts.html#1707" class="Postulate">SMI</a>
  <a id="initState"></a><a id="1865" href="StructuredContracts.html#1865" class="Postulate">initState</a> <a id="1875" class="Symbol">:</a> <a id="1877" href="StructuredContracts.html#1703" class="Postulate">SMS</a> <a id="1881" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1883" href="StructuredContracts.html#1711" class="Postulate">Value</a>
  <a id="SpendsNFT"></a><a id="1891" href="StructuredContracts.html#1891" class="Postulate">SpendsNFT</a> <a id="PutsNFT"></a><a id="1901" href="StructuredContracts.html#1901" class="Postulate">PutsNFT</a> <a id="PropagatesNFT"></a><a id="1909" href="StructuredContracts.html#1909" class="Postulate">PropagatesNFT</a> <a id="1923" class="Symbol">:</a> <a id="1925" href="Prelude.Init.html#13332" class="Function">Pred₀</a> <a id="1931" href="StructuredContracts.html#413" class="Postulate">TxInfo</a>
  <a id="buildConstraints"></a><a id="1940" href="StructuredContracts.html#1940" class="Postulate">buildConstraints</a> <a id="1957" class="Symbol">:</a> <a id="1959" href="StructuredContracts.html#413" class="Postulate">TxInfo</a> <a id="1966" class="Symbol">→</a> <a id="1968" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1973" class="Symbol">(</a><a id="1974" href="StructuredContracts.html#1703" class="Postulate">SMS</a> <a id="1978" class="Symbol">→</a> <a id="1980" href="StructuredContracts.html#1707" class="Postulate">SMI</a> <a id="1984" class="Symbol">→</a> <a id="1986" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="1990" class="Symbol">)</a>
  <a id="_⊢_—⟨_∣SMPEC⟩→_"></a><a id="1994" href="StructuredContracts.html#1994" class="Postulate Operator">_⊢_—⟨_∣SMPEC⟩→_</a> <a id="2010" class="Symbol">:</a> <a id="2012" href="Prelude.html#1305" class="Function">SSRel</a> <a id="2018" class="Symbol">(</a><a id="2019" href="StructuredContracts.html#413" class="Postulate">TxInfo</a> <a id="2026" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2028" class="Symbol">(</a><a id="2029" href="StructuredContracts.html#1703" class="Postulate">SMS</a> <a id="2033" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2035" href="StructuredContracts.html#1711" class="Postulate">Value</a><a id="2040" class="Symbol">)</a> <a id="2042" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2044" href="StructuredContracts.html#1707" class="Postulate">SMI</a><a id="2047" class="Symbol">)</a>

<a id="2050" class="Keyword">variable</a>
  <a id="2061" href="StructuredContracts.html#2061" class="Generalizable">sms</a> <a id="2065" href="StructuredContracts.html#2065" class="Generalizable">sms′</a> <a id="2070" class="Symbol">:</a> <a id="2072" href="StructuredContracts.html#1703" class="Postulate">SMS</a>
  <a id="2078" href="StructuredContracts.html#2078" class="Generalizable">smi</a> <a id="2082" class="Symbol">:</a> <a id="2084" href="StructuredContracts.html#1707" class="Postulate">SMI</a>
  <a id="2090" href="StructuredContracts.html#2090" class="Generalizable">val</a> <a id="2094" href="StructuredContracts.html#2094" class="Generalizable">val′</a> <a id="2099" class="Symbol">:</a> <a id="2101" href="StructuredContracts.html#1711" class="Postulate">Value</a>

<a id="2108" class="Keyword">data</a> <a id="_⊢_—⟨_∣NFTCE⟩→_"></a><a id="2113" href="StructuredContracts.html#2113" class="Datatype Operator">_⊢_—⟨_∣NFTCE⟩→_</a> <a id="2129" class="Symbol">:</a> <a id="2131" href="Prelude.html#1305" class="Function">SSRel</a> <a id="2137" class="Symbol">(</a><a id="2138" href="StructuredContracts.html#413" class="Postulate">TxInfo</a> <a id="2145" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2147" class="Symbol">(</a><a id="2148" href="StructuredContracts.html#1703" class="Postulate">SMS</a> <a id="2152" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2154" href="StructuredContracts.html#1711" class="Postulate">Value</a><a id="2159" class="Symbol">)</a> <a id="2161" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2163" href="StructuredContracts.html#1707" class="Postulate">SMI</a><a id="2166" class="Symbol">)</a> <a id="2168" class="Keyword">where</a>

  <a id="_⊢_—⟨_∣NFTCE⟩→_.MintsNFT"></a><a id="2177" href="StructuredContracts.html#2177" class="InductiveConstructor">MintsNFT</a> <a id="2186" class="Symbol">:</a>
    <a id="2192" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="2194" href="StructuredContracts.html#1891" class="Postulate">SpendsNFT</a> <a id="2204" href="StructuredContracts.html#494" class="Generalizable">txInfo</a>
    <a id="2215" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="2217" href="StructuredContracts.html#1901" class="Postulate">PutsNFT</a> <a id="2225" href="StructuredContracts.html#494" class="Generalizable">txInfo</a>
    <a id="2236" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="2238" href="StructuredContracts.html#141" class="Generalizable">env</a> <a id="2242" href="StructuredContracts.html#84" class="Postulate Operator">⊢</a> <a id="2244" href="StructuredContracts.html#154" class="Generalizable">utxoSt</a> <a id="2251" href="StructuredContracts.html#84" class="Postulate Operator">—⟨</a> <a id="2254" href="StructuredContracts.html#180" class="Generalizable">tx</a> <a id="2257" href="StructuredContracts.html#84" class="Postulate Operator">∣UTXOW⟩→</a> <a id="2266" href="StructuredContracts.html#161" class="Generalizable">utxoSt′</a>
      <a id="2280" href="Prelude.InferenceRules.html#13602" class="Function Operator">────────────────────────────────────</a>
      <a id="2323" href="StructuredContracts.html#494" class="Generalizable">txInfo</a> <a id="2330" href="StructuredContracts.html#2113" class="Datatype Operator">⊢</a> <a id="2332" href="Prelude.Monoid.html#222" class="Field">ε</a> <a id="2334" href="StructuredContracts.html#2113" class="Datatype Operator">—⟨</a> <a id="2337" href="StructuredContracts.html#2078" class="Generalizable">smi</a> <a id="2341" href="StructuredContracts.html#2113" class="Datatype Operator">∣NFTCE⟩→</a> <a id="2350" href="StructuredContracts.html#1865" class="Postulate">initState</a>

  <a id="_⊢_—⟨_∣NFTCE⟩→_.PropogatesNFT"></a><a id="2363" href="StructuredContracts.html#2363" class="InductiveConstructor">PropogatesNFT</a> <a id="2377" class="Symbol">:</a>
    <a id="2383" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="2385" href="Data.List.Relation.Unary.All.html#1453" class="Datatype">All</a> <a id="2389" class="Symbol">(λ</a> <a id="2392" href="StructuredContracts.html#2392" class="Bound">P</a> <a id="2394" class="Symbol">→</a> <a id="2396" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="2398" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="2400" href="StructuredContracts.html#2392" class="Bound">P</a> <a id="2402" href="StructuredContracts.html#2061" class="Generalizable">sms</a> <a id="2406" href="StructuredContracts.html#2078" class="Generalizable">smi</a><a id="2409" class="Symbol">)</a> <a id="2411" class="Symbol">(</a><a id="2412" href="StructuredContracts.html#1940" class="Postulate">buildConstraints</a> <a id="2429" href="StructuredContracts.html#494" class="Generalizable">txInfo</a><a id="2435" class="Symbol">)</a>
    <a id="2441" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="2443" href="StructuredContracts.html#1909" class="Postulate">PropagatesNFT</a> <a id="2457" href="StructuredContracts.html#494" class="Generalizable">txInfo</a>
    <a id="2468" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="2470" href="StructuredContracts.html#494" class="Generalizable">txInfo</a> <a id="2477" href="StructuredContracts.html#1994" class="Postulate Operator">⊢</a> <a id="2479" class="Symbol">(</a><a id="2480" href="StructuredContracts.html#2061" class="Generalizable">sms</a> <a id="2484" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2486" href="StructuredContracts.html#2090" class="Generalizable">val</a><a id="2489" class="Symbol">)</a> <a id="2491" href="StructuredContracts.html#1994" class="Postulate Operator">—⟨</a> <a id="2494" href="StructuredContracts.html#2078" class="Generalizable">smi</a> <a id="2498" href="StructuredContracts.html#1994" class="Postulate Operator">∣SMPEC⟩→</a> <a id="2507" class="Symbol">(</a><a id="2508" href="StructuredContracts.html#2065" class="Generalizable">sms′</a> <a id="2513" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2515" href="StructuredContracts.html#2094" class="Generalizable">val′</a><a id="2519" class="Symbol">)</a>
      <a id="2527" href="Prelude.InferenceRules.html#12923" class="Function Operator">──────────────────────────────────────────────────</a>
      <a id="2584" href="StructuredContracts.html#494" class="Generalizable">txInfo</a> <a id="2591" href="StructuredContracts.html#2113" class="Datatype Operator">⊢</a> <a id="2593" class="Symbol">(</a><a id="2594" href="StructuredContracts.html#2061" class="Generalizable">sms</a> <a id="2598" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2600" href="StructuredContracts.html#2090" class="Generalizable">val</a><a id="2603" class="Symbol">)</a> <a id="2605" href="StructuredContracts.html#2113" class="Datatype Operator">—⟨</a> <a id="2608" href="StructuredContracts.html#2078" class="Generalizable">smi</a> <a id="2612" href="StructuredContracts.html#2113" class="Datatype Operator">∣NFTCE⟩→</a> <a id="2621" class="Symbol">(</a><a id="2622" href="StructuredContracts.html#2065" class="Generalizable">sms′</a> <a id="2627" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2629" href="StructuredContracts.html#2094" class="Generalizable">val′</a><a id="2633" class="Symbol">)</a>

<a id="2636" class="Keyword">postulate</a> <a id="LEDGER-simulates-NFTCE"></a><a id="2646" href="StructuredContracts.html#2646" class="Postulate">LEDGER-simulates-NFTCE</a> <a id="2669" class="Symbol">:</a> <a id="2671" href="StructuredContracts.html#1344" class="Function">IsSimulation</a> <a id="2684" href="StructuredContracts.html#2113" class="Datatype Operator">_⊢_—⟨_∣NFTCE⟩→_</a>

<a id="2701" class="Comment">-- ** Account simulation</a>

<a id="2727" class="Keyword">data</a> <a id="IType"></a><a id="2732" href="StructuredContracts.html#2732" class="Datatype">IType</a> <a id="2738" class="Symbol">:</a> <a id="2740" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="2745" class="Keyword">where</a>
  <a id="IType.OArgs"></a><a id="2753" href="StructuredContracts.html#2753" class="InductiveConstructor">OArgs</a> <a id="IType.CArgs"></a><a id="2759" href="StructuredContracts.html#2759" class="InductiveConstructor">CArgs</a> <a id="2765" class="Symbol">:</a> <a id="2767" href="StructuredContracts.html#2732" class="Datatype">IType</a>
<a id="2773" class="Keyword">unquoteDecl</a> <a id="Derive-IType"></a><a id="2785" href="StructuredContracts.html#2785" class="Function">Derive-IType</a> <a id="2798" class="Symbol">=</a> <a id="2800" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="2807" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2813" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="2815" class="Keyword">quote</a> <a id="2821" href="StructuredContracts.html#2732" class="Datatype">IType</a> <a id="2827" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2829" href="StructuredContracts.html#2785" class="Function">Derive-IType</a> <a id="2842" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="2845" class="Keyword">postulate</a>
  <a id="Id"></a><a id="2857" href="StructuredContracts.html#2857" class="Postulate">Id</a> <a id="Key"></a><a id="2860" href="StructuredContracts.html#2860" class="Postulate">Key</a> <a id="2864" class="Symbol">:</a> <a id="2866" href="Agda.Primitive.html#320" class="Primitive">Type</a>
  <a id="2873" class="Keyword">instance</a> <a id="2882" href="StructuredContracts.html#2882" class="Postulate">_</a> <a id="2884" class="Symbol">:</a> <a id="2886" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2892" href="StructuredContracts.html#2857" class="Postulate">Id</a>
           <a id="2906" href="StructuredContracts.html#2906" class="Postulate">_</a> <a id="2908" class="Symbol">:</a> <a id="2910" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2916" href="StructuredContracts.html#2860" class="Postulate">Key</a>
           <a id="2931" href="StructuredContracts.html#2931" class="Postulate">_</a> <a id="2933" class="Symbol">:</a> <a id="2935" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2941" href="StructuredContracts.html#1711" class="Postulate">Value</a>

<a id="2948" class="Keyword">record</a> <a id="AccI"></a><a id="2955" href="StructuredContracts.html#2955" class="Record">AccI</a> <a id="2960" class="Symbol">:</a> <a id="2962" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="2967" class="Keyword">where</a>
  <a id="2975" class="Keyword">field</a> <a id="AccI.id"></a><a id="2981" href="StructuredContracts.html#2981" class="Field">id</a> <a id="2984" class="Symbol">:</a> <a id="2986" href="StructuredContracts.html#2857" class="Postulate">Id</a>
        <a id="AccI.pk"></a><a id="2997" href="StructuredContracts.html#2997" class="Field">pk</a> <a id="3000" class="Symbol">:</a> <a id="3002" href="StructuredContracts.html#2860" class="Postulate">Key</a>
<a id="3006" class="Keyword">open</a> <a id="3011" href="StructuredContracts.html#2955" class="Module">AccI</a>

<a id="3017" class="Keyword">record</a> <a id="Account"></a><a id="3024" href="StructuredContracts.html#3024" class="Record">Account</a> <a id="3032" class="Symbol">:</a> <a id="3034" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="3039" class="Keyword">where</a>
  <a id="3047" class="Keyword">field</a> <a id="Account.id"></a><a id="3053" href="StructuredContracts.html#3053" class="Field">id</a> <a id="3056" class="Symbol">:</a> <a id="3058" href="StructuredContracts.html#2857" class="Postulate">Id</a>
        <a id="Account.value"></a><a id="3069" href="StructuredContracts.html#3069" class="Field">value</a> <a id="3075" class="Symbol">:</a> <a id="3077" href="StructuredContracts.html#1711" class="Postulate">Value</a>
        <a id="Account.pk"></a><a id="3091" href="StructuredContracts.html#3091" class="Field">pk</a> <a id="3094" class="Symbol">:</a> <a id="3096" href="StructuredContracts.html#2860" class="Postulate">Key</a>
<a id="3100" class="Keyword">open</a> <a id="3105" href="StructuredContracts.html#3024" class="Module">Account</a>
<a id="3113" class="Keyword">unquoteDecl</a> <a id="Derive-Account"></a><a id="3125" href="StructuredContracts.html#3125" class="Function">Derive-Account</a> <a id="3140" class="Symbol">=</a> <a id="3142" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="3149" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="3155" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="3157" class="Keyword">quote</a> <a id="3163" href="StructuredContracts.html#3024" class="Record">Account</a> <a id="3171" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3173" href="StructuredContracts.html#3125" class="Function">Derive-Account</a> <a id="3188" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="3191" class="Keyword">postulate</a>
  <a id="3203" class="Keyword">instance</a> <a id="3212" href="StructuredContracts.html#3212" class="Postulate">_</a> <a id="3214" class="Symbol">:</a> <a id="3216" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="3226" href="StructuredContracts.html#2955" class="Record">AccI</a><a id="3230" class="Symbol">;</a> <a id="3232" href="StructuredContracts.html#3232" class="Postulate">_</a> <a id="3234" class="Symbol">:</a> <a id="3236" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="3243" href="StructuredContracts.html#2955" class="Record">AccI</a>
  <a id="txInfoSignatories"></a><a id="3250" href="StructuredContracts.html#3250" class="Postulate">txInfoSignatories</a> <a id="3268" class="Symbol">:</a> <a id="3270" href="StructuredContracts.html#413" class="Postulate">TxInfo</a> <a id="3277" class="Symbol">→</a> <a id="3279" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="3284" href="StructuredContracts.html#2860" class="Postulate">Key</a>
  <a id="itype"></a><a id="3290" href="StructuredContracts.html#3290" class="Postulate">itype</a> <a id="3296" class="Symbol">:</a> <a id="3298" href="StructuredContracts.html#2955" class="Record">AccI</a> <a id="3303" class="Symbol">→</a> <a id="3305" href="StructuredContracts.html#2732" class="Datatype">IType</a>

<a id="3312" class="Keyword">variable</a>
  <a id="3323" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="3329" class="Symbol">:</a> <a id="3331" href="StructuredContracts.html#2955" class="Record">AccI</a>
  <a id="3338" href="StructuredContracts.html#3338" class="Generalizable">accts</a> <a id="3344" class="Symbol">:</a> <a id="3346" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3351" href="StructuredContracts.html#2857" class="Postulate">Id</a> <a id="3354" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3356" href="StructuredContracts.html#3024" class="Record">Account</a> <a id="3364" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>
  <a id="3368" href="StructuredContracts.html#3368" class="Generalizable">newAcct</a> <a id="3376" href="StructuredContracts.html#3376" class="Generalizable">acntToClose</a> <a id="3388" class="Symbol">:</a> <a id="3390" href="StructuredContracts.html#3024" class="Record">Account</a>

<a id="3399" class="Keyword">data</a> <a id="_⊢_—⟨_∣ACCNT⟩→_"></a><a id="3404" href="StructuredContracts.html#3404" class="Datatype Operator">_⊢_—⟨_∣ACCNT⟩→_</a> <a id="3420" class="Symbol">:</a> <a id="3422" href="Prelude.html#1305" class="Function">SSRel</a> <a id="3428" class="Symbol">(</a><a id="3429" href="StructuredContracts.html#413" class="Postulate">TxInfo</a> <a id="3436" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3438" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3443" href="StructuredContracts.html#2857" class="Postulate">Id</a> <a id="3446" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3448" href="StructuredContracts.html#3024" class="Record">Account</a> <a id="3456" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a> <a id="3458" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3460" href="StructuredContracts.html#2955" class="Record">AccI</a><a id="3464" class="Symbol">)</a> <a id="3466" class="Keyword">where</a>

  <a id="_⊢_—⟨_∣ACCNT⟩→_.Open"></a><a id="3475" href="StructuredContracts.html#3475" class="InductiveConstructor">Open</a> <a id="3480" class="Symbol">:</a>

    <a id="3487" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="3489" href="StructuredContracts.html#3290" class="Postulate">itype</a> <a id="3495" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="3501" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3503" href="StructuredContracts.html#2753" class="InductiveConstructor">OArgs</a>
    <a id="3513" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3515" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="3521" class="Symbol">.</a><a id="3522" href="StructuredContracts.html#2997" class="Field">pk</a> <a id="3525" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="3527" href="StructuredContracts.html#3250" class="Postulate">txInfoSignatories</a> <a id="3545" href="StructuredContracts.html#494" class="Generalizable">txInfo</a>
    <a id="3556" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3558" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="3564" class="Symbol">.</a><a id="3565" href="StructuredContracts.html#2981" class="Field">id</a> <a id="3568" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="3571" href="StructuredContracts.html#3338" class="Generalizable">accts</a>
    <a id="3581" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3583" href="StructuredContracts.html#3368" class="Generalizable">newAcct</a> <a id="3591" class="Symbol">.</a><a id="3592" href="StructuredContracts.html#3091" class="Field">pk</a> <a id="3595" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3597" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="3603" class="Symbol">.</a><a id="3604" href="StructuredContracts.html#2997" class="Field">pk</a>
    <a id="3611" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3613" href="StructuredContracts.html#3368" class="Generalizable">newAcct</a> <a id="3621" class="Symbol">.</a><a id="3622" href="StructuredContracts.html#3069" class="Field">value</a> <a id="3628" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3630" href="Prelude.Monoid.html#222" class="Field">ε</a>
      <a id="3638" href="Prelude.InferenceRules.html#11303" class="Function Operator">──────────────────────────────────────────────────────────────────────────</a>
      <a id="3719" href="StructuredContracts.html#494" class="Generalizable">txInfo</a> <a id="3726" href="StructuredContracts.html#3404" class="Datatype Operator">⊢</a> <a id="3728" href="StructuredContracts.html#3338" class="Generalizable">accts</a> <a id="3734" href="StructuredContracts.html#3404" class="Datatype Operator">—⟨</a> <a id="3737" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="3743" href="StructuredContracts.html#3404" class="Datatype Operator">∣ACCNT⟩→</a> <a id="3752" class="Symbol">(</a><a id="3753" href="StructuredContracts.html#3338" class="Generalizable">accts</a> <a id="3759" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3761" href="Prelude.Maps.AsSets.html#944" class="Function">singleton</a> <a id="3771" class="Symbol">(</a><a id="3772" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="3778" class="Symbol">.</a><a id="3779" href="StructuredContracts.html#2981" class="Field">id</a> <a id="3782" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3784" href="StructuredContracts.html#3368" class="Generalizable">newAcct</a><a id="3791" class="Symbol">))</a>

  <a id="_⊢_—⟨_∣ACCNT⟩→_.Close"></a><a id="3797" href="StructuredContracts.html#3797" class="InductiveConstructor">Close</a> <a id="3803" class="Symbol">:</a>

    <a id="3810" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="3812" href="StructuredContracts.html#3290" class="Postulate">itype</a> <a id="3818" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="3824" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3826" href="StructuredContracts.html#2759" class="InductiveConstructor">CArgs</a>
    <a id="3836" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3838" href="StructuredContracts.html#3338" class="Generalizable">accts</a> <a id="3844" href="Prelude.Maps.AsSets.html#2010" class="Function Operator">[</a> <a id="3846" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="3852" class="Symbol">.</a><a id="3853" href="StructuredContracts.html#2981" class="Field">id</a> <a id="3856" href="Prelude.Maps.AsSets.html#2010" class="Function Operator">↦</a> <a id="3858" href="StructuredContracts.html#3376" class="Generalizable">acntToClose</a> <a id="3870" href="Prelude.Maps.AsSets.html#2010" class="Function Operator">]</a>
    <a id="3876" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3878" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="3884" class="Symbol">.</a><a id="3885" href="StructuredContracts.html#2997" class="Field">pk</a> <a id="3888" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="3890" href="StructuredContracts.html#3250" class="Postulate">txInfoSignatories</a> <a id="3908" href="StructuredContracts.html#494" class="Generalizable">txInfo</a>
    <a id="3919" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3921" href="StructuredContracts.html#3376" class="Generalizable">acntToClose</a> <a id="3933" class="Symbol">.</a><a id="3934" href="StructuredContracts.html#3069" class="Field">value</a> <a id="3940" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3942" href="Prelude.Monoid.html#222" class="Field">ε</a>
      <a id="3950" href="Prelude.InferenceRules.html#12810" class="Function Operator">────────────────────────────────────────────────────</a>
      <a id="4009" href="StructuredContracts.html#494" class="Generalizable">txInfo</a> <a id="4016" href="StructuredContracts.html#3404" class="Datatype Operator">⊢</a> <a id="4018" href="StructuredContracts.html#3338" class="Generalizable">accts</a> <a id="4024" href="StructuredContracts.html#3404" class="Datatype Operator">—⟨</a> <a id="4027" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="4033" href="StructuredContracts.html#3404" class="Datatype Operator">∣ACCNT⟩→</a> <a id="4042" class="Symbol">(</a><a id="4043" href="StructuredContracts.html#3323" class="Generalizable">accIn</a> <a id="4049" class="Symbol">.</a><a id="4050" href="StructuredContracts.html#2981" class="Field">id</a> <a id="4053" href="Prelude.Maps.AsSets.html#3452" class="Function Operator">⋪</a> <a id="4055" href="StructuredContracts.html#3338" class="Generalizable">accts</a><a id="4060" class="Symbol">)</a>

<a id="4063" class="Keyword">postulate</a> <a id="LEDGER-simulates-ACCNT"></a><a id="4073" href="StructuredContracts.html#4073" class="Postulate">LEDGER-simulates-ACCNT</a> <a id="4096" class="Symbol">:</a> <a id="4098" href="StructuredContracts.html#1344" class="Function">IsSimulation</a> <a id="4111" href="StructuredContracts.html#3404" class="Datatype Operator">_⊢_—⟨_∣ACCNT⟩→_</a>
</pre></body></html>