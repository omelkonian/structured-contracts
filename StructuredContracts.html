<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>StructuredContracts</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/structured-contracts/tree/master/StructuredContracts.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Prelude.html" class="Module">Prelude</a> <a id="21" class="Keyword">hiding</a> <a id="28" class="Symbol">(</a><a id="29" href="Function.Base.html#624" class="Function">id</a><a id="31" class="Symbol">)</a>

<a id="34" class="Comment">-- ** Ledger</a>

<a id="48" class="Keyword">postulate</a>
  <a id="LEnv"></a><a id="60" href="StructuredContracts.html#60" class="Postulate">LEnv</a> <a id="LState"></a><a id="65" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="Tx"></a><a id="72" href="StructuredContracts.html#72" class="Postulate">Tx</a> <a id="75" class="Symbol">:</a> <a id="77" href="Agda.Primitive.html#320" class="Primitive">Type</a>
  <a id="_⊢_—⟨_∣UTXOW⟩→_"></a><a id="84" href="StructuredContracts.html#84" class="Postulate Operator">_⊢_—⟨_∣UTXOW⟩→_</a> <a id="100" class="Symbol">:</a> <a id="102" href="Prelude.html#2479" class="Function">SSRel</a> <a id="108" href="StructuredContracts.html#60" class="Postulate">LEnv</a> <a id="113" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="120" href="StructuredContracts.html#72" class="Postulate">Tx</a>

<a id="124" class="Keyword">variable</a>
  <a id="135" href="StructuredContracts.html#135" class="Generalizable">env</a> <a id="139" class="Symbol">:</a> <a id="141" href="StructuredContracts.html#60" class="Postulate">LEnv</a>
  <a id="148" href="StructuredContracts.html#148" class="Generalizable">utxoSt</a> <a id="155" href="StructuredContracts.html#155" class="Generalizable">utxoSt′</a> <a id="163" class="Symbol">:</a> <a id="165" href="StructuredContracts.html#65" class="Postulate">LState</a>
  <a id="174" href="StructuredContracts.html#174" class="Generalizable">tx</a> <a id="177" class="Symbol">:</a> <a id="179" href="StructuredContracts.html#72" class="Postulate">Tx</a>

<a id="183" class="Keyword">data</a> <a id="_⊢_—⟨_∣LEDGER⟩→_"></a><a id="188" href="StructuredContracts.html#188" class="Datatype Operator">_⊢_—⟨_∣LEDGER⟩→_</a> <a id="205" class="Symbol">:</a> <a id="207" href="Prelude.html#2479" class="Function">SSRel</a> <a id="213" href="StructuredContracts.html#60" class="Postulate">LEnv</a> <a id="218" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="225" href="StructuredContracts.html#72" class="Postulate">Tx</a> <a id="228" class="Keyword">where</a>

  <a id="_⊢_—⟨_∣LEDGER⟩→_.ledger-V"></a><a id="237" href="StructuredContracts.html#237" class="InductiveConstructor">ledger-V</a> <a id="246" class="Symbol">:</a>
    <a id="252" href="StructuredContracts.html#135" class="Generalizable">env</a> <a id="256" href="StructuredContracts.html#84" class="Postulate Operator">⊢</a> <a id="258" href="StructuredContracts.html#148" class="Generalizable">utxoSt</a> <a id="265" href="StructuredContracts.html#84" class="Postulate Operator">—⟨</a> <a id="268" href="StructuredContracts.html#174" class="Generalizable">tx</a> <a id="271" href="StructuredContracts.html#84" class="Postulate Operator">∣UTXOW⟩→</a> <a id="280" href="StructuredContracts.html#155" class="Generalizable">utxoSt′</a>
    <a id="292" href="Prelude.InferenceRules.html#13602" class="Function Operator">────────────────────────────────────</a>
    <a id="333" href="StructuredContracts.html#135" class="Generalizable">env</a> <a id="337" href="StructuredContracts.html#188" class="Datatype Operator">⊢</a> <a id="339" href="StructuredContracts.html#148" class="Generalizable">utxoSt</a> <a id="346" href="StructuredContracts.html#188" class="Datatype Operator">—⟨</a> <a id="349" href="StructuredContracts.html#174" class="Generalizable">tx</a> <a id="352" href="StructuredContracts.html#188" class="Datatype Operator">∣LEDGER⟩→</a> <a id="362" href="StructuredContracts.html#155" class="Generalizable">utxoSt′</a>

<a id="371" class="Comment">-- ** Simulation</a>

<a id="389" class="Keyword">postulate</a>
  <a id="TxInfo"></a><a id="401" href="StructuredContracts.html#401" class="Postulate">TxInfo</a> <a id="408" class="Symbol">:</a> <a id="410" href="Agda.Primitive.html#320" class="Primitive">Type</a>
  <a id="getUTxO"></a><a id="417" href="StructuredContracts.html#417" class="Postulate">getUTxO</a> <a id="425" class="Symbol">:</a> <a id="427" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="434" class="Symbol">→</a> <a id="436" href="StructuredContracts.html#72" class="Postulate">Tx</a> <a id="439" class="Symbol">→</a> <a id="441" href="StructuredContracts.html#401" class="Postulate">TxInfo</a>
  <a id="isValid"></a><a id="450" href="StructuredContracts.html#450" class="Postulate">isValid</a> <a id="458" class="Symbol">:</a> <a id="460" href="StructuredContracts.html#72" class="Postulate">Tx</a> <a id="463" class="Symbol">→</a> <a id="465" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>

<a id="471" class="Keyword">variable</a>
  <a id="482" href="StructuredContracts.html#482" class="Generalizable">txInfo</a> <a id="489" class="Symbol">:</a> <a id="491" href="StructuredContracts.html#401" class="Postulate">TxInfo</a>

<a id="499" class="Keyword">module</a> <a id="Simulation"></a><a id="506" href="StructuredContracts.html#506" class="Module">Simulation</a>
  <a id="519" class="Symbol">{</a><a id="520" href="StructuredContracts.html#520" class="Bound">State</a> <a id="526" href="StructuredContracts.html#526" class="Bound">Input</a> <a id="532" class="Symbol">:</a> <a id="534" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="538" class="Symbol">}</a>
  <a id="542" class="Symbol">⦃</a> <a id="544" href="StructuredContracts.html#544" class="Bound">_</a> <a id="546" class="Symbol">:</a> <a id="548" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="558" href="StructuredContracts.html#526" class="Bound">Input</a> <a id="564" class="Symbol">⦄</a>
  <a id="568" class="Symbol">⦃</a> <a id="570" href="StructuredContracts.html#570" class="Bound">_</a> <a id="572" class="Symbol">:</a> <a id="574" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="581" href="StructuredContracts.html#526" class="Bound">Input</a> <a id="587" class="Symbol">⦄</a>
  <a id="591" class="Symbol">(</a><a id="592" href="StructuredContracts.html#592" class="Bound">πˢ</a> <a id="595" class="Symbol">:</a> <a id="597" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="604" class="Symbol">→</a> <a id="606" href="StructuredContracts.html#520" class="Bound">State</a><a id="611" class="Symbol">)</a>
  <a id="615" class="Symbol">(</a><a id="616" href="StructuredContracts.html#616" class="Bound">πⁱ</a> <a id="619" class="Symbol">:</a> <a id="621" href="StructuredContracts.html#401" class="Postulate">TxInfo</a> <a id="628" class="Symbol">→</a> <a id="630" href="StructuredContracts.html#526" class="Bound">Input</a><a id="635" class="Symbol">)</a>
  <a id="639" class="Symbol">(</a><a id="640" href="StructuredContracts.html#640" class="Bound Operator">_⊢_—⟨_∣SMUP⟩→_</a> <a id="655" class="Symbol">:</a> <a id="657" href="Prelude.html#2479" class="Function">SSRel</a> <a id="663" href="StructuredContracts.html#401" class="Postulate">TxInfo</a> <a id="670" href="StructuredContracts.html#520" class="Bound">State</a> <a id="676" href="StructuredContracts.html#526" class="Bound">Input</a><a id="681" class="Symbol">)</a>
  <a id="685" class="Keyword">where</a>

  <a id="694" class="Keyword">data</a> <a id="Simulation.StatefulStep"></a><a id="699" href="StructuredContracts.html#699" class="Datatype">StatefulStep</a> <a id="712" class="Symbol">:</a> <a id="714" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="719" class="Keyword">where</a>
    <a id="Simulation.StatefulStep.STEP"></a><a id="729" href="StructuredContracts.html#729" class="InductiveConstructor">STEP</a> <a id="734" class="Symbol">:</a>
      <a id="742" class="Symbol">(</a><a id="743" class="Keyword">let</a> <a id="747" href="StructuredContracts.html#747" class="Bound">txInfo</a> <a id="754" class="Symbol">=</a> <a id="756" href="StructuredContracts.html#417" class="Postulate">getUTxO</a> <a id="764" href="StructuredContracts.html#148" class="Generalizable">utxoSt</a> <a id="771" href="StructuredContracts.html#174" class="Generalizable">tx</a> <a id="774" class="Keyword">in</a>
      <a id="783" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="785" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="787" class="Symbol">(</a><a id="788" href="StructuredContracts.html#450" class="Postulate">isValid</a> <a id="796" href="StructuredContracts.html#174" class="Generalizable">tx</a><a id="798" class="Symbol">)</a>
      <a id="806" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="808" href="StructuredContracts.html#616" class="Bound">πⁱ</a> <a id="811" href="StructuredContracts.html#747" class="Bound">txInfo</a> <a id="818" href="Relation.Binary.PropositionalEquality.Core.html#839" class="Function Operator">≢</a> <a id="820" href="Prelude.Monoid.html#222" class="Field">ε</a>
      <a id="828" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="830" href="StructuredContracts.html#135" class="Generalizable">env</a> <a id="834" href="StructuredContracts.html#188" class="Datatype Operator">⊢</a> <a id="836" href="StructuredContracts.html#148" class="Generalizable">utxoSt</a> <a id="843" href="StructuredContracts.html#188" class="Datatype Operator">—⟨</a> <a id="846" href="StructuredContracts.html#174" class="Generalizable">tx</a> <a id="849" href="StructuredContracts.html#188" class="Datatype Operator">∣LEDGER⟩→</a> <a id="859" href="StructuredContracts.html#155" class="Generalizable">utxoSt′</a>
        <a id="875" href="Prelude.InferenceRules.html#12867" class="Function Operator">───────────────────────────────────────────────────</a>
        <a id="935" href="StructuredContracts.html#747" class="Bound">txInfo</a> <a id="942" href="StructuredContracts.html#640" class="Bound Operator">⊢</a> <a id="944" href="StructuredContracts.html#592" class="Bound">πˢ</a> <a id="947" href="StructuredContracts.html#148" class="Generalizable">utxoSt</a> <a id="954" href="StructuredContracts.html#640" class="Bound Operator">—⟨</a> <a id="957" href="StructuredContracts.html#616" class="Bound">πⁱ</a> <a id="960" href="StructuredContracts.html#747" class="Bound">txInfo</a> <a id="967" href="StructuredContracts.html#640" class="Bound Operator">∣SMUP⟩→</a> <a id="975" href="StructuredContracts.html#592" class="Bound">πˢ</a> <a id="978" href="StructuredContracts.html#155" class="Generalizable">utxoSt′</a><a id="985" class="Symbol">)</a>
      <a id="993" href="Prelude.InferenceRules.html#14310" class="Function Operator">────────────</a>
      <a id="1012" href="StructuredContracts.html#699" class="Datatype">StatefulStep</a>

  <a id="1028" class="Keyword">data</a> <a id="Simulation.StatefulNoStep"></a><a id="1033" href="StructuredContracts.html#1033" class="Datatype">StatefulNoStep</a> <a id="1048" class="Symbol">:</a> <a id="1050" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1055" class="Keyword">where</a>
    <a id="Simulation.StatefulNoStep.NO-STEP"></a><a id="1065" href="StructuredContracts.html#1065" class="InductiveConstructor">NO-STEP</a> <a id="1073" class="Symbol">:</a>
      <a id="1081" class="Symbol">(</a><a id="1082" class="Keyword">let</a> <a id="1086" href="StructuredContracts.html#1086" class="Bound">txInfo</a> <a id="1093" class="Symbol">=</a> <a id="1095" href="StructuredContracts.html#417" class="Postulate">getUTxO</a> <a id="1103" href="StructuredContracts.html#148" class="Generalizable">utxoSt</a> <a id="1110" href="StructuredContracts.html#174" class="Generalizable">tx</a> <a id="1113" class="Keyword">in</a>
      <a id="1122" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="1124" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="1126" class="Symbol">(</a><a id="1127" href="StructuredContracts.html#450" class="Postulate">isValid</a> <a id="1135" href="StructuredContracts.html#174" class="Generalizable">tx</a><a id="1137" class="Symbol">)</a>
      <a id="1145" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="1147" href="StructuredContracts.html#616" class="Bound">πⁱ</a> <a id="1150" href="StructuredContracts.html#1086" class="Bound">txInfo</a> <a id="1157" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1159" href="Prelude.Monoid.html#222" class="Field">ε</a>
      <a id="1167" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="1169" href="StructuredContracts.html#135" class="Generalizable">env</a> <a id="1173" href="StructuredContracts.html#188" class="Datatype Operator">⊢</a> <a id="1175" href="StructuredContracts.html#148" class="Generalizable">utxoSt</a> <a id="1182" href="StructuredContracts.html#188" class="Datatype Operator">—⟨</a> <a id="1185" href="StructuredContracts.html#174" class="Generalizable">tx</a> <a id="1188" href="StructuredContracts.html#188" class="Datatype Operator">∣LEDGER⟩→</a> <a id="1198" href="StructuredContracts.html#155" class="Generalizable">utxoSt′</a>
        <a id="1214" href="Prelude.InferenceRules.html#13602" class="Function Operator">────────────────────────────────────</a>
        <a id="1259" href="StructuredContracts.html#592" class="Bound">πˢ</a> <a id="1262" href="StructuredContracts.html#148" class="Generalizable">utxoSt</a> <a id="1269" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1271" href="StructuredContracts.html#592" class="Bound">πˢ</a> <a id="1274" href="StructuredContracts.html#155" class="Generalizable">utxoSt′</a><a id="1281" class="Symbol">)</a>
      <a id="1289" href="Prelude.InferenceRules.html#14273" class="Function Operator">──────────────</a>
      <a id="1310" href="StructuredContracts.html#1033" class="Datatype">StatefulNoStep</a>

<a id="IsSimulation"></a><a id="1326" href="StructuredContracts.html#1326" class="Function">IsSimulation</a> <a id="1339" class="Symbol">:</a> <a id="1341" class="Symbol">∀</a> <a id="1343" class="Symbol">{</a><a id="1344" href="StructuredContracts.html#1344" class="Bound">S</a> <a id="1346" href="StructuredContracts.html#1346" class="Bound">I</a> <a id="1348" class="Symbol">:</a> <a id="1350" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="1354" class="Symbol">}</a> <a id="1356" class="Symbol">⦃</a> <a id="1358" href="StructuredContracts.html#1358" class="Bound">_</a> <a id="1360" class="Symbol">:</a> <a id="1362" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="1372" href="StructuredContracts.html#1346" class="Bound">I</a> <a id="1374" class="Symbol">⦄</a> <a id="1376" class="Symbol">→</a> <a id="1378" class="Symbol">⦃</a> <a id="1380" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="1387" href="StructuredContracts.html#1346" class="Bound">I</a> <a id="1389" class="Symbol">⦄</a> <a id="1391" class="Symbol">→</a> <a id="1393" href="Prelude.Init.html#13332" class="Function">Pred₀</a> <a id="1399" class="Symbol">(</a><a id="1400" href="Prelude.html#2479" class="Function">SSRel</a> <a id="1406" href="StructuredContracts.html#401" class="Postulate">TxInfo</a> <a id="1413" href="StructuredContracts.html#1344" class="Bound">S</a> <a id="1415" href="StructuredContracts.html#1346" class="Bound">I</a><a id="1416" class="Symbol">)</a>
<a id="1418" href="StructuredContracts.html#1326" class="Function">IsSimulation</a> <a id="1431" class="Symbol">{</a><a id="1432" href="StructuredContracts.html#1432" class="Bound">S</a><a id="1433" class="Symbol">}{</a><a id="1435" href="StructuredContracts.html#1435" class="Bound">I</a><a id="1436" class="Symbol">}</a> <a id="1438" href="StructuredContracts.html#1438" class="Bound">ssRel</a> <a id="1444" class="Symbol">=</a>
  <a id="1448" href="Data.Product.html#1378" class="Function">∃</a> <a id="1450" class="Symbol">λ</a> <a id="1452" class="Symbol">(</a><a id="1453" href="StructuredContracts.html#1453" class="Bound">πˢ</a> <a id="1456" class="Symbol">:</a> <a id="1458" href="StructuredContracts.html#65" class="Postulate">LState</a> <a id="1465" class="Symbol">→</a> <a id="1467" href="StructuredContracts.html#1432" class="Bound">S</a><a id="1468" class="Symbol">)</a> <a id="1470" class="Symbol">→</a> <a id="1472" href="Data.Product.html#1378" class="Function">∃</a> <a id="1474" class="Symbol">λ</a> <a id="1476" class="Symbol">(</a><a id="1477" href="StructuredContracts.html#1477" class="Bound">πⁱ</a> <a id="1480" class="Symbol">:</a> <a id="1482" href="StructuredContracts.html#401" class="Postulate">TxInfo</a> <a id="1489" class="Symbol">→</a> <a id="1491" href="StructuredContracts.html#1435" class="Bound">I</a><a id="1492" class="Symbol">)</a> <a id="1494" class="Symbol">→</a>
  <a id="1498" class="Keyword">let</a> <a id="1502" class="Keyword">open</a> <a id="1507" href="StructuredContracts.html#506" class="Module">Simulation</a> <a id="1518" href="StructuredContracts.html#1453" class="Bound">πˢ</a> <a id="1521" href="StructuredContracts.html#1477" class="Bound">πⁱ</a> <a id="1524" href="StructuredContracts.html#1438" class="Bound">ssRel</a> <a id="1530" class="Keyword">in</a>
    <a id="1537" href="Prelude.Init.html#1736" class="Function">Surjective≡</a> <a id="1549" class="Symbol">{</a><a id="1550" class="Argument">A</a> <a id="1552" class="Symbol">=</a> <a id="1554" href="StructuredContracts.html#65" class="Postulate">LState</a><a id="1560" class="Symbol">}</a> <a id="1562" href="StructuredContracts.html#1453" class="Bound">πˢ</a>
  <a id="1567" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1569" href="Prelude.Init.html#1736" class="Function">Surjective≡</a> <a id="1581" class="Symbol">{</a><a id="1582" class="Argument">A</a> <a id="1584" class="Symbol">=</a> <a id="1586" href="StructuredContracts.html#401" class="Postulate">TxInfo</a><a id="1592" class="Symbol">}</a> <a id="1594" href="StructuredContracts.html#1477" class="Bound">πⁱ</a>
  <a id="1599" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1601" href="StructuredContracts.html#699" class="Datatype">StatefulStep</a>
  <a id="1616" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1618" href="StructuredContracts.html#1033" class="Datatype">StatefulNoStep</a>

<a id="1634" class="Comment">-- ** NFT state machine library</a>

<a id="1667" class="Keyword">postulate</a>
  <a id="SMS"></a><a id="1679" href="StructuredContracts.html#1679" class="Postulate">SMS</a> <a id="SMI"></a><a id="1683" href="StructuredContracts.html#1683" class="Postulate">SMI</a> <a id="Value"></a><a id="1687" href="StructuredContracts.html#1687" class="Postulate">Value</a> <a id="1693" class="Symbol">:</a> <a id="1695" href="Agda.Primitive.html#320" class="Primitive">Type</a>
  <a id="1702" class="Keyword">instance</a> <a id="1711" href="StructuredContracts.html#1711" class="Postulate">_</a> <a id="1713" class="Symbol">:</a> <a id="1715" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="1725" href="StructuredContracts.html#1679" class="Postulate">SMS</a><a id="1728" class="Symbol">;</a> <a id="1730" href="StructuredContracts.html#1730" class="Postulate">_</a> <a id="1732" class="Symbol">:</a> <a id="1734" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="1741" href="StructuredContracts.html#1679" class="Postulate">SMS</a>
           <a id="1756" href="StructuredContracts.html#1756" class="Postulate">_</a> <a id="1758" class="Symbol">:</a> <a id="1760" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="1770" href="StructuredContracts.html#1687" class="Postulate">Value</a><a id="1775" class="Symbol">;</a> <a id="1777" href="StructuredContracts.html#1777" class="Postulate">_</a> <a id="1779" class="Symbol">:</a> <a id="1781" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="1788" href="StructuredContracts.html#1687" class="Postulate">Value</a>
           <a id="1805" href="StructuredContracts.html#1805" class="Postulate">_</a> <a id="1807" class="Symbol">:</a> <a id="1809" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="1819" href="StructuredContracts.html#1683" class="Postulate">SMI</a><a id="1822" class="Symbol">;</a> <a id="1824" href="StructuredContracts.html#1824" class="Postulate">_</a> <a id="1826" class="Symbol">:</a> <a id="1828" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="1835" href="StructuredContracts.html#1683" class="Postulate">SMI</a>
  <a id="initState"></a><a id="1841" href="StructuredContracts.html#1841" class="Postulate">initState</a> <a id="1851" class="Symbol">:</a> <a id="1853" href="StructuredContracts.html#1679" class="Postulate">SMS</a> <a id="1857" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1859" href="StructuredContracts.html#1687" class="Postulate">Value</a>
  <a id="SpendsNFT"></a><a id="1867" href="StructuredContracts.html#1867" class="Postulate">SpendsNFT</a> <a id="PutsNFT"></a><a id="1877" href="StructuredContracts.html#1877" class="Postulate">PutsNFT</a> <a id="PropagatesNFT"></a><a id="1885" href="StructuredContracts.html#1885" class="Postulate">PropagatesNFT</a> <a id="1899" class="Symbol">:</a> <a id="1901" href="Prelude.Init.html#13332" class="Function">Pred₀</a> <a id="1907" href="StructuredContracts.html#401" class="Postulate">TxInfo</a>
  <a id="buildConstraints"></a><a id="1916" href="StructuredContracts.html#1916" class="Postulate">buildConstraints</a> <a id="1933" class="Symbol">:</a> <a id="1935" href="StructuredContracts.html#401" class="Postulate">TxInfo</a> <a id="1942" class="Symbol">→</a> <a id="1944" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1949" class="Symbol">(</a><a id="1950" href="StructuredContracts.html#1679" class="Postulate">SMS</a> <a id="1954" class="Symbol">→</a> <a id="1956" href="StructuredContracts.html#1683" class="Postulate">SMI</a> <a id="1960" class="Symbol">→</a> <a id="1962" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="1966" class="Symbol">)</a>
  <a id="_⊢_—⟨_∣SMPEC⟩→_"></a><a id="1970" href="StructuredContracts.html#1970" class="Postulate Operator">_⊢_—⟨_∣SMPEC⟩→_</a> <a id="1986" class="Symbol">:</a> <a id="1988" href="Prelude.html#2479" class="Function">SSRel</a> <a id="1994" href="StructuredContracts.html#401" class="Postulate">TxInfo</a> <a id="2001" class="Symbol">(</a><a id="2002" href="StructuredContracts.html#1679" class="Postulate">SMS</a> <a id="2006" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2008" href="StructuredContracts.html#1687" class="Postulate">Value</a><a id="2013" class="Symbol">)</a> <a id="2015" href="StructuredContracts.html#1683" class="Postulate">SMI</a>

<a id="2020" class="Keyword">variable</a>
  <a id="2031" href="StructuredContracts.html#2031" class="Generalizable">sms</a> <a id="2035" href="StructuredContracts.html#2035" class="Generalizable">sms′</a> <a id="2040" class="Symbol">:</a> <a id="2042" href="StructuredContracts.html#1679" class="Postulate">SMS</a>
  <a id="2048" href="StructuredContracts.html#2048" class="Generalizable">smi</a> <a id="2052" class="Symbol">:</a> <a id="2054" href="StructuredContracts.html#1683" class="Postulate">SMI</a>
  <a id="2060" href="StructuredContracts.html#2060" class="Generalizable">val</a> <a id="2064" href="StructuredContracts.html#2064" class="Generalizable">val′</a> <a id="2069" class="Symbol">:</a> <a id="2071" href="StructuredContracts.html#1687" class="Postulate">Value</a>

<a id="2078" class="Keyword">data</a> <a id="_⊢_—⟨_∣NFTCE⟩→_"></a><a id="2083" href="StructuredContracts.html#2083" class="Datatype Operator">_⊢_—⟨_∣NFTCE⟩→_</a> <a id="2099" class="Symbol">:</a> <a id="2101" href="Prelude.html#2479" class="Function">SSRel</a> <a id="2107" href="StructuredContracts.html#401" class="Postulate">TxInfo</a> <a id="2114" class="Symbol">(</a><a id="2115" href="StructuredContracts.html#1679" class="Postulate">SMS</a> <a id="2119" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2121" href="StructuredContracts.html#1687" class="Postulate">Value</a><a id="2126" class="Symbol">)</a> <a id="2128" href="StructuredContracts.html#1683" class="Postulate">SMI</a> <a id="2132" class="Keyword">where</a>

  <a id="_⊢_—⟨_∣NFTCE⟩→_.MintsNFT"></a><a id="2141" href="StructuredContracts.html#2141" class="InductiveConstructor">MintsNFT</a> <a id="2150" class="Symbol">:</a>
    <a id="2156" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="2158" href="StructuredContracts.html#1867" class="Postulate">SpendsNFT</a> <a id="2168" href="StructuredContracts.html#482" class="Generalizable">txInfo</a>
    <a id="2179" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="2181" href="StructuredContracts.html#1877" class="Postulate">PutsNFT</a> <a id="2189" href="StructuredContracts.html#482" class="Generalizable">txInfo</a>
    <a id="2200" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="2202" href="StructuredContracts.html#135" class="Generalizable">env</a> <a id="2206" href="StructuredContracts.html#84" class="Postulate Operator">⊢</a> <a id="2208" href="StructuredContracts.html#148" class="Generalizable">utxoSt</a> <a id="2215" href="StructuredContracts.html#84" class="Postulate Operator">—⟨</a> <a id="2218" href="StructuredContracts.html#174" class="Generalizable">tx</a> <a id="2221" href="StructuredContracts.html#84" class="Postulate Operator">∣UTXOW⟩→</a> <a id="2230" href="StructuredContracts.html#155" class="Generalizable">utxoSt′</a>
      <a id="2244" href="Prelude.InferenceRules.html#13602" class="Function Operator">────────────────────────────────────</a>
      <a id="2287" href="StructuredContracts.html#482" class="Generalizable">txInfo</a> <a id="2294" href="StructuredContracts.html#2083" class="Datatype Operator">⊢</a> <a id="2296" href="Prelude.Monoid.html#222" class="Field">ε</a> <a id="2298" href="StructuredContracts.html#2083" class="Datatype Operator">—⟨</a> <a id="2301" href="StructuredContracts.html#2048" class="Generalizable">smi</a> <a id="2305" href="StructuredContracts.html#2083" class="Datatype Operator">∣NFTCE⟩→</a> <a id="2314" href="StructuredContracts.html#1841" class="Postulate">initState</a>

  <a id="_⊢_—⟨_∣NFTCE⟩→_.PropogatesNFT"></a><a id="2327" href="StructuredContracts.html#2327" class="InductiveConstructor">PropogatesNFT</a> <a id="2341" class="Symbol">:</a>
    <a id="2347" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="2349" href="Data.List.Relation.Unary.All.html#1453" class="Datatype">All</a> <a id="2353" class="Symbol">(λ</a> <a id="2356" href="StructuredContracts.html#2356" class="Bound">P</a> <a id="2358" class="Symbol">→</a> <a id="2360" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="2362" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="2364" href="StructuredContracts.html#2356" class="Bound">P</a> <a id="2366" href="StructuredContracts.html#2031" class="Generalizable">sms</a> <a id="2370" href="StructuredContracts.html#2048" class="Generalizable">smi</a><a id="2373" class="Symbol">)</a> <a id="2375" class="Symbol">(</a><a id="2376" href="StructuredContracts.html#1916" class="Postulate">buildConstraints</a> <a id="2393" href="StructuredContracts.html#482" class="Generalizable">txInfo</a><a id="2399" class="Symbol">)</a>
    <a id="2405" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="2407" href="StructuredContracts.html#1885" class="Postulate">PropagatesNFT</a> <a id="2421" href="StructuredContracts.html#482" class="Generalizable">txInfo</a>
    <a id="2432" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="2434" href="StructuredContracts.html#482" class="Generalizable">txInfo</a> <a id="2441" href="StructuredContracts.html#1970" class="Postulate Operator">⊢</a> <a id="2443" class="Symbol">(</a><a id="2444" href="StructuredContracts.html#2031" class="Generalizable">sms</a> <a id="2448" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2450" href="StructuredContracts.html#2060" class="Generalizable">val</a><a id="2453" class="Symbol">)</a> <a id="2455" href="StructuredContracts.html#1970" class="Postulate Operator">—⟨</a> <a id="2458" href="StructuredContracts.html#2048" class="Generalizable">smi</a> <a id="2462" href="StructuredContracts.html#1970" class="Postulate Operator">∣SMPEC⟩→</a> <a id="2471" class="Symbol">(</a><a id="2472" href="StructuredContracts.html#2035" class="Generalizable">sms′</a> <a id="2477" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2479" href="StructuredContracts.html#2064" class="Generalizable">val′</a><a id="2483" class="Symbol">)</a>
      <a id="2491" href="Prelude.InferenceRules.html#12923" class="Function Operator">──────────────────────────────────────────────────</a>
      <a id="2548" href="StructuredContracts.html#482" class="Generalizable">txInfo</a> <a id="2555" href="StructuredContracts.html#2083" class="Datatype Operator">⊢</a> <a id="2557" class="Symbol">(</a><a id="2558" href="StructuredContracts.html#2031" class="Generalizable">sms</a> <a id="2562" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2564" href="StructuredContracts.html#2060" class="Generalizable">val</a><a id="2567" class="Symbol">)</a> <a id="2569" href="StructuredContracts.html#2083" class="Datatype Operator">—⟨</a> <a id="2572" href="StructuredContracts.html#2048" class="Generalizable">smi</a> <a id="2576" href="StructuredContracts.html#2083" class="Datatype Operator">∣NFTCE⟩→</a> <a id="2585" class="Symbol">(</a><a id="2586" href="StructuredContracts.html#2035" class="Generalizable">sms′</a> <a id="2591" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2593" href="StructuredContracts.html#2064" class="Generalizable">val′</a><a id="2597" class="Symbol">)</a>

<a id="2600" class="Keyword">postulate</a> <a id="LEDGER-simulates-NFTCE"></a><a id="2610" href="StructuredContracts.html#2610" class="Postulate">LEDGER-simulates-NFTCE</a> <a id="2633" class="Symbol">:</a> <a id="2635" href="StructuredContracts.html#1326" class="Function">IsSimulation</a> <a id="2648" href="StructuredContracts.html#2083" class="Datatype Operator">_⊢_—⟨_∣NFTCE⟩→_</a>

<a id="2665" class="Comment">-- ** Account simulation</a>

<a id="2691" class="Keyword">data</a> <a id="IType"></a><a id="2696" href="StructuredContracts.html#2696" class="Datatype">IType</a> <a id="2702" class="Symbol">:</a> <a id="2704" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="2709" class="Keyword">where</a>
  <a id="IType.OArgs"></a><a id="2717" href="StructuredContracts.html#2717" class="InductiveConstructor">OArgs</a> <a id="IType.CArgs"></a><a id="2723" href="StructuredContracts.html#2723" class="InductiveConstructor">CArgs</a> <a id="2729" class="Symbol">:</a> <a id="2731" href="StructuredContracts.html#2696" class="Datatype">IType</a>
<a id="2737" class="Keyword">unquoteDecl</a> <a id="Derive-IType"></a><a id="2749" href="StructuredContracts.html#2749" class="Function">Derive-IType</a> <a id="2762" class="Symbol">=</a> <a id="2764" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="2771" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2777" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="2779" class="Keyword">quote</a> <a id="2785" href="StructuredContracts.html#2696" class="Datatype">IType</a> <a id="2791" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2793" href="StructuredContracts.html#2749" class="Function">Derive-IType</a> <a id="2806" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="2809" class="Keyword">postulate</a>
  <a id="Id"></a><a id="2821" href="StructuredContracts.html#2821" class="Postulate">Id</a> <a id="Key"></a><a id="2824" href="StructuredContracts.html#2824" class="Postulate">Key</a> <a id="2828" class="Symbol">:</a> <a id="2830" href="Agda.Primitive.html#320" class="Primitive">Type</a>
  <a id="2837" class="Keyword">instance</a> <a id="2846" href="StructuredContracts.html#2846" class="Postulate">_</a> <a id="2848" class="Symbol">:</a> <a id="2850" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2856" href="StructuredContracts.html#2821" class="Postulate">Id</a>
           <a id="2870" href="StructuredContracts.html#2870" class="Postulate">_</a> <a id="2872" class="Symbol">:</a> <a id="2874" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2880" href="StructuredContracts.html#2824" class="Postulate">Key</a>
           <a id="2895" href="StructuredContracts.html#2895" class="Postulate">_</a> <a id="2897" class="Symbol">:</a> <a id="2899" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2905" href="StructuredContracts.html#1687" class="Postulate">Value</a>

<a id="2912" class="Keyword">record</a> <a id="AccI"></a><a id="2919" href="StructuredContracts.html#2919" class="Record">AccI</a> <a id="2924" class="Symbol">:</a> <a id="2926" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="2931" class="Keyword">where</a>
  <a id="2939" class="Keyword">field</a> <a id="AccI.id"></a><a id="2945" href="StructuredContracts.html#2945" class="Field">id</a> <a id="2948" class="Symbol">:</a> <a id="2950" href="StructuredContracts.html#2821" class="Postulate">Id</a>
        <a id="AccI.pk"></a><a id="2961" href="StructuredContracts.html#2961" class="Field">pk</a> <a id="2964" class="Symbol">:</a> <a id="2966" href="StructuredContracts.html#2824" class="Postulate">Key</a>
<a id="2970" class="Keyword">open</a> <a id="2975" href="StructuredContracts.html#2919" class="Module">AccI</a>

<a id="2981" class="Keyword">record</a> <a id="Account"></a><a id="2988" href="StructuredContracts.html#2988" class="Record">Account</a> <a id="2996" class="Symbol">:</a> <a id="2998" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="3003" class="Keyword">where</a>
  <a id="3011" class="Keyword">field</a> <a id="Account.id"></a><a id="3017" href="StructuredContracts.html#3017" class="Field">id</a> <a id="3020" class="Symbol">:</a> <a id="3022" href="StructuredContracts.html#2821" class="Postulate">Id</a>
        <a id="Account.value"></a><a id="3033" href="StructuredContracts.html#3033" class="Field">value</a> <a id="3039" class="Symbol">:</a> <a id="3041" href="StructuredContracts.html#1687" class="Postulate">Value</a>
        <a id="Account.pk"></a><a id="3055" href="StructuredContracts.html#3055" class="Field">pk</a> <a id="3058" class="Symbol">:</a> <a id="3060" href="StructuredContracts.html#2824" class="Postulate">Key</a>
<a id="3064" class="Keyword">open</a> <a id="3069" href="StructuredContracts.html#2988" class="Module">Account</a>
<a id="3077" class="Keyword">unquoteDecl</a> <a id="Derive-Account"></a><a id="3089" href="StructuredContracts.html#3089" class="Function">Derive-Account</a> <a id="3104" class="Symbol">=</a> <a id="3106" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="3113" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="3119" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="3121" class="Keyword">quote</a> <a id="3127" href="StructuredContracts.html#2988" class="Record">Account</a> <a id="3135" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3137" href="StructuredContracts.html#3089" class="Function">Derive-Account</a> <a id="3152" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="3155" class="Keyword">postulate</a>
  <a id="3167" class="Keyword">instance</a> <a id="3176" href="StructuredContracts.html#3176" class="Postulate">_</a> <a id="3178" class="Symbol">:</a> <a id="3180" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="3190" href="StructuredContracts.html#2919" class="Record">AccI</a><a id="3194" class="Symbol">;</a> <a id="3196" href="StructuredContracts.html#3196" class="Postulate">_</a> <a id="3198" class="Symbol">:</a> <a id="3200" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="3207" href="StructuredContracts.html#2919" class="Record">AccI</a>
  <a id="txInfoSignatories"></a><a id="3214" href="StructuredContracts.html#3214" class="Postulate">txInfoSignatories</a> <a id="3232" class="Symbol">:</a> <a id="3234" href="StructuredContracts.html#401" class="Postulate">TxInfo</a> <a id="3241" class="Symbol">→</a> <a id="3243" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="3248" href="StructuredContracts.html#2824" class="Postulate">Key</a>
  <a id="itype"></a><a id="3254" href="StructuredContracts.html#3254" class="Postulate">itype</a> <a id="3260" class="Symbol">:</a> <a id="3262" href="StructuredContracts.html#2919" class="Record">AccI</a> <a id="3267" class="Symbol">→</a> <a id="3269" href="StructuredContracts.html#2696" class="Datatype">IType</a>

<a id="3276" class="Keyword">variable</a>
  <a id="3287" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="3293" class="Symbol">:</a> <a id="3295" href="StructuredContracts.html#2919" class="Record">AccI</a>
  <a id="3302" href="StructuredContracts.html#3302" class="Generalizable">accts</a> <a id="3308" class="Symbol">:</a> <a id="3310" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3315" href="StructuredContracts.html#2821" class="Postulate">Id</a> <a id="3318" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3320" href="StructuredContracts.html#2988" class="Record">Account</a> <a id="3328" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>
  <a id="3332" href="StructuredContracts.html#3332" class="Generalizable">newAcct</a> <a id="3340" href="StructuredContracts.html#3340" class="Generalizable">acntToClose</a> <a id="3352" class="Symbol">:</a> <a id="3354" href="StructuredContracts.html#2988" class="Record">Account</a>

<a id="3363" class="Keyword">data</a> <a id="_⊢_—⟨_∣ACCNT⟩→_"></a><a id="3368" href="StructuredContracts.html#3368" class="Datatype Operator">_⊢_—⟨_∣ACCNT⟩→_</a> <a id="3384" class="Symbol">:</a> <a id="3386" href="Prelude.html#2479" class="Function">SSRel</a> <a id="3392" href="StructuredContracts.html#401" class="Postulate">TxInfo</a> <a id="3399" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3404" href="StructuredContracts.html#2821" class="Postulate">Id</a> <a id="3407" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3409" href="StructuredContracts.html#2988" class="Record">Account</a> <a id="3417" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a> <a id="3419" href="StructuredContracts.html#2919" class="Record">AccI</a> <a id="3424" class="Keyword">where</a>

  <a id="_⊢_—⟨_∣ACCNT⟩→_.Open"></a><a id="3433" href="StructuredContracts.html#3433" class="InductiveConstructor">Open</a> <a id="3438" class="Symbol">:</a>

    <a id="3445" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="3447" href="StructuredContracts.html#3254" class="Postulate">itype</a> <a id="3453" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="3459" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3461" href="StructuredContracts.html#2717" class="InductiveConstructor">OArgs</a>
    <a id="3471" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3473" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="3479" class="Symbol">.</a><a id="3480" href="StructuredContracts.html#2961" class="Field">pk</a> <a id="3483" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="3485" href="StructuredContracts.html#3214" class="Postulate">txInfoSignatories</a> <a id="3503" href="StructuredContracts.html#482" class="Generalizable">txInfo</a>
    <a id="3514" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3516" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="3522" class="Symbol">.</a><a id="3523" href="StructuredContracts.html#2945" class="Field">id</a> <a id="3526" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="3529" href="StructuredContracts.html#3302" class="Generalizable">accts</a>
    <a id="3539" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3541" href="StructuredContracts.html#3332" class="Generalizable">newAcct</a> <a id="3549" class="Symbol">.</a><a id="3550" href="StructuredContracts.html#3055" class="Field">pk</a> <a id="3553" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3555" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="3561" class="Symbol">.</a><a id="3562" href="StructuredContracts.html#2961" class="Field">pk</a>
    <a id="3569" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3571" href="StructuredContracts.html#3332" class="Generalizable">newAcct</a> <a id="3579" class="Symbol">.</a><a id="3580" href="StructuredContracts.html#3033" class="Field">value</a> <a id="3586" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3588" href="Prelude.Monoid.html#222" class="Field">ε</a>
      <a id="3596" href="Prelude.InferenceRules.html#11303" class="Function Operator">──────────────────────────────────────────────────────────────────────────</a>
      <a id="3677" href="StructuredContracts.html#482" class="Generalizable">txInfo</a> <a id="3684" href="StructuredContracts.html#3368" class="Datatype Operator">⊢</a> <a id="3686" href="StructuredContracts.html#3302" class="Generalizable">accts</a> <a id="3692" href="StructuredContracts.html#3368" class="Datatype Operator">—⟨</a> <a id="3695" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="3701" href="StructuredContracts.html#3368" class="Datatype Operator">∣ACCNT⟩→</a> <a id="3710" class="Symbol">(</a><a id="3711" href="StructuredContracts.html#3302" class="Generalizable">accts</a> <a id="3717" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3719" href="Prelude.Maps.AsSets.html#944" class="Function">singleton</a> <a id="3729" class="Symbol">(</a><a id="3730" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="3736" class="Symbol">.</a><a id="3737" href="StructuredContracts.html#2945" class="Field">id</a> <a id="3740" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3742" href="StructuredContracts.html#3332" class="Generalizable">newAcct</a><a id="3749" class="Symbol">))</a>

  <a id="_⊢_—⟨_∣ACCNT⟩→_.Close"></a><a id="3755" href="StructuredContracts.html#3755" class="InductiveConstructor">Close</a> <a id="3761" class="Symbol">:</a>

    <a id="3768" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="3770" href="StructuredContracts.html#3254" class="Postulate">itype</a> <a id="3776" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="3782" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3784" href="StructuredContracts.html#2723" class="InductiveConstructor">CArgs</a>
    <a id="3794" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3796" href="StructuredContracts.html#3302" class="Generalizable">accts</a> <a id="3802" href="Prelude.Maps.AsSets.html#2010" class="Function Operator">[</a> <a id="3804" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="3810" class="Symbol">.</a><a id="3811" href="StructuredContracts.html#2945" class="Field">id</a> <a id="3814" href="Prelude.Maps.AsSets.html#2010" class="Function Operator">↦</a> <a id="3816" href="StructuredContracts.html#3340" class="Generalizable">acntToClose</a> <a id="3828" href="Prelude.Maps.AsSets.html#2010" class="Function Operator">]</a>
    <a id="3834" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3836" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="3842" class="Symbol">.</a><a id="3843" href="StructuredContracts.html#2961" class="Field">pk</a> <a id="3846" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="3848" href="StructuredContracts.html#3214" class="Postulate">txInfoSignatories</a> <a id="3866" href="StructuredContracts.html#482" class="Generalizable">txInfo</a>
    <a id="3877" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="3879" href="StructuredContracts.html#3340" class="Generalizable">acntToClose</a> <a id="3891" class="Symbol">.</a><a id="3892" href="StructuredContracts.html#3033" class="Field">value</a> <a id="3898" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3900" href="Prelude.Monoid.html#222" class="Field">ε</a>
      <a id="3908" href="Prelude.InferenceRules.html#12810" class="Function Operator">────────────────────────────────────────────────────</a>
      <a id="3967" href="StructuredContracts.html#482" class="Generalizable">txInfo</a> <a id="3974" href="StructuredContracts.html#3368" class="Datatype Operator">⊢</a> <a id="3976" href="StructuredContracts.html#3302" class="Generalizable">accts</a> <a id="3982" href="StructuredContracts.html#3368" class="Datatype Operator">—⟨</a> <a id="3985" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="3991" href="StructuredContracts.html#3368" class="Datatype Operator">∣ACCNT⟩→</a> <a id="4000" class="Symbol">(</a><a id="4001" href="StructuredContracts.html#3287" class="Generalizable">accIn</a> <a id="4007" class="Symbol">.</a><a id="4008" href="StructuredContracts.html#2945" class="Field">id</a> <a id="4011" href="Prelude.Maps.AsSets.html#3452" class="Function Operator">⋪</a> <a id="4013" href="StructuredContracts.html#3302" class="Generalizable">accts</a><a id="4018" class="Symbol">)</a>

<a id="4021" class="Keyword">postulate</a> <a id="LEDGER-simulates-ACCNT"></a><a id="4031" href="StructuredContracts.html#4031" class="Postulate">LEDGER-simulates-ACCNT</a> <a id="4054" class="Symbol">:</a> <a id="4056" href="StructuredContracts.html#1326" class="Function">IsSimulation</a> <a id="4069" href="StructuredContracts.html#3368" class="Datatype Operator">_⊢_—⟨_∣ACCNT⟩→_</a>
</pre></body></html>