<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>EUTxO</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/structured-contracts/tree/master/EUTxO.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="EUTxO.html" class="Module">EUTxO</a> <a id="14" class="Keyword">where</a>

<a id="21" class="Keyword">open</a> <a id="26" class="Keyword">import</a> <a id="33" href="Prelude.html" class="Module">Prelude</a>
<a id="41" class="Keyword">open</a> <a id="46" class="Keyword">import</a> <a id="53" href="Prelude.Lists.Membership.html" class="Module">Prelude.Lists.Membership</a>

<a id="PolicyID"></a><a id="79" href="EUTxO.html#79" class="Function">PolicyID</a>  <a id="89" class="Symbol">=</a> <a id="91" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="TokenName"></a><a id="93" href="EUTxO.html#93" class="Function">TokenName</a> <a id="103" class="Symbol">=</a> <a id="105" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="Quantity"></a><a id="107" href="EUTxO.html#107" class="Function">Quantity</a>  <a id="117" class="Symbol">=</a> <a id="119" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>

<a id="Tokens"></a><a id="122" href="EUTxO.html#122" class="Function">Tokens</a> <a id="129" class="Symbol">=</a> <a id="131" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="136" href="EUTxO.html#93" class="Function">TokenName</a> <a id="146" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="148" href="EUTxO.html#107" class="Function">Quantity</a> <a id="157" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>
<a id="Value"></a><a id="159" href="EUTxO.html#159" class="Function">Value</a>  <a id="166" class="Symbol">=</a> <a id="168" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="173" href="EUTxO.html#79" class="Function">PolicyID</a>  <a id="183" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="185" href="EUTxO.html#122" class="Function">Tokens</a> <a id="192" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>
<a id="Slot"></a><a id="194" href="EUTxO.html#194" class="Function">Slot</a>  <a id="200" class="Symbol">=</a> <a id="202" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="DATA"></a><a id="204" href="EUTxO.html#204" class="Function">DATA</a>  <a id="210" class="Symbol">=</a> <a id="212" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="Hash"></a><a id="214" href="EUTxO.html#214" class="Function">Hash</a>  <a id="220" class="Symbol">=</a> <a id="222" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>

<a id="Address"></a><a id="225" href="EUTxO.html#225" class="Function">Address</a>   <a id="235" class="Symbol">=</a> <a id="237" href="EUTxO.html#214" class="Function">Hash</a>
<a id="PubKey"></a><a id="242" href="EUTxO.html#242" class="Function">PubKey</a>    <a id="252" class="Symbol">=</a> <a id="254" href="EUTxO.html#214" class="Function">Hash</a>
<a id="Signature"></a><a id="259" href="EUTxO.html#259" class="Function">Signature</a> <a id="269" class="Symbol">=</a> <a id="271" href="EUTxO.html#214" class="Function">Hash</a>

<a id="277" class="Keyword">variable</a>
  <a id="288" href="EUTxO.html#288" class="Generalizable">v</a> <a id="290" href="EUTxO.html#290" class="Generalizable">v′</a> <a id="293" href="EUTxO.html#293" class="Generalizable">v″</a> <a id="296" class="Symbol">:</a> <a id="298" href="EUTxO.html#159" class="Function">Value</a>
  <a id="306" href="EUTxO.html#306" class="Generalizable">slot</a> <a id="311" class="Symbol">:</a> <a id="313" href="EUTxO.html#194" class="Function">Slot</a>
<a id="318" class="Keyword">postulate</a> <a id="328" class="Keyword">instance</a>
  <a id="Ord-Tokens"></a><a id="339" href="EUTxO.html#339" class="Postulate">Ord-Tokens</a>    <a id="353" class="Symbol">:</a> <a id="355" href="Prelude.Ord.Core.html#162" class="Record">Ord</a> <a id="359" href="EUTxO.html#122" class="Function">Tokens</a>
  <a id="DecOrd-Tokens"></a><a id="368" href="EUTxO.html#368" class="Postulate">DecOrd-Tokens</a> <a id="382" class="Symbol">:</a> <a id="384" href="Prelude.Ord.Dec.html#223" class="Record">DecOrd</a> <a id="391" href="EUTxO.html#122" class="Function">Tokens</a>
<a id="398" class="Keyword">instance</a>
  <a id="Semigroup-ℕ"></a><a id="409" href="EUTxO.html#409" class="Function">Semigroup-ℕ</a>  <a id="422" class="Symbol">=</a> <a id="424" href="Prelude.Semigroup.html#4333" class="Function">Semigroup-ℕ-+</a>
  <a id="Monoid-ℕ"></a><a id="440" href="EUTxO.html#440" class="Function">Monoid-ℕ</a>     <a id="453" class="Symbol">=</a> <a id="455" href="Prelude.Monoid.html#3120" class="Function">Monoid-ℕ-+</a>
  <a id="Monoid-Value"></a><a id="468" href="EUTxO.html#468" class="Function">Monoid-Value</a> <a id="481" class="Symbol">:</a> <a id="483" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="490" href="EUTxO.html#122" class="Function">Tokens</a>
  <a id="499" href="EUTxO.html#468" class="Function">Monoid-Value</a> <a id="512" class="Symbol">=</a> <a id="514" class="Symbol">λ</a> <a id="516" class="Keyword">where</a> <a id="522" class="Symbol">.</a><a id="523" href="Prelude.Monoid.html#222" class="Field">ε</a> <a id="525" class="Symbol">→</a> <a id="527" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a>

<a id="530" class="Keyword">private</a> <a id="538" class="Keyword">variable</a> <a id="547" href="EUTxO.html#547" class="Generalizable">A</a> <a id="549" class="Symbol">:</a> <a id="551" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="556" href="Prelude.Init.html#261" class="Generalizable">ℓ</a>
<a id="558" class="Keyword">postulate</a>
  <a id="_♯"></a><a id="570" href="EUTxO.html#570" class="Postulate Operator">_♯</a> <a id="573" class="Symbol">:</a> <a id="575" href="EUTxO.html#547" class="Generalizable">A</a> <a id="577" class="Symbol">→</a> <a id="579" href="EUTxO.html#214" class="Function">Hash</a>
  <a id="♯-injective"></a><a id="586" href="EUTxO.html#586" class="Postulate">♯-injective</a> <a id="598" class="Symbol">:</a> <a id="600" href="Prelude.Init.html#1705" class="Function">Injective≡</a> <a id="611" class="Symbol">{</a><a id="612" class="Argument">A</a> <a id="614" class="Symbol">=</a> <a id="616" href="EUTxO.html#547" class="Generalizable">A</a><a id="617" class="Symbol">}</a> <a id="619" href="EUTxO.html#570" class="Postulate Operator">_♯</a>

<a id="∑"></a><a id="623" href="EUTxO.html#623" class="Function">∑</a> <a id="625" class="Symbol">:</a> <a id="627" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="632" href="EUTxO.html#159" class="Function">Value</a> <a id="638" class="Symbol">→</a> <a id="640" href="EUTxO.html#159" class="Function">Value</a>
<a id="646" href="EUTxO.html#623" class="Function">∑</a> <a id="648" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="651" class="Symbol">=</a> <a id="653" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a>
<a id="655" href="EUTxO.html#623" class="Function">∑</a> <a id="657" class="Symbol">(</a><a id="658" href="EUTxO.html#658" class="Bound">v</a> <a id="660" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="662" href="EUTxO.html#662" class="Bound">vs</a><a id="664" class="Symbol">)</a> <a id="666" class="Symbol">=</a> <a id="668" href="EUTxO.html#658" class="Bound">v</a> <a id="670" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="672" href="EUTxO.html#623" class="Function">∑</a> <a id="674" href="EUTxO.html#662" class="Bound">vs</a>

<a id="678" class="Keyword">record</a> <a id="TxOutput"></a><a id="685" href="EUTxO.html#685" class="Record">TxOutput</a> <a id="694" class="Symbol">:</a> <a id="696" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="701" class="Keyword">where</a>
  <a id="709" class="Keyword">constructor</a> <a id="_at_"></a><a id="721" href="EUTxO.html#721" class="InductiveConstructor Operator">_at_</a>
  <a id="728" class="Keyword">field</a> <a id="TxOutput.value"></a><a id="734" href="EUTxO.html#734" class="Field">value</a>    <a id="743" class="Symbol">:</a> <a id="745" href="EUTxO.html#159" class="Function">Value</a>
        <a id="TxOutput.address"></a><a id="759" href="EUTxO.html#759" class="Field">address</a>  <a id="768" class="Symbol">:</a> <a id="770" href="EUTxO.html#225" class="Function">Address</a>
        <a id="TxOutput.datum"></a><a id="786" href="EUTxO.html#786" class="Field">datum</a>    <a id="795" class="Symbol">:</a> <a id="797" href="EUTxO.html#204" class="Function">DATA</a>
<a id="802" class="Keyword">open</a> <a id="807" href="EUTxO.html#685" class="Module">TxOutput</a> <a id="816" class="Keyword">public</a>
<a id="823" class="Keyword">unquoteDecl</a> <a id="DecEq-TxO"></a><a id="835" href="EUTxO.html#835" class="Function">DecEq-TxO</a> <a id="845" class="Symbol">=</a> <a id="847" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="854" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="860" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="862" class="Keyword">quote</a> <a id="868" href="EUTxO.html#685" class="Record">TxOutput</a> <a id="877" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="879" href="EUTxO.html#835" class="Function">DecEq-TxO</a> <a id="889" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="892" class="Keyword">record</a> <a id="TxOutputRef"></a><a id="899" href="EUTxO.html#899" class="Record">TxOutputRef</a> <a id="911" class="Symbol">:</a> <a id="913" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="918" class="Keyword">where</a>
  <a id="926" class="Keyword">constructor</a> <a id="_indexed-at_"></a><a id="938" href="EUTxO.html#938" class="InductiveConstructor Operator">_indexed-at_</a>
  <a id="953" class="Keyword">field</a> <a id="TxOutputRef.txId"></a><a id="959" href="EUTxO.html#959" class="Field">txId</a>  <a id="965" class="Symbol">:</a> <a id="967" href="EUTxO.html#214" class="Function">Hash</a>
        <a id="TxOutputRef.index"></a><a id="980" href="EUTxO.html#980" class="Field">index</a> <a id="986" class="Symbol">:</a> <a id="988" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="990" class="Keyword">open</a> <a id="995" href="EUTxO.html#899" class="Module">TxOutputRef</a> <a id="1007" class="Keyword">public</a>
<a id="1014" class="Keyword">unquoteDecl</a> <a id="DecEq-TxOR"></a><a id="1026" href="EUTxO.html#1026" class="Function">DecEq-TxOR</a> <a id="1037" class="Symbol">=</a> <a id="1039" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="1046" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="1052" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="1054" class="Keyword">quote</a> <a id="1060" href="EUTxO.html#899" class="Record">TxOutputRef</a> <a id="1072" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1074" href="EUTxO.html#1026" class="Function">DecEq-TxOR</a> <a id="1085" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="1088" class="Keyword">record</a> <a id="InputInfo"></a><a id="1095" href="EUTxO.html#1095" class="Record">InputInfo</a> <a id="1105" class="Symbol">:</a> <a id="1107" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1112" class="Keyword">where</a>
  <a id="1120" class="Keyword">field</a> <a id="InputInfo.output"></a><a id="1126" href="EUTxO.html#1126" class="Field">output</a>        <a id="1140" class="Symbol">:</a> <a id="1142" href="EUTxO.html#685" class="Record">TxOutput</a>
        <a id="InputInfo.outputRef"></a><a id="1159" href="EUTxO.html#1159" class="Field">outputRef</a>     <a id="1173" class="Symbol">:</a> <a id="1175" href="EUTxO.html#899" class="Record">TxOutputRef</a>
        <a id="InputInfo.validatorHash"></a><a id="1195" href="EUTxO.html#1195" class="Field">validatorHash</a> <a id="1209" class="Symbol">:</a> <a id="1211" href="EUTxO.html#214" class="Function">Hash</a>
        <a id="InputInfo.redeemerHash"></a><a id="1224" href="EUTxO.html#1224" class="Field">redeemerHash</a>  <a id="1238" class="Symbol">:</a> <a id="1240" href="EUTxO.html#214" class="Function">Hash</a>
<a id="1245" class="Keyword">unquoteDecl</a> <a id="DecEq-InputInfo"></a><a id="1257" href="EUTxO.html#1257" class="Function">DecEq-InputInfo</a> <a id="1273" class="Symbol">=</a> <a id="1275" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="1282" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="1288" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="1290" class="Keyword">quote</a> <a id="1296" href="EUTxO.html#1095" class="Record">InputInfo</a> <a id="1306" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1308" href="EUTxO.html#1257" class="Function">DecEq-InputInfo</a> <a id="1324" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="1327" class="Keyword">record</a> <a id="TxInfo"></a><a id="1334" href="EUTxO.html#1334" class="Record">TxInfo</a> <a id="1341" class="Symbol">:</a> <a id="1343" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1348" class="Keyword">where</a>
  <a id="1356" class="Keyword">field</a> <a id="TxInfo.inputs"></a><a id="1362" href="EUTxO.html#1362" class="Field">inputs</a>  <a id="1370" class="Symbol">:</a> <a id="1372" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1377" href="EUTxO.html#1095" class="Record">InputInfo</a>
        <a id="TxInfo.outputs"></a><a id="1395" href="EUTxO.html#1395" class="Field">outputs</a> <a id="1403" class="Symbol">:</a> <a id="1405" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1410" href="EUTxO.html#685" class="Record">TxOutput</a>
        <a id="TxInfo.mint"></a><a id="1427" href="EUTxO.html#1427" class="Field">mint</a>   <a id="1434" class="Symbol">:</a> <a id="1436" href="EUTxO.html#159" class="Function">Value</a>
<a id="1442" class="Keyword">unquoteDecl</a> <a id="DecEq-TxInfo"></a><a id="1454" href="EUTxO.html#1454" class="Function">DecEq-TxInfo</a> <a id="1467" class="Symbol">=</a> <a id="1469" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="1476" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="1482" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="1484" class="Keyword">quote</a> <a id="1490" href="EUTxO.html#1334" class="Record">TxInfo</a> <a id="1497" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1499" href="EUTxO.html#1454" class="Function">DecEq-TxInfo</a> <a id="1512" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="Redeemer"></a><a id="1515" href="EUTxO.html#1515" class="Function">Redeemer</a> <a id="1524" class="Symbol">=</a> <a id="1526" href="EUTxO.html#204" class="Function">DATA</a>
<a id="Datum"></a><a id="1531" href="EUTxO.html#1531" class="Function">Datum</a>    <a id="1540" class="Symbol">=</a> <a id="1542" href="EUTxO.html#204" class="Function">DATA</a>
<a id="ScriptValidator"></a><a id="1547" href="EUTxO.html#1547" class="Function">ScriptValidator</a> <a id="1563" class="Symbol">=</a> <a id="1565" href="EUTxO.html#1334" class="Record">TxInfo</a> <a id="1572" class="Comment">{-× Hash-}</a> <a id="1583" class="Symbol">→</a> <a id="1585" href="EUTxO.html#1531" class="Function">Datum</a> <a id="1591" class="Symbol">→</a> <a id="1593" href="EUTxO.html#1515" class="Function">Redeemer</a> <a id="1602" class="Symbol">→</a> <a id="1604" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="MintingPolicy"></a><a id="1609" href="EUTxO.html#1609" class="Function">MintingPolicy</a>   <a id="1625" class="Symbol">=</a> <a id="1627" href="EUTxO.html#1334" class="Record">TxInfo</a> <a id="1634" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1636" href="EUTxO.html#79" class="Function">PolicyID</a> <a id="1645" class="Symbol">→</a> <a id="1647" href="EUTxO.html#1515" class="Function">Redeemer</a> <a id="1656" class="Symbol">→</a> <a id="1658" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="1663" class="Keyword">postulate</a> <a id="1673" class="Keyword">instance</a> <a id="DecEq-MP"></a><a id="1682" href="EUTxO.html#1682" class="Postulate">DecEq-MP</a> <a id="1691" class="Symbol">:</a> <a id="1693" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="1699" href="EUTxO.html#1609" class="Function">MintingPolicy</a>

<a id="1714" class="Keyword">record</a> <a id="TxInput"></a><a id="1721" href="EUTxO.html#1721" class="Record">TxInput</a> <a id="1729" class="Symbol">:</a> <a id="1731" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1736" class="Keyword">where</a>
  <a id="1744" class="Keyword">field</a> <a id="TxInput.outputRef"></a><a id="1750" href="EUTxO.html#1750" class="Field">outputRef</a> <a id="1760" class="Symbol">:</a> <a id="1762" href="EUTxO.html#899" class="Record">TxOutputRef</a>
        <a id="TxInput.validator"></a><a id="1782" href="EUTxO.html#1782" class="Field">validator</a> <a id="1792" class="Symbol">:</a> <a id="1794" href="EUTxO.html#1334" class="Record">TxInfo</a> <a id="1801" class="Symbol">→</a> <a id="1803" href="EUTxO.html#204" class="Function">DATA</a> <a id="1808" class="Symbol">→</a> <a id="1810" href="EUTxO.html#204" class="Function">DATA</a> <a id="1815" class="Symbol">→</a> <a id="1817" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
        <a id="TxInput.redeemer"></a><a id="1830" href="EUTxO.html#1830" class="Field">redeemer</a> <a id="TxInput.datum"></a><a id="1839" href="EUTxO.html#1839" class="Field">datum</a> <a id="1845" class="Symbol">:</a> <a id="1847" href="EUTxO.html#204" class="Function">DATA</a>
<a id="1852" class="Keyword">open</a> <a id="1857" href="EUTxO.html#1721" class="Module">TxInput</a> <a id="1865" class="Keyword">public</a>

<a id="1873" class="Keyword">record</a> <a id="Tx"></a><a id="1880" href="EUTxO.html#1880" class="Record">Tx</a> <a id="1883" class="Symbol">:</a> <a id="1885" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1890" class="Keyword">where</a>
  <a id="1898" class="Keyword">field</a> <a id="Tx.inputs"></a><a id="1904" href="EUTxO.html#1904" class="Field">inputs</a>   <a id="1913" class="Symbol">:</a> <a id="1915" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1920" href="EUTxO.html#1721" class="Record">TxInput</a>
        <a id="Tx.outputs"></a><a id="1936" href="EUTxO.html#1936" class="Field">outputs</a>  <a id="1945" class="Symbol">:</a> <a id="1947" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1952" href="EUTxO.html#685" class="Record">TxOutput</a>
        <a id="Tx.mint"></a><a id="1969" href="EUTxO.html#1969" class="Field">mint</a>     <a id="1978" class="Symbol">:</a> <a id="1980" href="EUTxO.html#159" class="Function">Value</a>
        <a id="Tx.mintRdrs"></a><a id="1994" href="EUTxO.html#1994" class="Field">mintRdrs</a> <a id="2003" class="Symbol">:</a> <a id="2005" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="2010" href="EUTxO.html#1609" class="Function">MintingPolicy</a> <a id="2024" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="2026" href="EUTxO.html#1515" class="Function">Redeemer</a> <a id="2035" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>
        <a id="Tx.interval"></a><a id="2045" href="EUTxO.html#2045" class="Field">interval</a> <a id="2054" class="Symbol">:</a> <a id="2056" href="EUTxO.html#194" class="Function">Slot</a> <a id="2061" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2063" href="EUTxO.html#194" class="Function">Slot</a>
        <a id="Tx.sigs"></a><a id="2076" href="EUTxO.html#2076" class="Field">sigs</a>     <a id="2085" class="Symbol">:</a> <a id="2087" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="2092" href="EUTxO.html#242" class="Function">PubKey</a> <a id="2099" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="2101" href="EUTxO.html#214" class="Function">Hash</a> <a id="2106" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>
<a id="2108" class="Keyword">open</a> <a id="2113" href="EUTxO.html#1880" class="Module">Tx</a> <a id="2116" class="Keyword">public</a>
<a id="2123" class="Keyword">variable</a> <a id="2132" href="EUTxO.html#2132" class="Generalizable">tx</a> <a id="2135" class="Symbol">:</a> <a id="2137" href="EUTxO.html#1880" class="Record">Tx</a>
<a id="2140" class="Keyword">postulate</a> <a id="checkSig"></a><a id="2150" href="EUTxO.html#2150" class="Postulate">checkSig</a> <a id="2159" class="Symbol">:</a> <a id="2161" href="EUTxO.html#1880" class="Record">Tx</a> <a id="2164" class="Symbol">→</a> <a id="2166" href="EUTxO.html#242" class="Function">PubKey</a> <a id="2173" class="Symbol">→</a> <a id="2175" href="EUTxO.html#214" class="Function">Hash</a> <a id="2180" class="Symbol">→</a> <a id="2182" href="Agda.Primitive.html#320" class="Primitive">Type</a>

<a id="2188" class="Comment">-- A ledger is a list of transactions.</a>
<a id="L"></a><a id="2227" href="EUTxO.html#2227" class="Function">L</a> <a id="2229" class="Symbol">=</a> <a id="2231" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="2236" href="EUTxO.html#1880" class="Record">Tx</a>
<a id="2239" class="Keyword">variable</a> <a id="2248" href="EUTxO.html#2248" class="Generalizable">l</a> <a id="2250" class="Symbol">:</a> <a id="2252" href="EUTxO.html#2227" class="Function">L</a>

<a id="2255" class="Keyword">instance</a>
  <a id="Semigroup-L"></a><a id="2266" href="EUTxO.html#2266" class="Function">Semigroup-L</a> <a id="2278" class="Symbol">:</a> <a id="2280" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="2290" href="EUTxO.html#2227" class="Function">L</a>
  <a id="2294" href="EUTxO.html#2266" class="Function">Semigroup-L</a> <a id="2306" class="Symbol">.</a><a id="2307" href="Prelude.Semigroup.html#251" class="Field Operator">_◇_</a> <a id="2311" class="Symbol">=</a> <a id="2313" href="Data.List.Base.html#1819" class="Function Operator">_++_</a>

  <a id="Monoid-L"></a><a id="2321" href="EUTxO.html#2321" class="Function">Monoid-L</a> <a id="2330" class="Symbol">:</a> <a id="2332" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="2339" href="EUTxO.html#2227" class="Function">L</a>
  <a id="2343" href="EUTxO.html#2321" class="Function">Monoid-L</a> <a id="2352" class="Symbol">.</a><a id="2353" href="Prelude.Monoid.html#222" class="Field">ε</a> <a id="2355" class="Symbol">=</a> <a id="2357" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

<a id="2361" class="Comment">-- Auxiliary definitions.</a>

<a id="outputRefs"></a><a id="2388" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="2399" class="Symbol">:</a> <a id="2401" href="EUTxO.html#1880" class="Record">Tx</a> <a id="2404" class="Symbol">→</a> <a id="2406" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="2411" href="EUTxO.html#899" class="Record">TxOutputRef</a>
<a id="2423" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="2434" class="Symbol">=</a> <a id="2436" href="Data.List.Base.html#1553" class="Function">map</a> <a id="2440" href="EUTxO.html#1750" class="Field">outputRef</a> <a id="2450" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2452" href="EUTxO.html#1904" class="Field">inputs</a>

<a id="Resolved"></a><a id="2460" href="EUTxO.html#2460" class="Function">Resolved</a> <a id="2469" class="Symbol">:</a> <a id="2471" href="Prelude.Init.html#13332" class="Function">Pred₀</a> <a id="2477" href="EUTxO.html#1880" class="Record">Tx</a>
<a id="2480" href="EUTxO.html#2460" class="Function">Resolved</a> <a id="2489" href="EUTxO.html#2489" class="Bound">tx</a> <a id="2492" class="Symbol">=</a> <a id="2494" class="Symbol">∀</a> <a id="2496" class="Symbol">{</a><a id="2497" href="EUTxO.html#2497" class="Bound">r</a><a id="2498" class="Symbol">}</a> <a id="2500" class="Symbol">→</a> <a id="2502" href="EUTxO.html#2497" class="Bound">r</a> <a id="2504" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="2506" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="2517" href="EUTxO.html#2489" class="Bound">tx</a> <a id="2520" class="Symbol">→</a> <a id="2522" href="EUTxO.html#685" class="Record">TxOutput</a>

<a id="ResolvedInput"></a><a id="2532" href="EUTxO.html#2532" class="Function">ResolvedInput</a>  <a id="2547" class="Symbol">=</a> <a id="2549" href="EUTxO.html#1721" class="Record">TxInput</a> <a id="2557" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2559" href="EUTxO.html#685" class="Record">TxOutput</a>
<a id="ResolvedInputs"></a><a id="2568" href="EUTxO.html#2568" class="Function">ResolvedInputs</a> <a id="2583" class="Symbol">=</a> <a id="2585" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="2590" href="EUTxO.html#2532" class="Function">ResolvedInput</a>

<a id="resolveInputs"></a><a id="2605" href="EUTxO.html#2605" class="Function">resolveInputs</a> <a id="2619" class="Symbol">:</a> <a id="2621" class="Symbol">∀</a> <a id="2623" href="EUTxO.html#2623" class="Bound">tx</a> <a id="2626" class="Symbol">→</a> <a id="2628" href="EUTxO.html#2460" class="Function">Resolved</a> <a id="2637" href="EUTxO.html#2623" class="Bound">tx</a> <a id="2640" class="Symbol">→</a> <a id="2642" href="EUTxO.html#2568" class="Function">ResolvedInputs</a>
<a id="2657" href="EUTxO.html#2605" class="Function">resolveInputs</a> <a id="2671" href="EUTxO.html#2671" class="Bound">tx</a> <a id="2674" href="EUTxO.html#2674" class="Bound">rtx</a> <a id="2678" class="Symbol">=</a> <a id="2680" href="Data.List.Membership.Setoid.html#1137" class="Function">mapWith∈</a> <a id="2689" class="Symbol">(</a><a id="2690" href="EUTxO.html#2671" class="Bound">tx</a> <a id="2693" class="Symbol">.</a><a id="2694" href="EUTxO.html#1904" class="Field">inputs</a><a id="2700" class="Symbol">)</a> <a id="2702" class="Symbol">λ</a> <a id="2704" class="Symbol">{</a><a id="2705" href="EUTxO.html#2705" class="Bound">i</a><a id="2706" class="Symbol">}</a> <a id="2708" href="EUTxO.html#2708" class="Bound">i∈</a> <a id="2711" class="Symbol">→</a>
  <a id="2715" href="EUTxO.html#2705" class="Bound">i</a> <a id="2717" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2719" href="EUTxO.html#2674" class="Bound">rtx</a> <a id="2723" class="Symbol">(</a><a id="2724" href="Data.List.Membership.Propositional.Properties.html#3377" class="Function">∈-map⁺</a> <a id="2731" href="EUTxO.html#1750" class="Field">outputRef</a> <a id="2741" href="EUTxO.html#2708" class="Bound">i∈</a><a id="2743" class="Symbol">)</a>

<a id="mkInputInfo"></a><a id="2746" href="EUTxO.html#2746" class="Function">mkInputInfo</a> <a id="2758" class="Symbol">:</a> <a id="2760" href="EUTxO.html#2532" class="Function">ResolvedInput</a> <a id="2774" class="Symbol">→</a> <a id="2776" href="EUTxO.html#1095" class="Record">InputInfo</a>
<a id="2786" href="EUTxO.html#2746" class="Function">mkInputInfo</a> <a id="2798" class="Symbol">(</a><a id="2799" href="EUTxO.html#2799" class="Bound">i</a> <a id="2801" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2803" href="EUTxO.html#2803" class="Bound">o</a><a id="2804" class="Symbol">)</a> <a id="2806" class="Symbol">=</a> <a id="2808" class="Keyword">record</a>
  <a id="2817" class="Symbol">{</a> <a id="2819" href="EUTxO.html#1126" class="Field">output</a>        <a id="2833" class="Symbol">=</a> <a id="2835" href="EUTxO.html#2803" class="Bound">o</a>
  <a id="2839" class="Symbol">;</a> <a id="2841" href="EUTxO.html#1159" class="Field">outputRef</a>     <a id="2855" class="Symbol">=</a> <a id="2857" href="EUTxO.html#2799" class="Bound">i</a> <a id="2859" class="Symbol">.</a><a id="2860" href="EUTxO.html#1750" class="Field">outputRef</a>
  <a id="2872" class="Symbol">;</a> <a id="2874" href="EUTxO.html#1195" class="Field">validatorHash</a> <a id="2888" class="Symbol">=</a> <a id="2890" href="EUTxO.html#2799" class="Bound">i</a> <a id="2892" class="Symbol">.</a><a id="2893" href="EUTxO.html#1782" class="Field">validator</a> <a id="2903" href="EUTxO.html#570" class="Postulate Operator">♯</a>
  <a id="2907" class="Symbol">;</a> <a id="2909" href="EUTxO.html#1224" class="Field">redeemerHash</a>  <a id="2923" class="Symbol">=</a> <a id="2925" href="EUTxO.html#2799" class="Bound">i</a> <a id="2927" class="Symbol">.</a><a id="2928" href="EUTxO.html#1830" class="Field">redeemer</a> <a id="2937" href="EUTxO.html#570" class="Postulate Operator">♯</a> <a id="2939" class="Symbol">}</a>

<a id="mkTxInfo"></a><a id="2942" href="EUTxO.html#2942" class="Function">mkTxInfo</a> <a id="2951" class="Symbol">:</a> <a id="2953" class="Symbol">∀</a> <a id="2955" href="EUTxO.html#2955" class="Bound">tx</a> <a id="2958" class="Symbol">→</a> <a id="2960" href="EUTxO.html#2460" class="Function">Resolved</a> <a id="2969" href="EUTxO.html#2955" class="Bound">tx</a> <a id="2972" class="Symbol">→</a> <a id="2974" href="EUTxO.html#1334" class="Record">TxInfo</a>
<a id="2981" href="EUTxO.html#2942" class="Function">mkTxInfo</a> <a id="2990" href="EUTxO.html#2990" class="Bound">tx</a> <a id="2993" href="EUTxO.html#2993" class="Bound">rtx</a> <a id="2997" class="Symbol">=</a> <a id="2999" class="Keyword">record</a>
  <a id="3008" class="Symbol">{</a> <a id="3010" href="EUTxO.html#1362" class="Field">inputs</a>  <a id="3018" class="Symbol">=</a> <a id="3020" href="EUTxO.html#2746" class="Function">mkInputInfo</a> <a id="3032" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="3036" href="EUTxO.html#2605" class="Function">resolveInputs</a> <a id="3050" href="EUTxO.html#2990" class="Bound">tx</a> <a id="3053" href="EUTxO.html#2993" class="Bound">rtx</a>
  <a id="3059" class="Symbol">;</a> <a id="3061" href="EUTxO.html#1395" class="Field">outputs</a> <a id="3069" class="Symbol">=</a> <a id="3071" href="EUTxO.html#2990" class="Bound">tx</a> <a id="3074" class="Symbol">.</a><a id="3075" href="EUTxO.html#1936" class="Field">outputs</a>
  <a id="3085" class="Symbol">;</a> <a id="3087" href="EUTxO.html#1427" class="Field">mint</a>    <a id="3095" class="Symbol">=</a> <a id="3097" href="EUTxO.html#2990" class="Bound">tx</a> <a id="3100" class="Symbol">.</a><a id="3101" href="EUTxO.html#1969" class="Field">mint</a> <a id="3106" class="Symbol">}</a>

<a id="3109" class="Keyword">postulate</a>
  <a id="resolvedOutRefs≡"></a><a id="3121" href="EUTxO.html#3121" class="Postulate">resolvedOutRefs≡</a> <a id="3138" class="Symbol">:</a> <a id="3140" class="Symbol">∀</a> <a id="3142" href="EUTxO.html#3142" class="Bound">tx</a> <a id="3145" class="Symbol">(</a><a id="3146" href="EUTxO.html#3146" class="Bound">rtx</a> <a id="3150" class="Symbol">:</a> <a id="3152" href="EUTxO.html#2460" class="Function">Resolved</a> <a id="3161" href="EUTxO.html#3142" class="Bound">tx</a><a id="3163" class="Symbol">)</a> <a id="3165" class="Symbol">→</a>
      <a id="3173" class="Symbol">(</a><a id="3174" href="EUTxO.html#1159" class="Field">InputInfo.outputRef</a> <a id="3194" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3196" href="EUTxO.html#2746" class="Function">mkInputInfo</a> <a id="3208" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="3212" href="EUTxO.html#2605" class="Function">resolveInputs</a> <a id="3226" href="EUTxO.html#3142" class="Bound">tx</a> <a id="3229" href="EUTxO.html#3146" class="Bound">rtx</a><a id="3232" class="Symbol">)</a>
    <a id="3238" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3240" class="Symbol">(</a><a id="3241" href="EUTxO.html#1750" class="Field">outputRef</a> <a id="3251" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="3255" href="EUTxO.html#3142" class="Bound">tx</a> <a id="3258" class="Symbol">.</a><a id="3259" href="EUTxO.html#1904" class="Field">inputs</a><a id="3265" class="Symbol">)</a>

<a id="3268" class="Comment">--</a>

<a id="3272" class="Comment">-- The state of a ledger maps output references locked by a validator to a value.</a>
<a id="UTxO"></a><a id="3354" href="EUTxO.html#3354" class="Function">UTxO</a> <a id="3359" class="Symbol">=</a> <a id="3361" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3366" href="EUTxO.html#899" class="Record">TxOutputRef</a> <a id="3378" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3380" href="EUTxO.html#685" class="Record">TxOutput</a> <a id="3389" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>
<a id="3391" class="Keyword">variable</a> <a id="3400" href="EUTxO.html#3400" class="Generalizable">utxos</a> <a id="3406" href="EUTxO.html#3406" class="Generalizable">utxos′</a> <a id="3413" class="Symbol">:</a> <a id="3415" href="EUTxO.html#3354" class="Function">UTxO</a>

<a id="mkUtxo"></a><a id="3421" href="EUTxO.html#3421" class="Function">mkUtxo</a> <a id="3428" class="Symbol">:</a> <a id="3430" class="Symbol">∀</a> <a id="3432" class="Symbol">{</a><a id="3433" href="EUTxO.html#3433" class="Bound">out</a><a id="3436" class="Symbol">}</a> <a id="3438" href="EUTxO.html#3438" class="Bound">tx</a> <a id="3441" class="Symbol">→</a> <a id="3443" href="EUTxO.html#3433" class="Bound">out</a> <a id="3447" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="3449" href="EUTxO.html#1936" class="Field">outputs</a> <a id="3457" href="EUTxO.html#3438" class="Bound">tx</a> <a id="3460" class="Symbol">→</a> <a id="3462" href="EUTxO.html#899" class="Record">TxOutputRef</a> <a id="3474" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="3476" href="EUTxO.html#685" class="Record">TxOutput</a>
<a id="3485" href="EUTxO.html#3421" class="Function">mkUtxo</a> <a id="3492" class="Symbol">{</a><a id="3493" href="EUTxO.html#3493" class="Bound">out</a><a id="3496" class="Symbol">}</a> <a id="3498" href="EUTxO.html#3498" class="Bound">tx</a> <a id="3501" href="EUTxO.html#3501" class="Bound">out∈</a> <a id="3506" class="Symbol">=</a> <a id="3508" class="Symbol">(</a><a id="3509" href="EUTxO.html#3498" class="Bound">tx</a> <a id="3512" href="EUTxO.html#570" class="Postulate Operator">♯</a><a id="3513" class="Symbol">)</a> <a id="3515" href="EUTxO.html#938" class="InductiveConstructor Operator">indexed-at</a> <a id="3526" href="Prelude.ToN.html#139" class="Field">toℕ</a> <a id="3530" class="Symbol">(</a><a id="3531" href="Data.List.Relation.Unary.Any.html#1826" class="Function">L.Any.index</a> <a id="3543" href="EUTxO.html#3501" class="Bound">out∈</a><a id="3547" class="Symbol">)</a> <a id="3549" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3551" href="EUTxO.html#3493" class="Bound">out</a>

<a id="utxoTx"></a><a id="3556" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="3563" class="Symbol">:</a> <a id="3565" href="EUTxO.html#1880" class="Record">Tx</a> <a id="3568" class="Symbol">→</a> <a id="3570" href="EUTxO.html#3354" class="Function">UTxO</a>
<a id="3575" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="3582" href="EUTxO.html#3582" class="Bound">tx</a> <a id="3585" class="Symbol">=</a> <a id="3587" href="Prelude.FromList.html#197" class="Field">fromList</a> <a id="3596" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="3598" href="Data.List.Membership.Setoid.html#1137" class="Function">mapWith∈</a> <a id="3607" class="Symbol">(</a><a id="3608" href="EUTxO.html#3582" class="Bound">tx</a> <a id="3611" class="Symbol">.</a><a id="3612" href="EUTxO.html#1936" class="Field">outputs</a><a id="3619" class="Symbol">)</a> <a id="3621" class="Symbol">(</a><a id="3622" href="EUTxO.html#3421" class="Function">mkUtxo</a> <a id="3629" href="EUTxO.html#3582" class="Bound">tx</a><a id="3631" class="Symbol">)</a>

<a id="3634" class="Keyword">postulate</a>
  <a id="∉utxoTx"></a><a id="3646" href="EUTxO.html#3646" class="Postulate">∉utxoTx</a>        <a id="3661" class="Symbol">:</a> <a id="3663" class="Symbol">∀</a> <a id="3665" class="Symbol">{</a><a id="3666" href="EUTxO.html#3666" class="Bound">or</a><a id="3668" class="Symbol">}</a> <a id="3670" class="Symbol">→</a> <a id="3672" href="EUTxO.html#2132" class="Generalizable">tx</a> <a id="3675" href="EUTxO.html#570" class="Postulate Operator">♯</a> <a id="3677" href="Relation.Binary.PropositionalEquality.Core.html#839" class="Function Operator">≢</a> <a id="3679" href="EUTxO.html#3666" class="Bound">or</a> <a id="3682" class="Symbol">.</a><a id="3683" href="EUTxO.html#959" class="Field">txId</a> <a id="3688" class="Symbol">→</a> <a id="3690" href="EUTxO.html#3666" class="Bound">or</a> <a id="3693" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="3696" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="3703" href="EUTxO.html#2132" class="Generalizable">tx</a>
  <a id="utxoTx-values≡"></a><a id="3708" href="EUTxO.html#3708" class="Postulate">utxoTx-values≡</a> <a id="3723" class="Symbol">:</a> <a id="3725" class="Symbol">∀</a> <a id="3727" class="Symbol">{</a><a id="3728" href="EUTxO.html#3728" class="Bound">tx</a><a id="3730" class="Symbol">}</a> <a id="3732" class="Symbol">→</a> <a id="3734" href="Prelude.html#1572" class="Function">values</a> <a id="3741" class="Symbol">(</a><a id="3742" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="3749" href="EUTxO.html#3728" class="Bound">tx</a><a id="3751" class="Symbol">)</a> <a id="3753" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3755" href="EUTxO.html#3728" class="Bound">tx</a> <a id="3758" class="Symbol">.</a><a id="3759" href="EUTxO.html#1936" class="Field">outputs</a>

<a id="∑ᵐ"></a><a id="3768" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3771" class="Symbol">:</a> <a id="3773" href="EUTxO.html#3354" class="Function">UTxO</a> <a id="3778" class="Symbol">→</a> <a id="3780" href="EUTxO.html#159" class="Function">Value</a>
<a id="3786" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3789" class="Symbol">=</a> <a id="3791" href="EUTxO.html#623" class="Function">∑</a> <a id="3793" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3795" href="Data.List.Base.html#1553" class="Function">map</a> <a id="3799" href="EUTxO.html#734" class="Field">value</a> <a id="3805" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3807" href="Prelude.html#1572" class="Function">values</a>

<a id="3815" class="Keyword">postulate</a> <a id="∑ᵐ-∪"></a><a id="3825" href="EUTxO.html#3825" class="Postulate">∑ᵐ-∪</a> <a id="3830" class="Symbol">:</a> <a id="3832" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3835" class="Symbol">(</a><a id="3836" href="EUTxO.html#3400" class="Generalizable">utxos</a> <a id="3842" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3844" href="EUTxO.html#3406" class="Generalizable">utxos′</a><a id="3850" class="Symbol">)</a> <a id="3852" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3854" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3857" href="EUTxO.html#3400" class="Generalizable">utxos</a> <a id="3863" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3865" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3868" href="EUTxO.html#3406" class="Generalizable">utxos′</a>

<a id="∑outs≡"></a><a id="3876" href="EUTxO.html#3876" class="Function">∑outs≡</a> <a id="3883" class="Symbol">:</a> <a id="3885" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3888" class="Symbol">(</a><a id="3889" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="3896" href="EUTxO.html#2132" class="Generalizable">tx</a><a id="3898" class="Symbol">)</a> <a id="3900" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3902" href="EUTxO.html#623" class="Function">∑</a> <a id="3904" class="Symbol">(</a><a id="3905" href="EUTxO.html#734" class="Field">value</a> <a id="3911" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="3915" href="EUTxO.html#2132" class="Generalizable">tx</a> <a id="3918" class="Symbol">.</a><a id="3919" href="EUTxO.html#1936" class="Field">outputs</a><a id="3926" class="Symbol">)</a>
<a id="3928" href="EUTxO.html#3876" class="Function">∑outs≡</a> <a id="3935" class="Symbol">=</a> <a id="3937" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="3942" class="Symbol">(</a><a id="3943" href="EUTxO.html#623" class="Function">∑</a> <a id="3945" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3947" href="Data.List.Base.html#1553" class="Function">map</a> <a id="3951" href="EUTxO.html#734" class="Field">value</a><a id="3956" class="Symbol">)</a> <a id="3958" href="EUTxO.html#3708" class="Postulate">utxoTx-values≡</a>

<a id="applyTx"></a><a id="3974" href="EUTxO.html#3974" class="Function">applyTx</a> <a id="3982" class="Symbol">:</a> <a id="3984" href="EUTxO.html#1880" class="Record">Tx</a> <a id="3987" class="Symbol">→</a> <a id="3989" class="Symbol">(</a><a id="3990" href="EUTxO.html#3354" class="Function">UTxO</a> <a id="3995" class="Symbol">→</a> <a id="3997" href="EUTxO.html#3354" class="Function">UTxO</a><a id="4001" class="Symbol">)</a>
<a id="4003" href="EUTxO.html#3974" class="Function">applyTx</a> <a id="4011" href="EUTxO.html#4011" class="Bound">tx</a> <a id="4014" href="EUTxO.html#4014" class="Bound">utxo</a> <a id="4019" class="Symbol">=</a> <a id="4021" class="Symbol">(</a><a id="4022" href="EUTxO.html#4014" class="Bound">utxo</a> <a id="4027" href="Prelude.html#1432" class="Function Operator">─ᵏˢ</a> <a id="4031" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="4042" href="EUTxO.html#4011" class="Bound">tx</a><a id="4044" class="Symbol">)</a> <a id="4046" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="4048" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="4055" href="EUTxO.html#4011" class="Bound">tx</a>

<a id="utxo"></a><a id="4059" href="EUTxO.html#4059" class="Function">utxo</a> <a id="4064" class="Symbol">:</a> <a id="4066" href="EUTxO.html#2227" class="Function">L</a> <a id="4068" class="Symbol">→</a> <a id="4070" href="EUTxO.html#3354" class="Function">UTxO</a>
<a id="4075" href="EUTxO.html#4059" class="Function">utxo</a> <a id="4080" class="Symbol">=</a> <a id="4082" class="Symbol">λ</a> <a id="4084" class="Keyword">where</a>
  <a id="4092" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="4095" class="Symbol">→</a> <a id="4097" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a>
  <a id="4101" class="Symbol">(</a><a id="4102" href="EUTxO.html#4102" class="Bound">tx</a> <a id="4105" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="4107" href="EUTxO.html#4107" class="Bound">l</a><a id="4108" class="Symbol">)</a> <a id="4110" class="Symbol">→</a> <a id="4112" href="EUTxO.html#3974" class="Function">applyTx</a> <a id="4120" href="EUTxO.html#4102" class="Bound">tx</a> <a id="4123" class="Symbol">(</a><a id="4124" href="EUTxO.html#4059" class="Function">utxo</a> <a id="4129" href="EUTxO.html#4107" class="Bound">l</a><a id="4130" class="Symbol">)</a>

<a id="4133" class="Keyword">record</a> <a id="IsValidTx"></a><a id="4140" href="EUTxO.html#4140" class="Record">IsValidTx</a> <a id="4150" class="Symbol">(</a><a id="4151" href="EUTxO.html#4151" class="Bound">slot</a> <a id="4156" class="Symbol">:</a> <a id="4158" href="EUTxO.html#194" class="Function">Slot</a><a id="4162" class="Symbol">)</a> <a id="4164" class="Symbol">(</a><a id="4165" href="EUTxO.html#4165" class="Bound">tx</a> <a id="4168" class="Symbol">:</a> <a id="4170" href="EUTxO.html#1880" class="Record">Tx</a><a id="4172" class="Symbol">)</a> <a id="4174" class="Symbol">(</a><a id="4175" href="EUTxO.html#4175" class="Bound">utxos</a> <a id="4181" class="Symbol">:</a> <a id="4183" href="EUTxO.html#3354" class="Function">UTxO</a><a id="4187" class="Symbol">)</a> <a id="4189" class="Symbol">:</a> <a id="4191" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="4196" class="Keyword">where</a>
  <a id="4204" class="Keyword">field</a>
    <a id="IsValidTx.noDoubleSpending"></a><a id="4214" href="EUTxO.html#4214" class="Field">noDoubleSpending</a> <a id="4231" class="Symbol">:</a>
      <a id="4239" href="Prelude.Irrelevance.List.Unique.html#1002" class="Function">·Unique</a> <a id="4247" class="Symbol">(</a><a id="4248" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="4259" href="EUTxO.html#4165" class="Bound">tx</a><a id="4261" class="Symbol">)</a>

    <a id="IsValidTx.validInterval"></a><a id="4268" href="EUTxO.html#4268" class="Field">validInterval</a> <a id="4282" class="Symbol">:</a> <a id="4284" class="Keyword">let</a> <a id="4288" class="Symbol">(</a><a id="4289" href="EUTxO.html#4289" class="Bound">from</a> <a id="4294" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4296" href="EUTxO.html#4296" class="Bound">to</a><a id="4298" class="Symbol">)</a> <a id="4300" class="Symbol">=</a> <a id="4302" href="EUTxO.html#4165" class="Bound">tx</a> <a id="4305" class="Symbol">.</a><a id="4306" href="EUTxO.html#2045" class="Field">interval</a> <a id="4315" class="Keyword">in</a>
      <a id="4324" class="Symbol">(</a><a id="4325" href="EUTxO.html#4289" class="Bound">from</a> <a id="4330" href="Prelude.Ord.Core.html#209" class="Field Operator">≤</a> <a id="4332" href="EUTxO.html#4151" class="Bound">slot</a><a id="4336" class="Symbol">)</a> <a id="4338" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="4340" class="Symbol">(</a><a id="4341" href="EUTxO.html#4151" class="Bound">slot</a> <a id="4346" href="Prelude.Ord.Core.html#209" class="Field Operator">≤</a> <a id="4348" href="EUTxO.html#4296" class="Bound">to</a><a id="4350" class="Symbol">)</a>

    <a id="IsValidTx.validOutputRefs"></a><a id="4357" href="EUTxO.html#4357" class="Field">validOutputRefs</a> <a id="4373" class="Symbol">:</a>
      <a id="4381" href="Prelude.html#1011" class="Function">∀[</a> <a id="4384" href="EUTxO.html#4384" class="Bound">ref</a> <a id="4388" href="Prelude.html#1011" class="Function">∈</a> <a id="4390" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="4401" href="EUTxO.html#4165" class="Bound">tx</a> <a id="4404" href="Prelude.html#1011" class="Function">]</a>
        <a id="4414" class="Symbol">(</a><a id="4415" href="EUTxO.html#4384" class="Bound">ref</a> <a id="4419" href="Prelude.Maps.AsSets.html#1627" class="Function Operator">∈ᵈ</a> <a id="4422" href="EUTxO.html#4175" class="Bound">utxos</a><a id="4427" class="Symbol">)</a>

  <a id="IsValidTx.rtx"></a><a id="4432" href="EUTxO.html#4432" class="Function">rtx</a> <a id="4436" class="Symbol">:</a> <a id="4438" href="EUTxO.html#2460" class="Function">Resolved</a> <a id="4447" href="EUTxO.html#4165" class="Bound">tx</a>
  <a id="4452" href="EUTxO.html#4432" class="Function">rtx</a> <a id="4456" class="Symbol">=</a> <a id="4458" class="Symbol">(</a><a id="4459" href="EUTxO.html#4175" class="Bound">utxos</a> <a id="4465" href="Prelude.html#1344" class="Function Operator">‼_</a><a id="4467" class="Symbol">)</a> <a id="4469" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="4471" href="Data.List.Relation.Unary.All.html#5775" class="Function">L.All.lookup</a> <a id="4484" href="EUTxO.html#4357" class="Field">validOutputRefs</a>

  <a id="IsValidTx.txInfo"></a><a id="4503" href="EUTxO.html#4503" class="Function">txInfo</a>         <a id="4518" class="Symbol">=</a> <a id="4520" href="EUTxO.html#2942" class="Function">mkTxInfo</a>      <a id="4534" href="EUTxO.html#4165" class="Bound">tx</a> <a id="4537" href="EUTxO.html#4432" class="Function">rtx</a>
  <a id="IsValidTx.resolvedInputs"></a><a id="4543" href="EUTxO.html#4543" class="Function">resolvedInputs</a> <a id="4558" class="Symbol">=</a> <a id="4560" href="EUTxO.html#2605" class="Function">resolveInputs</a> <a id="4574" href="EUTxO.html#4165" class="Bound">tx</a> <a id="4577" href="EUTxO.html#4432" class="Function">rtx</a>

  <a id="4584" class="Keyword">field</a>
    <a id="IsValidTx.preservesValues"></a><a id="4594" href="EUTxO.html#4594" class="Field">preservesValues</a> <a id="4610" class="Symbol">:</a>
      <a id="4618" href="EUTxO.html#4165" class="Bound">tx</a> <a id="4621" class="Symbol">.</a><a id="4622" href="EUTxO.html#1969" class="Field">mint</a> <a id="4627" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="4629" href="EUTxO.html#623" class="Function">∑</a> <a id="4631" class="Symbol">(</a><a id="4632" href="EUTxO.html#734" class="Field">value</a> <a id="4638" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="4640" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="4646" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="4650" href="EUTxO.html#4543" class="Function">resolvedInputs</a><a id="4664" class="Symbol">)</a> <a id="4666" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4668" href="EUTxO.html#623" class="Function">∑</a> <a id="4670" class="Symbol">(</a><a id="4671" href="EUTxO.html#734" class="Field">value</a> <a id="4677" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="4681" href="EUTxO.html#4165" class="Bound">tx</a> <a id="4684" class="Symbol">.</a><a id="4685" href="EUTxO.html#1936" class="Field">outputs</a><a id="4692" class="Symbol">)</a>

  <a id="4697" class="Comment">-- ** script validation</a>
    <a id="IsValidTx.allInputsValidate"></a><a id="4725" href="EUTxO.html#4725" class="Field">allInputsValidate</a> <a id="4743" class="Symbol">:</a>
      <a id="4751" href="Prelude.html#1011" class="Function">∀[</a> <a id="4754" href="EUTxO.html#4754" class="Bound">i</a> <a id="4756" href="Prelude.html#1011" class="Function">∈</a> <a id="4758" href="EUTxO.html#4165" class="Bound">tx</a> <a id="4761" class="Symbol">.</a><a id="4762" href="EUTxO.html#1904" class="Field">inputs</a> <a id="4769" href="Prelude.html#1011" class="Function">]</a>
        <a id="4779" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="4781" class="Symbol">(</a><a id="4782" href="EUTxO.html#4754" class="Bound">i</a> <a id="4784" class="Symbol">.</a><a id="4785" href="EUTxO.html#1782" class="Field">validator</a> <a id="4795" href="EUTxO.html#4503" class="Function">txInfo</a> <a id="4802" class="Symbol">(</a><a id="4803" href="EUTxO.html#4754" class="Bound">i</a> <a id="4805" class="Symbol">.</a><a id="4806" href="EUTxO.html#1839" class="Field">datum</a><a id="4811" class="Symbol">)</a> <a id="4813" class="Symbol">(</a><a id="4814" href="EUTxO.html#4754" class="Bound">i</a> <a id="4816" class="Symbol">.</a><a id="4817" href="EUTxO.html#1830" class="Field">redeemer</a><a id="4825" class="Symbol">))</a>

    <a id="IsValidTx.validateValidHashes"></a><a id="4833" href="EUTxO.html#4833" class="Field">validateValidHashes</a> <a id="4853" class="Symbol">:</a>
      <a id="4861" href="Prelude.html#1011" class="Function">∀[</a> <a id="4864" href="EUTxO.html#4864" class="Bound">(</a><a id="4865" href="EUTxO.html#4865" class="Bound">i</a> <a id="4867" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4869" href="EUTxO.html#4869" class="Bound">o</a><a id="4870" href="EUTxO.html#4864" class="Bound">)</a> <a id="4872" href="Prelude.html#1011" class="Function">∈</a> <a id="4874" href="EUTxO.html#4543" class="Function">resolvedInputs</a> <a id="4889" href="Prelude.html#1011" class="Function">]</a>
        <a id="4899" class="Symbol">(</a><a id="4900" href="EUTxO.html#4869" class="Bound">o</a> <a id="4902" class="Symbol">.</a><a id="4903" href="EUTxO.html#759" class="Field">address</a> <a id="4911" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4913" href="EUTxO.html#4865" class="Bound">i</a> <a id="4915" class="Symbol">.</a><a id="4916" href="EUTxO.html#1782" class="Field">validator</a> <a id="4926" href="EUTxO.html#570" class="Postulate Operator">♯</a><a id="4927" class="Symbol">)</a>

  <a id="4932" class="Comment">-- ** minting policies</a>
    <a id="IsValidTx.validMintRedeemers"></a><a id="4959" href="EUTxO.html#4959" class="Field">validMintRedeemers</a> <a id="4978" class="Symbol">:</a>
      <a id="4986" href="Prelude.html#1512" class="Function">keys</a> <a id="4991" class="Symbol">(</a><a id="4992" href="EUTxO.html#4165" class="Bound">tx</a> <a id="4995" class="Symbol">.</a><a id="4996" href="EUTxO.html#1969" class="Field">mint</a><a id="5000" class="Symbol">)</a> <a id="5002" href="Data.List.Relation.Binary.Subset.Setoid.html#748" class="Function Operator">⊆</a> <a id="5004" class="Symbol">(</a><a id="5005" href="EUTxO.html#570" class="Postulate Operator">_♯</a> <a id="5008" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="5012" href="Prelude.html#1512" class="Function">keys</a> <a id="5017" class="Symbol">(</a><a id="5018" href="EUTxO.html#4165" class="Bound">tx</a> <a id="5021" class="Symbol">.</a><a id="5022" href="EUTxO.html#1994" class="Field">mintRdrs</a><a id="5030" class="Symbol">))</a>

    <a id="IsValidTx.allPoliciesValidate"></a><a id="5038" href="EUTxO.html#5038" class="Field">allPoliciesValidate</a> <a id="5058" class="Symbol">:</a>
      <a id="5066" href="Prelude.html#1011" class="Function">∀[</a> <a id="5069" href="EUTxO.html#5069" class="Bound">(</a><a id="5070" href="EUTxO.html#5070" class="Bound">p</a> <a id="5072" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5074" href="EUTxO.html#5074" class="Bound">r</a><a id="5075" href="EUTxO.html#5069" class="Bound">)</a> <a id="5077" href="Prelude.html#1011" class="Function">∈</a> <a id="5079" href="Prelude.ToList.html#193" class="Field">toList</a> <a id="5086" class="Symbol">(</a><a id="5087" href="EUTxO.html#4165" class="Bound">tx</a> <a id="5090" class="Symbol">.</a><a id="5091" href="EUTxO.html#1994" class="Field">mintRdrs</a><a id="5099" class="Symbol">)</a> <a id="5101" href="Prelude.html#1011" class="Function">]</a>
        <a id="5111" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="5113" class="Symbol">(</a><a id="5114" href="EUTxO.html#5070" class="Bound">p</a> <a id="5116" class="Symbol">(</a><a id="5117" href="EUTxO.html#4503" class="Function">txInfo</a> <a id="5124" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5126" href="EUTxO.html#5070" class="Bound">p</a> <a id="5128" href="EUTxO.html#570" class="Postulate Operator">♯</a><a id="5129" class="Symbol">)</a> <a id="5131" href="EUTxO.html#5074" class="Bound">r</a><a id="5132" class="Symbol">)</a>

  <a id="5137" class="Comment">-- ** signatures</a>
    <a id="IsValidTx.validSignatures"></a><a id="5158" href="EUTxO.html#5158" class="Field">validSignatures</a> <a id="5174" class="Symbol">:</a>
      <a id="5182" href="Prelude.html#1011" class="Function">∀[</a> <a id="5185" href="EUTxO.html#5185" class="Bound">(</a><a id="5186" href="EUTxO.html#5186" class="Bound">pk</a> <a id="5189" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5191" href="EUTxO.html#5191" class="Bound">s</a><a id="5192" href="EUTxO.html#5185" class="Bound">)</a> <a id="5194" href="Prelude.html#1011" class="Function">∈</a> <a id="5196" href="Prelude.ToList.html#193" class="Field">toList</a> <a id="5203" class="Symbol">(</a><a id="5204" href="EUTxO.html#4165" class="Bound">tx</a> <a id="5207" class="Symbol">.</a><a id="5208" href="EUTxO.html#2076" class="Field">sigs</a><a id="5212" class="Symbol">)</a> <a id="5214" href="Prelude.html#1011" class="Function">]</a>
        <a id="5224" href="EUTxO.html#2150" class="Postulate">checkSig</a> <a id="5233" href="EUTxO.html#4165" class="Bound">tx</a> <a id="5236" href="EUTxO.html#5186" class="Bound">pk</a> <a id="5239" href="EUTxO.html#5191" class="Bound">s</a>

  <a id="5244" class="Comment">-- derived properties</a>
  <a id="5268" class="Keyword">open</a> <a id="5273" href="Relation.Binary.PropositionalEquality.Core.html#2717" class="Module">≡-Reasoning</a>

  <a id="IsValidTx.outRefs≡"></a><a id="5288" href="EUTxO.html#5288" class="Function">outRefs≡</a> <a id="5297" class="Symbol">:</a> <a id="5299" class="Symbol">(</a><a id="5300" href="EUTxO.html#1159" class="Field">InputInfo.outputRef</a> <a id="5320" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="5324" href="EUTxO.html#4503" class="Function">txInfo</a> <a id="5331" class="Symbol">.</a><a id="5332" href="EUTxO.html#1362" class="Field">TxInfo.inputs</a><a id="5345" class="Symbol">)</a>
           <a id="5358" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5360" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="5371" href="EUTxO.html#4165" class="Bound">tx</a>
  <a id="5376" href="EUTxO.html#5288" class="Function">outRefs≡</a> <a id="5385" class="Symbol">=</a>
    <a id="5391" href="Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
      <a id="5403" href="EUTxO.html#1159" class="Field">InputInfo.outputRef</a> <a id="5423" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="5427" href="EUTxO.html#4503" class="Function">txInfo</a> <a id="5434" class="Symbol">.</a><a id="5435" href="EUTxO.html#1362" class="Field">TxInfo.inputs</a>
    <a id="5453" href="Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
      <a id="5463" href="EUTxO.html#1159" class="Field">InputInfo.outputRef</a> <a id="5483" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="5487" class="Symbol">(</a><a id="5488" href="EUTxO.html#2746" class="Function">mkInputInfo</a> <a id="5500" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="5504" href="EUTxO.html#4543" class="Function">resolvedInputs</a><a id="5518" class="Symbol">)</a>
    <a id="5524" href="Relation.Binary.PropositionalEquality.Core.html#3019" class="Function">≡˘⟨</a> <a id="5528" href="Data.List.Properties.html#3777" class="Function">L.map-compose</a> <a id="5542" href="EUTxO.html#4543" class="Function">resolvedInputs</a> <a id="5557" href="Relation.Binary.PropositionalEquality.Core.html#3019" class="Function">⟩</a>
      <a id="5565" href="EUTxO.html#1159" class="Field">InputInfo.outputRef</a> <a id="5585" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="5587" href="EUTxO.html#2746" class="Function">mkInputInfo</a> <a id="5599" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="5603" href="EUTxO.html#4543" class="Function">resolvedInputs</a>
    <a id="5622" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="5625" href="EUTxO.html#3121" class="Postulate">resolvedOutRefs≡</a> <a id="5642" href="EUTxO.html#4165" class="Bound">tx</a> <a id="5645" href="EUTxO.html#4432" class="Function">rtx</a> <a id="5649" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="5657" href="EUTxO.html#1750" class="Field">outputRef</a> <a id="5667" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="5671" href="EUTxO.html#4165" class="Bound">tx</a> <a id="5674" class="Symbol">.</a><a id="5675" href="EUTxO.html#1904" class="Field">inputs</a>
    <a id="5686" href="Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
      <a id="5696" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="5707" href="EUTxO.html#4165" class="Bound">tx</a>
    <a id="5714" href="Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>

  <a id="IsValidTx.∑utxoTx≡"></a><a id="5719" href="EUTxO.html#5719" class="Function">∑utxoTx≡</a> <a id="5728" class="Symbol">:</a> <a id="5730" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="5733" class="Symbol">(</a><a id="5734" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="5741" href="EUTxO.html#4165" class="Bound">tx</a><a id="5743" class="Symbol">)</a>
           <a id="5756" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5758" href="EUTxO.html#4165" class="Bound">tx</a> <a id="5761" class="Symbol">.</a><a id="5762" href="EUTxO.html#1969" class="Field">mint</a> <a id="5767" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="5769" href="EUTxO.html#623" class="Function">∑</a> <a id="5771" class="Symbol">(</a><a id="5772" href="EUTxO.html#734" class="Field">value</a> <a id="5778" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="5780" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="5786" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="5790" href="EUTxO.html#4543" class="Function">resolvedInputs</a><a id="5804" class="Symbol">)</a>
  <a id="5808" href="EUTxO.html#5719" class="Function">∑utxoTx≡</a> <a id="5817" class="Symbol">=</a> <a id="5819" href="Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
    <a id="5829" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="5832" class="Symbol">(</a><a id="5833" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="5840" href="EUTxO.html#4165" class="Bound">tx</a><a id="5842" class="Symbol">)</a>                                  <a id="5877" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="5880" href="EUTxO.html#3876" class="Function">∑outs≡</a> <a id="5887" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
    <a id="5893" href="EUTxO.html#623" class="Function">∑</a> <a id="5895" class="Symbol">(</a><a id="5896" href="EUTxO.html#734" class="Field">value</a> <a id="5902" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="5906" href="EUTxO.html#4165" class="Bound">tx</a> <a id="5909" class="Symbol">.</a><a id="5910" href="EUTxO.html#1936" class="Field">outputs</a><a id="5917" class="Symbol">)</a>                       <a id="5941" href="Relation.Binary.PropositionalEquality.Core.html#3019" class="Function">≡˘⟨</a> <a id="5945" href="EUTxO.html#4594" class="Field">preservesValues</a> <a id="5961" href="Relation.Binary.PropositionalEquality.Core.html#3019" class="Function">⟩</a>
    <a id="5967" href="EUTxO.html#4165" class="Bound">tx</a> <a id="5970" class="Symbol">.</a><a id="5971" href="EUTxO.html#1969" class="Field">mint</a> <a id="5976" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="5978" href="EUTxO.html#623" class="Function">∑</a> <a id="5980" class="Symbol">(</a><a id="5981" href="EUTxO.html#734" class="Field">value</a> <a id="5987" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="5989" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="5995" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="5999" href="EUTxO.html#4543" class="Function">resolvedInputs</a><a id="6013" class="Symbol">)</a> <a id="6015" href="Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>

  <a id="6020" class="Keyword">postulate</a>
    <a id="IsValidTx.∑utxos─∪≡"></a><a id="6034" href="EUTxO.html#6034" class="Postulate">∑utxos─∪≡</a> <a id="6044" class="Symbol">:</a> <a id="6046" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="6049" class="Symbol">(</a><a id="6050" href="EUTxO.html#4175" class="Bound">utxos</a> <a id="6056" href="Prelude.html#1432" class="Function Operator">─ᵏˢ</a> <a id="6060" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="6071" href="EUTxO.html#4165" class="Bound">tx</a><a id="6073" class="Symbol">)</a>
              <a id="6089" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="6091" href="EUTxO.html#623" class="Function">∑</a> <a id="6093" class="Symbol">(</a><a id="6094" href="EUTxO.html#734" class="Field">value</a> <a id="6100" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="6102" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="6108" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="6112" href="EUTxO.html#4543" class="Function">resolvedInputs</a><a id="6126" class="Symbol">)</a>
              <a id="6142" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="6144" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="6147" href="EUTxO.html#4175" class="Bound">utxos</a>

<a id="6154" class="Keyword">open</a> <a id="6159" href="EUTxO.html#4140" class="Module">IsValidTx</a> <a id="6169" class="Keyword">public</a>

<a id="6177" class="Keyword">postulate</a> <a id="isValidTx?"></a><a id="6187" href="EUTxO.html#6187" class="Postulate">isValidTx?</a> <a id="6198" class="Symbol">:</a> <a id="6200" class="Symbol">∀</a> <a id="6202" href="EUTxO.html#6202" class="Bound">slot</a> <a id="6207" href="EUTxO.html#6207" class="Bound">tx</a> <a id="6210" href="EUTxO.html#6210" class="Bound">s</a> <a id="6212" class="Symbol">→</a> <a id="6214" href="Relation.Nullary.html#1520" class="Record">Dec</a> <a id="6218" class="Symbol">(</a><a id="6219" href="EUTxO.html#4140" class="Record">IsValidTx</a> <a id="6229" href="EUTxO.html#6202" class="Bound">slot</a> <a id="6234" href="EUTxO.html#6207" class="Bound">tx</a> <a id="6237" href="EUTxO.html#6210" class="Bound">s</a><a id="6238" class="Symbol">)</a>

<a id="isValidTx"></a><a id="6241" href="EUTxO.html#6241" class="Function">isValidTx</a> <a id="6251" class="Symbol">:</a> <a id="6253" href="EUTxO.html#194" class="Function">Slot</a> <a id="6258" class="Symbol">→</a> <a id="6260" href="EUTxO.html#1880" class="Record">Tx</a> <a id="6263" class="Symbol">→</a> <a id="6265" href="EUTxO.html#3354" class="Function">UTxO</a> <a id="6270" class="Symbol">→</a> <a id="6272" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="6277" href="EUTxO.html#6241" class="Function">isValidTx</a> <a id="6287" href="EUTxO.html#6287" class="Bound">slot</a> <a id="6292" href="EUTxO.html#6292" class="Bound">tx</a> <a id="6295" href="EUTxO.html#6295" class="Bound">s</a> <a id="6297" class="Symbol">=</a> <a id="6299" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌊</a> <a id="6301" href="EUTxO.html#6187" class="Postulate">isValidTx?</a> <a id="6312" href="EUTxO.html#6287" class="Bound">slot</a> <a id="6317" href="EUTxO.html#6292" class="Bound">tx</a> <a id="6320" href="EUTxO.html#6295" class="Bound">s</a> <a id="6322" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌋</a>

<a id="checkTx"></a><a id="6325" href="EUTxO.html#6325" class="Function">checkTx</a> <a id="6333" class="Symbol">:</a> <a id="6335" href="EUTxO.html#194" class="Function">Slot</a> <a id="6340" class="Symbol">→</a> <a id="6342" href="EUTxO.html#3354" class="Function">UTxO</a> <a id="6347" class="Symbol">→</a> <a id="6349" href="EUTxO.html#1880" class="Record">Tx</a> <a id="6352" class="Symbol">→</a> <a id="6354" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="6359" href="EUTxO.html#6325" class="Function">checkTx</a> <a id="6367" href="EUTxO.html#6367" class="Bound">slot</a> <a id="6372" href="EUTxO.html#6372" class="Bound">s</a> <a id="6374" href="EUTxO.html#6374" class="Bound">tx</a> <a id="6377" class="Symbol">=</a> <a id="6379" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌊</a> <a id="6381" href="EUTxO.html#6187" class="Postulate">isValidTx?</a> <a id="6392" href="EUTxO.html#6367" class="Bound">slot</a> <a id="6397" href="EUTxO.html#6374" class="Bound">tx</a> <a id="6400" href="EUTxO.html#6372" class="Bound">s</a> <a id="6402" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌋</a>

<a id="6405" class="Comment">-- ** LEDGER small-step relation</a>
<a id="6438" class="Keyword">data</a> <a id="_⊢_—⟨_∣LEDGER⟩→_"></a><a id="6443" href="EUTxO.html#6443" class="Datatype Operator">_⊢_—⟨_∣LEDGER⟩→_</a> <a id="6460" class="Symbol">:</a> <a id="6462" href="Prelude.html#2479" class="Function">SSRel</a> <a id="6468" href="EUTxO.html#194" class="Function">Slot</a> <a id="6473" href="EUTxO.html#3354" class="Function">UTxO</a> <a id="6478" href="EUTxO.html#1880" class="Record">Tx</a> <a id="6481" class="Keyword">where</a>

  <a id="_⊢_—⟨_∣LEDGER⟩→_.ApplyTx"></a><a id="6490" href="EUTxO.html#6490" class="InductiveConstructor">ApplyTx</a> <a id="6498" class="Symbol">:</a> <a id="6500" class="Keyword">let</a> <a id="6504" href="EUTxO.html#6504" class="Bound">utxos′</a> <a id="6511" class="Symbol">=</a> <a id="6513" href="EUTxO.html#3974" class="Function">applyTx</a> <a id="6521" href="EUTxO.html#2132" class="Generalizable">tx</a> <a id="6524" href="EUTxO.html#3400" class="Generalizable">utxos</a> <a id="6530" class="Keyword">in</a>
    <a id="6537" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="6539" class="Symbol">(</a><a id="6540" href="EUTxO.html#6325" class="Function">checkTx</a> <a id="6548" href="EUTxO.html#306" class="Generalizable">slot</a> <a id="6553" href="EUTxO.html#3400" class="Generalizable">utxos</a> <a id="6559" href="EUTxO.html#2132" class="Generalizable">tx</a><a id="6561" class="Symbol">)</a>
    <a id="6567" href="Prelude.InferenceRules.html#13643" class="Function Operator">───────────────────────────────────</a>
    <a id="6607" href="EUTxO.html#306" class="Generalizable">slot</a> <a id="6612" href="EUTxO.html#6443" class="Datatype Operator">⊢</a> <a id="6614" href="EUTxO.html#3400" class="Generalizable">utxos</a> <a id="6620" href="EUTxO.html#6443" class="Datatype Operator">—⟨</a> <a id="6623" href="EUTxO.html#2132" class="Generalizable">tx</a> <a id="6626" href="EUTxO.html#6443" class="Datatype Operator">∣LEDGER⟩→</a> <a id="6636" href="EUTxO.html#6504" class="Bound">utxos′</a>
</pre></body></html>