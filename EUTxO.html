<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>EUTxO</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/structured-contracts/tree/master/EUTxO.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="EUTxO.html" class="Module">EUTxO</a> <a id="14" class="Keyword">where</a>

<a id="21" class="Keyword">open</a> <a id="26" class="Keyword">import</a> <a id="33" href="Prelude.html" class="Module">Prelude</a>
<a id="41" class="Keyword">open</a> <a id="46" class="Keyword">import</a> <a id="53" href="Prelude.Ord.html" class="Module">Prelude.Ord</a>
<a id="65" class="Keyword">open</a> <a id="70" class="Keyword">import</a> <a id="77" href="Prelude.ToList.html" class="Module">Prelude.ToList</a>

<a id="PolicyID"></a><a id="93" href="EUTxO.html#93" class="Function">PolicyID</a>  <a id="103" class="Symbol">=</a> <a id="105" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="TokenName"></a><a id="107" href="EUTxO.html#107" class="Function">TokenName</a> <a id="117" class="Symbol">=</a> <a id="119" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="Quantity"></a><a id="121" href="EUTxO.html#121" class="Function">Quantity</a>  <a id="131" class="Symbol">=</a> <a id="133" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>

<a id="Value"></a><a id="136" href="EUTxO.html#136" class="Function">Value</a> <a id="142" class="Symbol">=</a> <a id="144" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="149" href="EUTxO.html#93" class="Function">PolicyID</a> <a id="158" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="160" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="165" href="EUTxO.html#107" class="Function">TokenName</a> <a id="175" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="177" href="EUTxO.html#121" class="Function">Quantity</a> <a id="186" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a> <a id="188" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>
<a id="Slot"></a><a id="190" href="EUTxO.html#190" class="Function">Slot</a>  <a id="196" class="Symbol">=</a> <a id="198" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="DATA"></a><a id="200" href="EUTxO.html#200" class="Function">DATA</a>  <a id="206" class="Symbol">=</a> <a id="208" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="Hash"></a><a id="210" href="EUTxO.html#210" class="Function">Hash</a>  <a id="216" class="Symbol">=</a> <a id="218" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>

<a id="Address"></a><a id="221" href="EUTxO.html#221" class="Function">Address</a>   <a id="231" class="Symbol">=</a> <a id="233" href="EUTxO.html#210" class="Function">Hash</a>
<a id="PubKey"></a><a id="238" href="EUTxO.html#238" class="Function">PubKey</a>    <a id="248" class="Symbol">=</a> <a id="250" href="EUTxO.html#210" class="Function">Hash</a>
<a id="Signature"></a><a id="255" href="EUTxO.html#255" class="Function">Signature</a> <a id="265" class="Symbol">=</a> <a id="267" href="EUTxO.html#210" class="Function">Hash</a>
<a id="272" class="Keyword">postulate</a> <a id="_♯"></a><a id="282" href="EUTxO.html#282" class="Postulate Operator">_♯</a> <a id="285" class="Symbol">:</a> <a id="287" class="Symbol">∀</a> <a id="289" class="Symbol">{</a><a id="290" href="EUTxO.html#290" class="Bound">A</a> <a id="292" class="Symbol">:</a> <a id="294" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="299" href="Prelude.Init.html#261" class="Generalizable">ℓ</a><a id="300" class="Symbol">}</a> <a id="302" class="Symbol">→</a> <a id="304" href="EUTxO.html#290" class="Bound">A</a> <a id="306" class="Symbol">→</a> <a id="308" href="EUTxO.html#210" class="Function">Hash</a>

<a id="∑"></a><a id="314" href="EUTxO.html#314" class="Function">∑</a> <a id="316" class="Symbol">:</a> <a id="318" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="323" href="EUTxO.html#136" class="Function">Value</a> <a id="329" class="Symbol">→</a> <a id="331" href="EUTxO.html#136" class="Function">Value</a>
<a id="337" href="EUTxO.html#314" class="Function">∑</a> <a id="339" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="342" class="Symbol">=</a> <a id="344" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a>
<a id="346" href="EUTxO.html#314" class="Function">∑</a> <a id="348" class="Symbol">(</a><a id="349" href="EUTxO.html#349" class="Bound">v</a> <a id="351" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="353" href="EUTxO.html#353" class="Bound">vs</a><a id="355" class="Symbol">)</a> <a id="357" class="Symbol">=</a> <a id="359" href="EUTxO.html#349" class="Bound">v</a> <a id="361" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="363" href="EUTxO.html#314" class="Function">∑</a> <a id="365" href="EUTxO.html#353" class="Bound">vs</a>

<a id="369" class="Keyword">record</a> <a id="TxOutput"></a><a id="376" href="EUTxO.html#376" class="Record">TxOutput</a> <a id="385" class="Symbol">:</a> <a id="387" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="392" class="Keyword">where</a>
  <a id="400" class="Keyword">constructor</a> <a id="_at_"></a><a id="412" href="EUTxO.html#412" class="InductiveConstructor Operator">_at_</a>
  <a id="419" class="Keyword">field</a> <a id="TxOutput.value"></a><a id="425" href="EUTxO.html#425" class="Field">value</a>    <a id="434" class="Symbol">:</a> <a id="436" href="EUTxO.html#136" class="Function">Value</a>
        <a id="TxOutput.address"></a><a id="450" href="EUTxO.html#450" class="Field">address</a>  <a id="459" class="Symbol">:</a> <a id="461" href="EUTxO.html#221" class="Function">Address</a>
        <a id="TxOutput.datum"></a><a id="477" href="EUTxO.html#477" class="Field">datum</a>    <a id="486" class="Symbol">:</a> <a id="488" href="EUTxO.html#200" class="Function">DATA</a>
<a id="493" class="Keyword">open</a> <a id="498" href="EUTxO.html#376" class="Module">TxOutput</a> <a id="507" class="Keyword">public</a>
<a id="514" class="Keyword">unquoteDecl</a> <a id="DecEq-TxO"></a><a id="526" href="EUTxO.html#526" class="Function">DecEq-TxO</a> <a id="536" class="Symbol">=</a> <a id="538" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="545" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="551" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="553" class="Keyword">quote</a> <a id="559" href="EUTxO.html#376" class="Record">TxOutput</a> <a id="568" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="570" href="EUTxO.html#526" class="Function">DecEq-TxO</a> <a id="580" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="583" class="Keyword">record</a> <a id="InputInfo"></a><a id="590" href="EUTxO.html#590" class="Record">InputInfo</a> <a id="600" class="Symbol">:</a> <a id="602" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="607" class="Keyword">where</a>
  <a id="615" class="Keyword">field</a> <a id="InputInfo.outputRef"></a><a id="621" href="EUTxO.html#621" class="Field">outputRef</a>     <a id="635" class="Symbol">:</a> <a id="637" href="EUTxO.html#376" class="Record">TxOutput</a>
        <a id="InputInfo.validatorHash"></a><a id="654" href="EUTxO.html#654" class="Field">validatorHash</a> <a id="668" class="Symbol">:</a> <a id="670" href="EUTxO.html#210" class="Function">Hash</a>
        <a id="InputInfo.redeemerHash"></a><a id="683" href="EUTxO.html#683" class="Field">redeemerHash</a>  <a id="697" class="Symbol">:</a> <a id="699" href="EUTxO.html#210" class="Function">Hash</a>
<a id="704" class="Keyword">unquoteDecl</a> <a id="DecEq-InputInfo"></a><a id="716" href="EUTxO.html#716" class="Function">DecEq-InputInfo</a> <a id="732" class="Symbol">=</a> <a id="734" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="741" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="747" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="749" class="Keyword">quote</a> <a id="755" href="EUTxO.html#590" class="Record">InputInfo</a> <a id="765" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="767" href="EUTxO.html#716" class="Function">DecEq-InputInfo</a> <a id="783" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="786" class="Keyword">record</a> <a id="TxInfo"></a><a id="793" href="EUTxO.html#793" class="Record">TxInfo</a> <a id="800" class="Symbol">:</a> <a id="802" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="807" class="Keyword">where</a>
  <a id="815" class="Keyword">field</a> <a id="TxInfo.inputs"></a><a id="821" href="EUTxO.html#821" class="Field">inputs</a>  <a id="829" class="Symbol">:</a> <a id="831" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="836" href="EUTxO.html#590" class="Record">InputInfo</a>
        <a id="TxInfo.outputs"></a><a id="854" href="EUTxO.html#854" class="Field">outputs</a> <a id="862" class="Symbol">:</a> <a id="864" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="869" href="EUTxO.html#376" class="Record">TxOutput</a>
        <a id="TxInfo.mint"></a><a id="886" href="EUTxO.html#886" class="Field">mint</a>   <a id="893" class="Symbol">:</a> <a id="895" href="EUTxO.html#136" class="Function">Value</a>
<a id="901" class="Keyword">unquoteDecl</a> <a id="DecEq-TxInfo"></a><a id="913" href="EUTxO.html#913" class="Function">DecEq-TxInfo</a> <a id="926" class="Symbol">=</a> <a id="928" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="935" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="941" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="943" class="Keyword">quote</a> <a id="949" href="EUTxO.html#793" class="Record">TxInfo</a> <a id="956" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="958" href="EUTxO.html#913" class="Function">DecEq-TxInfo</a> <a id="971" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="Redeemer"></a><a id="974" href="EUTxO.html#974" class="Function">Redeemer</a> <a id="983" class="Symbol">=</a> <a id="985" href="EUTxO.html#200" class="Function">DATA</a>
<a id="Datum"></a><a id="990" href="EUTxO.html#990" class="Function">Datum</a>    <a id="999" class="Symbol">=</a> <a id="1001" href="EUTxO.html#200" class="Function">DATA</a>
<a id="ScriptValidator"></a><a id="1006" href="EUTxO.html#1006" class="Function">ScriptValidator</a> <a id="1022" class="Symbol">=</a> <a id="1024" href="EUTxO.html#793" class="Record">TxInfo</a> <a id="1031" class="Comment">{-× Hash-}</a> <a id="1042" class="Symbol">→</a> <a id="1044" href="EUTxO.html#990" class="Function">Datum</a> <a id="1050" class="Symbol">→</a> <a id="1052" href="EUTxO.html#974" class="Function">Redeemer</a> <a id="1061" class="Symbol">→</a> <a id="1063" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="MintingPolicy"></a><a id="1068" href="EUTxO.html#1068" class="Function">MintingPolicy</a>   <a id="1084" class="Symbol">=</a> <a id="1086" href="EUTxO.html#793" class="Record">TxInfo</a> <a id="1093" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1095" href="EUTxO.html#93" class="Function">PolicyID</a> <a id="1104" class="Symbol">→</a> <a id="1106" href="EUTxO.html#974" class="Function">Redeemer</a> <a id="1115" class="Symbol">→</a> <a id="1117" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="1122" class="Keyword">postulate</a> <a id="1132" class="Keyword">instance</a> <a id="DecEq-MP"></a><a id="1141" href="EUTxO.html#1141" class="Postulate">DecEq-MP</a> <a id="1150" class="Symbol">:</a> <a id="1152" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="1158" href="EUTxO.html#1068" class="Function">MintingPolicy</a>

<a id="1173" class="Keyword">module</a> <a id="CommonInfo"></a><a id="1180" href="EUTxO.html#1180" class="Module">CommonInfo</a> <a id="1191" class="Symbol">(</a><a id="1192" href="EUTxO.html#1192" class="Bound">TxOutputRef</a> <a id="1204" class="Symbol">:</a> <a id="1206" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="1210" class="Symbol">)</a> <a id="1212" class="Keyword">where</a>

  <a id="1221" class="Keyword">record</a> <a id="CommonInfo.TxInput"></a><a id="1228" href="EUTxO.html#1228" class="Record">TxInput</a> <a id="1236" class="Symbol">:</a> <a id="1238" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1243" class="Keyword">where</a>
    <a id="1253" class="Keyword">field</a> <a id="CommonInfo.TxInput.outputRef"></a><a id="1259" href="EUTxO.html#1259" class="Field">outputRef</a> <a id="1269" class="Symbol">:</a> <a id="1271" href="EUTxO.html#1192" class="Bound">TxOutputRef</a>
          <a id="CommonInfo.TxInput.validator"></a><a id="1293" href="EUTxO.html#1293" class="Field">validator</a> <a id="1303" class="Symbol">:</a> <a id="1305" href="EUTxO.html#793" class="Record">TxInfo</a> <a id="1312" class="Symbol">→</a> <a id="1314" href="EUTxO.html#200" class="Function">DATA</a> <a id="1319" class="Symbol">→</a> <a id="1321" href="EUTxO.html#200" class="Function">DATA</a> <a id="1326" class="Symbol">→</a> <a id="1328" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
          <a id="CommonInfo.TxInput.redeemer"></a><a id="1343" href="EUTxO.html#1343" class="Field">redeemer</a> <a id="CommonInfo.TxInput.datum"></a><a id="1352" href="EUTxO.html#1352" class="Field">datum</a> <a id="1358" class="Symbol">:</a> <a id="1360" href="EUTxO.html#200" class="Function">DATA</a>
  <a id="1367" class="Keyword">open</a> <a id="1372" href="EUTxO.html#1228" class="Module">TxInput</a> <a id="1380" class="Keyword">public</a>

  <a id="1390" class="Keyword">record</a> <a id="CommonInfo.Tx"></a><a id="1397" href="EUTxO.html#1397" class="Record">Tx</a> <a id="1400" class="Symbol">:</a> <a id="1402" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1407" class="Keyword">where</a>
    <a id="1417" class="Keyword">field</a> <a id="CommonInfo.Tx.inputs"></a><a id="1423" href="EUTxO.html#1423" class="Field">inputs</a>   <a id="1432" class="Symbol">:</a> <a id="1434" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1439" href="EUTxO.html#1228" class="Record">TxInput</a>
          <a id="CommonInfo.Tx.outputs"></a><a id="1457" href="EUTxO.html#1457" class="Field">outputs</a>  <a id="1466" class="Symbol">:</a> <a id="1468" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1473" href="EUTxO.html#376" class="Record">TxOutput</a>
          <a id="CommonInfo.Tx.mint"></a><a id="1492" href="EUTxO.html#1492" class="Field">mint</a>     <a id="1501" class="Symbol">:</a> <a id="1503" href="EUTxO.html#136" class="Function">Value</a>
          <a id="CommonInfo.Tx.mintRdrs"></a><a id="1519" href="EUTxO.html#1519" class="Field">mintRdrs</a> <a id="1528" class="Symbol">:</a> <a id="1530" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="1535" href="EUTxO.html#1068" class="Function">MintingPolicy</a> <a id="1549" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="1551" href="EUTxO.html#974" class="Function">Redeemer</a> <a id="1560" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>
          <a id="CommonInfo.Tx.interval"></a><a id="1572" href="EUTxO.html#1572" class="Field">interval</a> <a id="1581" class="Symbol">:</a> <a id="1583" href="EUTxO.html#190" class="Function">Slot</a> <a id="1588" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1590" href="EUTxO.html#190" class="Function">Slot</a>
          <a id="CommonInfo.Tx.sigs"></a><a id="1605" href="EUTxO.html#1605" class="Field">sigs</a>     <a id="1614" class="Symbol">:</a> <a id="1616" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="1621" href="EUTxO.html#238" class="Function">PubKey</a> <a id="1628" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="1630" href="EUTxO.html#210" class="Function">Hash</a> <a id="1635" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>
  <a id="1639" class="Keyword">open</a> <a id="1644" href="EUTxO.html#1397" class="Module">Tx</a> <a id="1647" class="Keyword">public</a>
  <a id="1656" class="Keyword">postulate</a> <a id="CommonInfo.checkSig"></a><a id="1666" href="EUTxO.html#1666" class="Postulate">checkSig</a> <a id="1675" class="Symbol">:</a> <a id="1677" href="EUTxO.html#1397" class="Record">Tx</a> <a id="1680" class="Symbol">→</a> <a id="1682" href="EUTxO.html#238" class="Function">PubKey</a> <a id="1689" class="Symbol">→</a> <a id="1691" href="EUTxO.html#210" class="Function">Hash</a> <a id="1696" class="Symbol">→</a> <a id="1698" href="Agda.Primitive.html#320" class="Primitive">Type</a>

  <a id="1706" class="Comment">-- A ledger is a list of transactions.</a>
  <a id="CommonInfo.L"></a><a id="1747" href="EUTxO.html#1747" class="Function">L</a> <a id="1749" class="Symbol">=</a> <a id="1751" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1756" href="EUTxO.html#1397" class="Record">Tx</a>

  <a id="1762" class="Keyword">instance</a>
    <a id="CommonInfo.Semigroup-L"></a><a id="1775" href="EUTxO.html#1775" class="Function">Semigroup-L</a> <a id="1787" class="Symbol">:</a> <a id="1789" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="1799" href="EUTxO.html#1747" class="Function">L</a>
    <a id="1805" href="EUTxO.html#1775" class="Function">Semigroup-L</a> <a id="1817" class="Symbol">.</a><a id="1818" href="Prelude.Semigroup.html#251" class="Field Operator">_◇_</a> <a id="1822" class="Symbol">=</a> <a id="1824" href="Data.List.Base.html#1819" class="Function Operator">_++_</a>

    <a id="CommonInfo.Monoid-L"></a><a id="1834" href="EUTxO.html#1834" class="Function">Monoid-L</a> <a id="1843" class="Symbol">:</a> <a id="1845" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="1852" href="EUTxO.html#1747" class="Function">L</a>
    <a id="1858" href="EUTxO.html#1834" class="Function">Monoid-L</a> <a id="1867" class="Symbol">.</a><a id="1868" href="Prelude.Monoid.html#222" class="Field">ε</a> <a id="1870" class="Symbol">=</a> <a id="1872" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

  <a id="1878" class="Comment">-- Auxiliary definitions.</a>

  <a id="CommonInfo.outputRefs"></a><a id="1907" href="EUTxO.html#1907" class="Function">outputRefs</a> <a id="1918" class="Symbol">:</a> <a id="1920" href="EUTxO.html#1397" class="Record">Tx</a> <a id="1923" class="Symbol">→</a> <a id="1925" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1930" href="EUTxO.html#1192" class="Bound">TxOutputRef</a>
  <a id="1944" href="EUTxO.html#1907" class="Function">outputRefs</a> <a id="1955" class="Symbol">=</a> <a id="1957" href="Data.List.Base.html#1553" class="Function">map</a> <a id="1961" href="EUTxO.html#1259" class="Field">outputRef</a> <a id="1971" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1973" href="EUTxO.html#1423" class="Field">inputs</a>

  <a id="CommonInfo.Resolved"></a><a id="1983" href="EUTxO.html#1983" class="Function">Resolved</a> <a id="1992" class="Symbol">:</a> <a id="1994" href="Prelude.Init.html#13332" class="Function">Pred₀</a> <a id="2000" href="EUTxO.html#1397" class="Record">Tx</a>
  <a id="2005" href="EUTxO.html#1983" class="Function">Resolved</a> <a id="2014" href="EUTxO.html#2014" class="Bound">tx</a> <a id="2017" class="Symbol">=</a> <a id="2019" class="Symbol">∀</a> <a id="2021" class="Symbol">{</a><a id="2022" href="EUTxO.html#2022" class="Bound">r</a><a id="2023" class="Symbol">}</a> <a id="2025" class="Symbol">→</a> <a id="2027" href="EUTxO.html#2022" class="Bound">r</a> <a id="2029" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="2031" href="EUTxO.html#1907" class="Function">outputRefs</a> <a id="2042" href="EUTxO.html#2014" class="Bound">tx</a> <a id="2045" class="Symbol">→</a> <a id="2047" href="EUTxO.html#376" class="Record">TxOutput</a>

  <a id="CommonInfo.ResolvedInput"></a><a id="2059" href="EUTxO.html#2059" class="Function">ResolvedInput</a>  <a id="2074" class="Symbol">=</a> <a id="2076" href="EUTxO.html#1228" class="Record">TxInput</a> <a id="2084" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2086" href="EUTxO.html#376" class="Record">TxOutput</a>
  <a id="CommonInfo.ResolvedInputs"></a><a id="2097" href="EUTxO.html#2097" class="Function">ResolvedInputs</a> <a id="2112" class="Symbol">=</a> <a id="2114" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="2119" href="EUTxO.html#2059" class="Function">ResolvedInput</a>

  <a id="CommonInfo.resolveInputs"></a><a id="2136" href="EUTxO.html#2136" class="Function">resolveInputs</a> <a id="2150" class="Symbol">:</a> <a id="2152" class="Symbol">∀</a> <a id="2154" href="EUTxO.html#2154" class="Bound">tx</a> <a id="2157" class="Symbol">→</a> <a id="2159" href="EUTxO.html#1983" class="Function">Resolved</a> <a id="2168" href="EUTxO.html#2154" class="Bound">tx</a> <a id="2171" class="Symbol">→</a> <a id="2173" href="EUTxO.html#2097" class="Function">ResolvedInputs</a>
  <a id="2190" href="EUTxO.html#2136" class="Function">resolveInputs</a> <a id="2204" href="EUTxO.html#2204" class="Bound">tx</a> <a id="2207" href="EUTxO.html#2207" class="Bound">resolvedTx</a> <a id="2218" class="Symbol">=</a> <a id="2220" href="Data.List.Membership.Setoid.html#1137" class="Function">mapWith∈</a> <a id="2229" class="Symbol">(</a><a id="2230" href="EUTxO.html#2204" class="Bound">tx</a> <a id="2233" class="Symbol">.</a><a id="2234" href="EUTxO.html#1423" class="Field">inputs</a><a id="2240" class="Symbol">)</a> <a id="2242" class="Symbol">λ</a> <a id="2244" class="Symbol">{</a><a id="2245" href="EUTxO.html#2245" class="Bound">i</a><a id="2246" class="Symbol">}</a> <a id="2248" href="EUTxO.html#2248" class="Bound">i∈</a> <a id="2251" class="Symbol">→</a>
    <a id="2257" href="EUTxO.html#2245" class="Bound">i</a> <a id="2259" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2261" href="EUTxO.html#2207" class="Bound">resolvedTx</a> <a id="2272" class="Symbol">(</a><a id="2273" href="Data.List.Membership.Propositional.Properties.html#3377" class="Function">∈-map⁺</a> <a id="2280" href="EUTxO.html#1259" class="Field">outputRef</a> <a id="2290" href="EUTxO.html#2248" class="Bound">i∈</a><a id="2292" class="Symbol">)</a>

  <a id="CommonInfo.mkInputInfo"></a><a id="2297" href="EUTxO.html#2297" class="Function">mkInputInfo</a> <a id="2309" class="Symbol">:</a> <a id="2311" href="EUTxO.html#2059" class="Function">ResolvedInput</a> <a id="2325" class="Symbol">→</a> <a id="2327" href="EUTxO.html#590" class="Record">InputInfo</a>
  <a id="2339" href="EUTxO.html#2297" class="Function">mkInputInfo</a> <a id="2351" class="Symbol">(</a><a id="2352" href="EUTxO.html#2352" class="Bound">i</a> <a id="2354" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2356" href="EUTxO.html#2356" class="Bound">o</a><a id="2357" class="Symbol">)</a> <a id="2359" class="Symbol">=</a> <a id="2361" class="Keyword">record</a>
    <a id="2372" class="Symbol">{</a> <a id="2374" href="EUTxO.html#621" class="Field">outputRef</a>     <a id="2388" class="Symbol">=</a> <a id="2390" href="EUTxO.html#2356" class="Bound">o</a>
    <a id="2396" class="Symbol">;</a> <a id="2398" href="EUTxO.html#654" class="Field">validatorHash</a> <a id="2412" class="Symbol">=</a> <a id="2414" href="EUTxO.html#2352" class="Bound">i</a> <a id="2416" class="Symbol">.</a><a id="2417" href="EUTxO.html#1293" class="Field">validator</a> <a id="2427" href="EUTxO.html#282" class="Postulate Operator">♯</a>
    <a id="2433" class="Symbol">;</a> <a id="2435" href="EUTxO.html#683" class="Field">redeemerHash</a>  <a id="2449" class="Symbol">=</a> <a id="2451" href="EUTxO.html#2352" class="Bound">i</a> <a id="2453" class="Symbol">.</a><a id="2454" href="EUTxO.html#1343" class="Field">redeemer</a> <a id="2463" href="EUTxO.html#282" class="Postulate Operator">♯</a> <a id="2465" class="Symbol">}</a>

  <a id="CommonInfo.mkTxInfo"></a><a id="2470" href="EUTxO.html#2470" class="Function">mkTxInfo</a> <a id="2479" class="Symbol">:</a> <a id="2481" class="Symbol">∀</a> <a id="2483" class="Symbol">(</a><a id="2484" href="EUTxO.html#2484" class="Bound">tx</a> <a id="2487" class="Symbol">:</a> <a id="2489" href="EUTxO.html#1397" class="Record">Tx</a><a id="2491" class="Symbol">)</a> <a id="2493" class="Symbol">→</a> <a id="2495" href="EUTxO.html#1983" class="Function">Resolved</a> <a id="2504" href="EUTxO.html#2484" class="Bound">tx</a> <a id="2507" class="Symbol">→</a> <a id="2509" href="EUTxO.html#793" class="Record">TxInfo</a>
  <a id="2518" href="EUTxO.html#2470" class="Function">mkTxInfo</a> <a id="2527" href="EUTxO.html#2527" class="Bound">tx</a> <a id="2530" href="EUTxO.html#2530" class="Bound">resolvedTx</a> <a id="2541" class="Symbol">=</a> <a id="2543" class="Keyword">record</a>
    <a id="2554" class="Symbol">{</a> <a id="2556" href="EUTxO.html#821" class="Field">inputs</a>  <a id="2564" class="Symbol">=</a> <a id="2566" href="EUTxO.html#2297" class="Function">mkInputInfo</a> <a id="2578" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="2582" href="EUTxO.html#2136" class="Function">resolveInputs</a> <a id="2596" href="EUTxO.html#2527" class="Bound">tx</a> <a id="2599" href="EUTxO.html#2530" class="Bound">resolvedTx</a>
    <a id="2614" class="Symbol">;</a> <a id="2616" href="EUTxO.html#854" class="Field">outputs</a> <a id="2624" class="Symbol">=</a> <a id="2626" href="EUTxO.html#2527" class="Bound">tx</a> <a id="2629" class="Symbol">.</a><a id="2630" href="EUTxO.html#1457" class="Field">outputs</a>
    <a id="2642" class="Symbol">;</a> <a id="2644" href="EUTxO.html#886" class="Field">mint</a>   <a id="2651" class="Symbol">=</a> <a id="2653" href="EUTxO.html#2527" class="Bound">tx</a> <a id="2656" class="Symbol">.</a><a id="2657" href="EUTxO.html#1492" class="Field">mint</a> <a id="2662" class="Symbol">}</a>

<a id="All-syntax"></a><a id="2665" href="EUTxO.html#2665" class="Function">All-syntax</a> <a id="2676" class="Symbol">=</a> <a id="2678" href="Data.List.Relation.Unary.All.html#1453" class="Datatype">All</a>
<a id="2682" class="Keyword">syntax</a> <a id="2689" href="EUTxO.html#2665" class="Function">All-syntax</a> <a id="2700" class="Symbol">(λ</a> <a id="2703" class="Bound">i</a> <a id="2705" class="Symbol">→</a> <a id="2707" class="Bound">P</a><a id="2708" class="Symbol">)</a> <a id="2710" class="Bound">xs</a> <a id="2713" class="Symbol">=</a> <a id="2715" class="Function">∀[</a> <a id="2718" class="Bound">i</a> <a id="2720" class="Function">∈</a> <a id="2722" class="Bound">xs</a> <a id="2725" class="Function">]</a> <a id="2727" class="Bound">P</a>

<a id="Any-syntax"></a><a id="2730" href="EUTxO.html#2730" class="Function">Any-syntax</a> <a id="2741" class="Symbol">=</a> <a id="2743" href="Data.List.Relation.Unary.Any.html#1165" class="Datatype">Any</a>
<a id="2747" class="Keyword">syntax</a> <a id="2754" href="EUTxO.html#2730" class="Function">Any-syntax</a> <a id="2765" class="Symbol">(λ</a> <a id="2768" class="Bound">i</a> <a id="2770" class="Symbol">→</a> <a id="2772" class="Bound">P</a><a id="2773" class="Symbol">)</a> <a id="2775" class="Bound">xs</a> <a id="2778" class="Symbol">=</a> <a id="2780" class="Function">∃[</a> <a id="2783" class="Bound">i</a> <a id="2785" class="Function">∈</a> <a id="2787" class="Bound">xs</a> <a id="2790" class="Function">]</a> <a id="2792" class="Bound">P</a>

<a id="2795" class="Comment">--</a>

<a id="2799" class="Keyword">record</a> <a id="TxOutputRef"></a><a id="2806" href="EUTxO.html#2806" class="Record">TxOutputRef</a> <a id="2818" class="Symbol">:</a> <a id="2820" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="2825" class="Keyword">where</a>
  <a id="2833" class="Keyword">constructor</a> <a id="_indexed-at_"></a><a id="2845" href="EUTxO.html#2845" class="InductiveConstructor Operator">_indexed-at_</a>
  <a id="2860" class="Keyword">field</a> <a id="TxOutputRef.txId"></a><a id="2866" href="EUTxO.html#2866" class="Field">txId</a>  <a id="2872" class="Symbol">:</a> <a id="2874" href="EUTxO.html#210" class="Function">Hash</a>
        <a id="TxOutputRef.index"></a><a id="2887" href="EUTxO.html#2887" class="Field">index</a> <a id="2893" class="Symbol">:</a> <a id="2895" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="2897" class="Keyword">open</a> <a id="2902" href="EUTxO.html#2806" class="Module">TxOutputRef</a> <a id="2914" class="Keyword">public</a>
<a id="2921" class="Keyword">unquoteDecl</a> <a id="DecEq-TxOR"></a><a id="2933" href="EUTxO.html#2933" class="Function">DecEq-TxOR</a> <a id="2944" class="Symbol">=</a> <a id="2946" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="2953" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="2959" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="2961" class="Keyword">quote</a> <a id="2967" href="EUTxO.html#2806" class="Record">TxOutputRef</a> <a id="2979" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2981" href="EUTxO.html#2933" class="Function">DecEq-TxOR</a> <a id="2992" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="2995" class="Keyword">open</a> <a id="3000" href="EUTxO.html#1180" class="Module">CommonInfo</a> <a id="3011" href="EUTxO.html#2806" class="Record">TxOutputRef</a> <a id="3023" class="Keyword">public</a>

<a id="3031" class="Comment">-- The state of a ledger maps output references locked by a validator to a value.</a>
<a id="UTxO"></a><a id="3113" href="EUTxO.html#3113" class="Function">UTxO</a> <a id="3118" class="Symbol">=</a> <a id="3120" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3125" href="EUTxO.html#2806" class="Record">TxOutputRef</a> <a id="3137" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3139" href="EUTxO.html#376" class="Record">TxOutput</a> <a id="3148" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>

<a id="mkUtxo"></a><a id="3151" href="EUTxO.html#3151" class="Function">mkUtxo</a> <a id="3158" class="Symbol">:</a> <a id="3160" class="Symbol">∀</a> <a id="3162" class="Symbol">{</a><a id="3163" href="EUTxO.html#3163" class="Bound">out</a><a id="3166" class="Symbol">}</a> <a id="3168" href="EUTxO.html#3168" class="Bound">tx</a> <a id="3171" class="Symbol">→</a> <a id="3173" href="EUTxO.html#3163" class="Bound">out</a> <a id="3177" href="Data.List.Membership.Setoid.html#896" class="Function Operator">L.Mem.∈</a> <a id="3185" href="EUTxO.html#1457" class="Field">outputs</a> <a id="3193" href="EUTxO.html#3168" class="Bound">tx</a> <a id="3196" class="Symbol">→</a> <a id="3198" href="EUTxO.html#2806" class="Record">TxOutputRef</a> <a id="3210" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="3212" href="EUTxO.html#376" class="Record">TxOutput</a>
<a id="3221" href="EUTxO.html#3151" class="Function">mkUtxo</a> <a id="3228" class="Symbol">{</a><a id="3229" href="EUTxO.html#3229" class="Bound">out</a><a id="3232" class="Symbol">}</a> <a id="3234" href="EUTxO.html#3234" class="Bound">tx</a> <a id="3237" href="EUTxO.html#3237" class="Bound">out∈</a> <a id="3242" class="Symbol">=</a> <a id="3244" class="Symbol">(</a><a id="3245" href="EUTxO.html#3234" class="Bound">tx</a> <a id="3248" href="EUTxO.html#282" class="Postulate Operator">♯</a><a id="3249" class="Symbol">)</a> <a id="3251" href="EUTxO.html#2845" class="InductiveConstructor Operator">indexed-at</a> <a id="3262" href="Prelude.ToN.html#139" class="Field">toℕ</a> <a id="3266" class="Symbol">(</a><a id="3267" href="Data.List.Relation.Unary.Any.html#1826" class="Function">L.Any.index</a> <a id="3279" href="EUTxO.html#3237" class="Bound">out∈</a><a id="3283" class="Symbol">)</a> <a id="3285" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3287" href="EUTxO.html#3229" class="Bound">out</a>

<a id="utxoTx"></a><a id="3292" href="EUTxO.html#3292" class="Function">utxoTx</a> <a id="3299" class="Symbol">:</a> <a id="3301" href="EUTxO.html#1397" class="Record">Tx</a> <a id="3304" class="Symbol">→</a> <a id="3306" href="EUTxO.html#3113" class="Function">UTxO</a>
<a id="3311" href="EUTxO.html#3292" class="Function">utxoTx</a> <a id="3318" href="EUTxO.html#3318" class="Bound">tx</a> <a id="3321" class="Symbol">=</a> <a id="3323" href="Prelude.FromList.html#197" class="Field">fromList</a> <a id="3332" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="3334" href="Data.List.Membership.Setoid.html#1137" class="Function">L.Mem.mapWith∈</a> <a id="3349" class="Symbol">(</a><a id="3350" href="EUTxO.html#3318" class="Bound">tx</a> <a id="3353" class="Symbol">.</a><a id="3354" href="EUTxO.html#1457" class="Field">outputs</a><a id="3361" class="Symbol">)</a> <a id="3363" class="Symbol">(</a><a id="3364" href="EUTxO.html#3151" class="Function">mkUtxo</a> <a id="3371" href="EUTxO.html#3318" class="Bound">tx</a><a id="3373" class="Symbol">)</a>

<a id="totalValue"></a><a id="3376" href="EUTxO.html#3376" class="Function">totalValue</a> <a id="3387" class="Symbol">:</a> <a id="3389" href="EUTxO.html#3113" class="Function">UTxO</a> <a id="3394" class="Symbol">→</a> <a id="3396" href="EUTxO.html#136" class="Function">Value</a>
<a id="3402" href="EUTxO.html#3376" class="Function">totalValue</a> <a id="3413" class="Symbol">=</a> <a id="3415" href="EUTxO.html#314" class="Function">∑</a> <a id="3417" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3419" href="Data.List.Base.html#1553" class="Function">map</a> <a id="3423" href="EUTxO.html#425" class="Field">value</a> <a id="3429" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3431" href="Prelude.html#1216" class="Function">values</a>

<a id="applyTx"></a><a id="3439" href="EUTxO.html#3439" class="Function">applyTx</a> <a id="3447" class="Symbol">:</a> <a id="3449" href="EUTxO.html#1397" class="Record">Tx</a> <a id="3452" class="Symbol">→</a> <a id="3454" class="Symbol">(</a><a id="3455" href="EUTxO.html#3113" class="Function">UTxO</a> <a id="3460" class="Symbol">→</a> <a id="3462" href="EUTxO.html#3113" class="Function">UTxO</a><a id="3466" class="Symbol">)</a>
<a id="3468" href="EUTxO.html#3439" class="Function">applyTx</a> <a id="3476" href="EUTxO.html#3476" class="Bound">tx</a> <a id="3479" href="EUTxO.html#3479" class="Bound">utxo</a> <a id="3484" class="Symbol">=</a> <a id="3486" class="Symbol">(</a><a id="3487" href="EUTxO.html#3479" class="Bound">utxo</a> <a id="3492" href="Prelude.html#1076" class="Function Operator">─ᵏˢ</a> <a id="3496" href="EUTxO.html#1907" class="Function">outputRefs</a> <a id="3507" href="EUTxO.html#3476" class="Bound">tx</a><a id="3509" class="Symbol">)</a> <a id="3511" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3513" href="EUTxO.html#3292" class="Function">utxoTx</a> <a id="3520" href="EUTxO.html#3476" class="Bound">tx</a>

<a id="utxo"></a><a id="3524" href="EUTxO.html#3524" class="Function">utxo</a> <a id="3529" class="Symbol">:</a> <a id="3531" href="EUTxO.html#1747" class="Function">L</a> <a id="3533" class="Symbol">→</a> <a id="3535" href="EUTxO.html#3113" class="Function">UTxO</a>
<a id="3540" href="EUTxO.html#3524" class="Function">utxo</a> <a id="3545" class="Symbol">=</a> <a id="3547" class="Symbol">λ</a> <a id="3549" class="Keyword">where</a>
  <a id="3557" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="3560" class="Symbol">→</a> <a id="3562" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a>
  <a id="3566" class="Symbol">(</a><a id="3567" href="EUTxO.html#3567" class="Bound">tx</a> <a id="3570" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="3572" href="EUTxO.html#3572" class="Bound">l</a><a id="3573" class="Symbol">)</a> <a id="3575" class="Symbol">→</a> <a id="3577" href="EUTxO.html#3439" class="Function">applyTx</a> <a id="3585" href="EUTxO.html#3567" class="Bound">tx</a> <a id="3588" class="Symbol">(</a><a id="3589" href="EUTxO.html#3524" class="Function">utxo</a> <a id="3594" href="EUTxO.html#3572" class="Bound">l</a><a id="3595" class="Symbol">)</a>

<a id="3598" class="Keyword">record</a> <a id="IsValidTx"></a><a id="3605" href="EUTxO.html#3605" class="Record">IsValidTx</a> <a id="3615" class="Symbol">(</a><a id="3616" href="EUTxO.html#3616" class="Bound">slot</a> <a id="3621" class="Symbol">:</a> <a id="3623" href="EUTxO.html#190" class="Function">Slot</a><a id="3627" class="Symbol">)</a> <a id="3629" class="Symbol">(</a><a id="3630" href="EUTxO.html#3630" class="Bound">tx</a> <a id="3633" class="Symbol">:</a> <a id="3635" href="EUTxO.html#1397" class="Record">Tx</a><a id="3637" class="Symbol">)</a> <a id="3639" class="Symbol">(</a><a id="3640" href="EUTxO.html#3640" class="Bound">utxos</a> <a id="3646" class="Symbol">:</a> <a id="3648" href="EUTxO.html#3113" class="Function">UTxO</a><a id="3652" class="Symbol">)</a> <a id="3654" class="Symbol">:</a> <a id="3656" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="3661" class="Keyword">where</a>
  <a id="3669" class="Keyword">field</a>
    <a id="IsValidTx.noDoubleSpending"></a><a id="3679" href="EUTxO.html#3679" class="Field">noDoubleSpending</a> <a id="3696" class="Symbol">:</a>
      <a id="3704" href="Prelude.Irrelevance.List.Unique.html#1002" class="Function">·Unique</a> <a id="3712" class="Symbol">(</a><a id="3713" href="EUTxO.html#1907" class="Function">outputRefs</a> <a id="3724" href="EUTxO.html#3630" class="Bound">tx</a><a id="3726" class="Symbol">)</a>

    <a id="IsValidTx.validInterval"></a><a id="3733" href="EUTxO.html#3733" class="Field">validInterval</a> <a id="3747" class="Symbol">:</a> <a id="3749" class="Keyword">let</a> <a id="3753" class="Symbol">(</a><a id="3754" href="EUTxO.html#3754" class="Bound">from</a> <a id="3759" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3761" href="EUTxO.html#3761" class="Bound">to</a><a id="3763" class="Symbol">)</a> <a id="3765" class="Symbol">=</a> <a id="3767" href="EUTxO.html#3630" class="Bound">tx</a> <a id="3770" class="Symbol">.</a><a id="3771" href="EUTxO.html#1572" class="Field">interval</a> <a id="3780" class="Keyword">in</a>
      <a id="3789" class="Symbol">(</a><a id="3790" href="EUTxO.html#3754" class="Bound">from</a> <a id="3795" href="Prelude.Ord.Core.html#209" class="Field Operator">≤</a> <a id="3797" href="EUTxO.html#3616" class="Bound">slot</a><a id="3801" class="Symbol">)</a> <a id="3803" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="3805" class="Symbol">(</a><a id="3806" href="EUTxO.html#3616" class="Bound">slot</a> <a id="3811" href="Prelude.Ord.Core.html#209" class="Field Operator">≤</a> <a id="3813" href="EUTxO.html#3761" class="Bound">to</a><a id="3815" class="Symbol">)</a>

    <a id="IsValidTx.validOutputRefs"></a><a id="3822" href="EUTxO.html#3822" class="Field">validOutputRefs</a> <a id="3838" class="Symbol">:</a>
      <a id="3846" href="EUTxO.html#2665" class="Function">∀[</a> <a id="3849" href="EUTxO.html#3849" class="Bound">ref</a> <a id="3853" href="EUTxO.html#2665" class="Function">∈</a> <a id="3855" href="EUTxO.html#1907" class="Function">outputRefs</a> <a id="3866" href="EUTxO.html#3630" class="Bound">tx</a> <a id="3869" href="EUTxO.html#2665" class="Function">]</a>
        <a id="3879" class="Symbol">(</a><a id="3880" href="EUTxO.html#3849" class="Bound">ref</a> <a id="3884" href="Prelude.Maps.AsSets.html#1627" class="Function Operator">∈ᵈ</a> <a id="3887" href="EUTxO.html#3640" class="Bound">utxos</a><a id="3892" class="Symbol">)</a>

  <a id="IsValidTx.resolved"></a><a id="3897" href="EUTxO.html#3897" class="Function">resolved</a> <a id="3906" class="Symbol">:</a> <a id="3908" href="EUTxO.html#1983" class="Function">Resolved</a> <a id="3917" href="EUTxO.html#3630" class="Bound">tx</a>
  <a id="3922" href="EUTxO.html#3897" class="Function">resolved</a> <a id="3931" class="Symbol">=</a> <a id="3933" class="Symbol">(</a><a id="3934" href="EUTxO.html#3640" class="Bound">utxos</a> <a id="3940" href="Prelude.html#980" class="Function Operator">‼_</a><a id="3942" class="Symbol">)</a> <a id="3944" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3946" href="Data.List.Relation.Unary.All.html#5775" class="Function">L.All.lookup</a> <a id="3959" href="EUTxO.html#3822" class="Field">validOutputRefs</a>

  <a id="IsValidTx.txInfo"></a><a id="3978" href="EUTxO.html#3978" class="Function">txInfo</a> <a id="3985" class="Symbol">=</a> <a id="3987" href="EUTxO.html#2470" class="Function">mkTxInfo</a> <a id="3996" href="EUTxO.html#3630" class="Bound">tx</a> <a id="3999" href="EUTxO.html#3897" class="Function">resolved</a>
  <a id="IsValidTx.resolvedInputs"></a><a id="4010" href="EUTxO.html#4010" class="Function">resolvedInputs</a> <a id="4025" class="Symbol">=</a> <a id="4027" href="EUTxO.html#2136" class="Function">resolveInputs</a> <a id="4041" href="EUTxO.html#3630" class="Bound">tx</a> <a id="4044" href="EUTxO.html#3897" class="Function">resolved</a>

  <a id="4056" class="Keyword">field</a>
    <a id="IsValidTx.preservesValues"></a><a id="4066" href="EUTxO.html#4066" class="Field">preservesValues</a> <a id="4082" class="Symbol">:</a>
      <a id="4090" href="EUTxO.html#3630" class="Bound">tx</a> <a id="4093" class="Symbol">.</a><a id="4094" href="EUTxO.html#1492" class="Field">mint</a> <a id="4099" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="4101" href="EUTxO.html#314" class="Function">∑</a> <a id="4103" class="Symbol">(</a><a id="4104" href="EUTxO.html#425" class="Field">value</a> <a id="4110" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="4112" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="4118" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="4122" href="EUTxO.html#4010" class="Function">resolvedInputs</a><a id="4136" class="Symbol">)</a> <a id="4138" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4140" href="EUTxO.html#314" class="Function">∑</a> <a id="4142" class="Symbol">(</a><a id="4143" href="EUTxO.html#425" class="Field">value</a> <a id="4149" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="4153" href="EUTxO.html#3630" class="Bound">tx</a> <a id="4156" class="Symbol">.</a><a id="4157" href="EUTxO.html#1457" class="Field">outputs</a><a id="4164" class="Symbol">)</a>

  <a id="4169" class="Comment">-- ** script validation</a>
    <a id="IsValidTx.allInputsValidate"></a><a id="4197" href="EUTxO.html#4197" class="Field">allInputsValidate</a> <a id="4215" class="Symbol">:</a>
      <a id="4223" href="EUTxO.html#2665" class="Function">∀[</a> <a id="4226" href="EUTxO.html#4226" class="Bound">i</a> <a id="4228" href="EUTxO.html#2665" class="Function">∈</a> <a id="4230" href="EUTxO.html#3630" class="Bound">tx</a> <a id="4233" class="Symbol">.</a><a id="4234" href="EUTxO.html#1423" class="Field">inputs</a> <a id="4241" href="EUTxO.html#2665" class="Function">]</a>
        <a id="4251" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="4253" class="Symbol">(</a><a id="4254" href="EUTxO.html#4226" class="Bound">i</a> <a id="4256" class="Symbol">.</a><a id="4257" href="EUTxO.html#1293" class="Field">validator</a> <a id="4267" href="EUTxO.html#3978" class="Function">txInfo</a> <a id="4274" class="Symbol">(</a><a id="4275" href="EUTxO.html#4226" class="Bound">i</a> <a id="4277" class="Symbol">.</a><a id="4278" href="EUTxO.html#1352" class="Field">datum</a><a id="4283" class="Symbol">)</a> <a id="4285" class="Symbol">(</a><a id="4286" href="EUTxO.html#4226" class="Bound">i</a> <a id="4288" class="Symbol">.</a><a id="4289" href="EUTxO.html#1343" class="Field">redeemer</a><a id="4297" class="Symbol">))</a>

    <a id="IsValidTx.validateValidHashes"></a><a id="4305" href="EUTxO.html#4305" class="Field">validateValidHashes</a> <a id="4325" class="Symbol">:</a>
      <a id="4333" href="EUTxO.html#2665" class="Function">∀[</a> <a id="4336" href="EUTxO.html#4336" class="Bound">(</a><a id="4337" href="EUTxO.html#4337" class="Bound">i</a> <a id="4339" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4341" href="EUTxO.html#4341" class="Bound">o</a><a id="4342" href="EUTxO.html#4336" class="Bound">)</a> <a id="4344" href="EUTxO.html#2665" class="Function">∈</a> <a id="4346" href="EUTxO.html#4010" class="Function">resolvedInputs</a> <a id="4361" href="EUTxO.html#2665" class="Function">]</a>
        <a id="4371" class="Symbol">(</a><a id="4372" href="EUTxO.html#4341" class="Bound">o</a> <a id="4374" class="Symbol">.</a><a id="4375" href="EUTxO.html#450" class="Field">address</a> <a id="4383" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4385" href="EUTxO.html#4337" class="Bound">i</a> <a id="4387" class="Symbol">.</a><a id="4388" href="EUTxO.html#1293" class="Field">validator</a> <a id="4398" href="EUTxO.html#282" class="Postulate Operator">♯</a><a id="4399" class="Symbol">)</a>

  <a id="4404" class="Comment">-- ** minting policies</a>
    <a id="IsValidTx.validMintRedeemers"></a><a id="4431" href="EUTxO.html#4431" class="Field">validMintRedeemers</a> <a id="4450" class="Symbol">:</a>
      <a id="4458" href="Prelude.html#1156" class="Function">keys</a> <a id="4463" class="Symbol">(</a><a id="4464" href="EUTxO.html#3630" class="Bound">tx</a> <a id="4467" class="Symbol">.</a><a id="4468" href="EUTxO.html#1492" class="Field">mint</a><a id="4472" class="Symbol">)</a> <a id="4474" href="Data.List.Relation.Binary.Subset.Setoid.html#748" class="Function Operator">⊆</a> <a id="4476" class="Symbol">(</a><a id="4477" href="EUTxO.html#282" class="Postulate Operator">_♯</a> <a id="4480" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="4484" href="Prelude.html#1156" class="Function">keys</a> <a id="4489" class="Symbol">(</a><a id="4490" href="EUTxO.html#3630" class="Bound">tx</a> <a id="4493" class="Symbol">.</a><a id="4494" href="EUTxO.html#1519" class="Field">mintRdrs</a><a id="4502" class="Symbol">))</a>

    <a id="IsValidTx.allPoliciesValidate"></a><a id="4510" href="EUTxO.html#4510" class="Field">allPoliciesValidate</a> <a id="4530" class="Symbol">:</a>
      <a id="4538" href="EUTxO.html#2665" class="Function">∀[</a> <a id="4541" href="EUTxO.html#4541" class="Bound">(</a><a id="4542" href="EUTxO.html#4542" class="Bound">p</a> <a id="4544" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4546" href="EUTxO.html#4546" class="Bound">r</a><a id="4547" href="EUTxO.html#4541" class="Bound">)</a> <a id="4549" href="EUTxO.html#2665" class="Function">∈</a> <a id="4551" href="Prelude.ToList.html#193" class="Field">toList</a> <a id="4558" class="Symbol">(</a><a id="4559" href="EUTxO.html#3630" class="Bound">tx</a> <a id="4562" class="Symbol">.</a><a id="4563" href="EUTxO.html#1519" class="Field">mintRdrs</a><a id="4571" class="Symbol">)</a> <a id="4573" href="EUTxO.html#2665" class="Function">]</a>
        <a id="4583" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="4585" class="Symbol">(</a><a id="4586" href="EUTxO.html#4542" class="Bound">p</a> <a id="4588" class="Symbol">(</a><a id="4589" href="EUTxO.html#3978" class="Function">txInfo</a> <a id="4596" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4598" href="EUTxO.html#4542" class="Bound">p</a> <a id="4600" href="EUTxO.html#282" class="Postulate Operator">♯</a><a id="4601" class="Symbol">)</a> <a id="4603" href="EUTxO.html#4546" class="Bound">r</a><a id="4604" class="Symbol">)</a>

  <a id="4609" class="Comment">-- ** signatures</a>
    <a id="IsValidTx.validSignatures"></a><a id="4630" href="EUTxO.html#4630" class="Field">validSignatures</a> <a id="4646" class="Symbol">:</a>
      <a id="4654" href="EUTxO.html#2665" class="Function">∀[</a> <a id="4657" href="EUTxO.html#4657" class="Bound">(</a><a id="4658" href="EUTxO.html#4658" class="Bound">pk</a> <a id="4661" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4663" href="EUTxO.html#4663" class="Bound">s</a><a id="4664" href="EUTxO.html#4657" class="Bound">)</a> <a id="4666" href="EUTxO.html#2665" class="Function">∈</a> <a id="4668" href="Prelude.ToList.html#193" class="Field">toList</a> <a id="4675" class="Symbol">(</a><a id="4676" href="EUTxO.html#3630" class="Bound">tx</a> <a id="4679" class="Symbol">.</a><a id="4680" href="EUTxO.html#1605" class="Field">sigs</a><a id="4684" class="Symbol">)</a> <a id="4686" href="EUTxO.html#2665" class="Function">]</a>
        <a id="4696" href="EUTxO.html#1666" class="Function">checkSig</a> <a id="4705" href="EUTxO.html#3630" class="Bound">tx</a> <a id="4708" href="EUTxO.html#4658" class="Bound">pk</a> <a id="4711" href="EUTxO.html#4663" class="Bound">s</a>

<a id="4714" class="Keyword">open</a> <a id="4719" href="EUTxO.html#3605" class="Module">IsValidTx</a> <a id="4729" class="Keyword">public</a>

<a id="4737" class="Keyword">postulate</a> <a id="isValidTx?"></a><a id="4747" href="EUTxO.html#4747" class="Postulate">isValidTx?</a> <a id="4758" class="Symbol">:</a> <a id="4760" class="Symbol">∀</a> <a id="4762" href="EUTxO.html#4762" class="Bound">slot</a> <a id="4767" href="EUTxO.html#4767" class="Bound">tx</a> <a id="4770" href="EUTxO.html#4770" class="Bound">s</a> <a id="4772" class="Symbol">→</a> <a id="4774" href="Relation.Nullary.html#1520" class="Record">Dec</a> <a id="4778" class="Symbol">(</a><a id="4779" href="EUTxO.html#3605" class="Record">IsValidTx</a> <a id="4789" href="EUTxO.html#4762" class="Bound">slot</a> <a id="4794" href="EUTxO.html#4767" class="Bound">tx</a> <a id="4797" href="EUTxO.html#4770" class="Bound">s</a><a id="4798" class="Symbol">)</a>

<a id="isValidTx"></a><a id="4801" href="EUTxO.html#4801" class="Function">isValidTx</a> <a id="4811" class="Symbol">:</a> <a id="4813" href="EUTxO.html#190" class="Function">Slot</a> <a id="4818" class="Symbol">→</a> <a id="4820" href="EUTxO.html#1397" class="Record">Tx</a> <a id="4823" class="Symbol">→</a> <a id="4825" href="EUTxO.html#3113" class="Function">UTxO</a> <a id="4830" class="Symbol">→</a> <a id="4832" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="4837" href="EUTxO.html#4801" class="Function">isValidTx</a> <a id="4847" href="EUTxO.html#4847" class="Bound">slot</a> <a id="4852" href="EUTxO.html#4852" class="Bound">tx</a> <a id="4855" href="EUTxO.html#4855" class="Bound">s</a> <a id="4857" class="Symbol">=</a> <a id="4859" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌊</a> <a id="4861" href="EUTxO.html#4747" class="Postulate">isValidTx?</a> <a id="4872" href="EUTxO.html#4847" class="Bound">slot</a> <a id="4877" href="EUTxO.html#4852" class="Bound">tx</a> <a id="4880" href="EUTxO.html#4855" class="Bound">s</a> <a id="4882" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌋</a>

<a id="checkTx"></a><a id="4885" href="EUTxO.html#4885" class="Function">checkTx</a> <a id="4893" class="Symbol">:</a> <a id="4895" href="EUTxO.html#793" class="Record">TxInfo</a> <a id="4902" class="Symbol">→</a> <a id="4904" href="EUTxO.html#190" class="Function">Slot</a> <a id="4909" class="Symbol">→</a> <a id="4911" href="EUTxO.html#3113" class="Function">UTxO</a> <a id="4916" class="Symbol">→</a> <a id="4918" href="EUTxO.html#1397" class="Record">Tx</a> <a id="4921" class="Symbol">→</a> <a id="4923" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="4928" href="EUTxO.html#4885" class="Function">checkTx</a> <a id="4936" href="EUTxO.html#4936" class="Bound">txi</a> <a id="4940" href="EUTxO.html#4940" class="Bound">slot</a> <a id="4945" href="EUTxO.html#4945" class="Bound">s</a> <a id="4947" href="EUTxO.html#4947" class="Bound">tx</a> <a id="4950" class="Keyword">with</a> <a id="4955" href="EUTxO.html#4747" class="Postulate">isValidTx?</a> <a id="4966" href="EUTxO.html#4940" class="Bound">slot</a> <a id="4971" href="EUTxO.html#4947" class="Bound">tx</a> <a id="4974" href="EUTxO.html#4945" class="Bound">s</a>
<a id="4976" class="Symbol">...</a> <a id="4980" class="Symbol">|</a> <a id="4982" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="4985" class="Symbol">_</a>  <a id="4988" class="Symbol">=</a> <a id="4990" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="4996" class="Symbol">...</a> <a id="5000" class="Symbol">|</a> <a id="5002" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="5006" href="EUTxO.html#5006" class="Bound">valid</a> <a id="5012" class="Symbol">=</a> <a id="5014" class="Bound">txi</a> <a id="5018" href="Prelude.DecEq.Core.html#222" class="Function Operator">==</a> <a id="5021" href="EUTxO.html#2470" class="Function">mkTxInfo</a> <a id="5030" class="Bound">tx</a> <a id="5033" class="Symbol">(</a><a id="5034" href="EUTxO.html#3897" class="Function">resolved</a> <a id="5043" href="EUTxO.html#5006" class="Bound">valid</a><a id="5048" class="Symbol">)</a>

<a id="5051" class="Keyword">variable</a>
  <a id="5062" href="EUTxO.html#5062" class="Generalizable">tx</a> <a id="5065" class="Symbol">:</a> <a id="5067" href="EUTxO.html#1397" class="Record">Tx</a>
  <a id="5072" href="EUTxO.html#5072" class="Generalizable">l</a> <a id="5074" class="Symbol">:</a> <a id="5076" href="EUTxO.html#1747" class="Function">L</a>
  <a id="5080" href="EUTxO.html#5080" class="Generalizable">txi</a> <a id="5084" class="Symbol">:</a> <a id="5086" href="EUTxO.html#793" class="Record">TxInfo</a>
  <a id="5095" href="EUTxO.html#5095" class="Generalizable">slot</a> <a id="5100" class="Symbol">:</a> <a id="5102" href="EUTxO.html#190" class="Function">Slot</a>
  <a id="5109" href="EUTxO.html#5109" class="Generalizable">utxos</a> <a id="5115" href="EUTxO.html#5115" class="Generalizable">utxos′</a> <a id="5122" class="Symbol">:</a> <a id="5124" href="EUTxO.html#3113" class="Function">UTxO</a>
  <a id="5131" href="EUTxO.html#5131" class="Generalizable">v</a> <a id="5133" href="EUTxO.html#5133" class="Generalizable">v′</a> <a id="5136" href="EUTxO.html#5136" class="Generalizable">v″</a> <a id="5139" class="Symbol">:</a> <a id="5141" href="EUTxO.html#136" class="Function">Value</a>

<a id="5148" class="Comment">-- ** LEDGER small-step relation</a>
<a id="5181" class="Keyword">data</a> <a id="_⊢_—⟨_∣LEDGER⟩→_"></a><a id="5186" href="EUTxO.html#5186" class="Datatype Operator">_⊢_—⟨_∣LEDGER⟩→_</a> <a id="5203" class="Symbol">:</a> <a id="5205" href="Prelude.html#1305" class="Function">SSRel</a> <a id="5211" href="EUTxO.html#190" class="Function">Slot</a> <a id="5216" href="EUTxO.html#3113" class="Function">UTxO</a> <a id="5221" href="EUTxO.html#1397" class="Record">Tx</a> <a id="5224" class="Keyword">where</a>

  <a id="_⊢_—⟨_∣LEDGER⟩→_.ApplyTx"></a><a id="5233" href="EUTxO.html#5233" class="InductiveConstructor">ApplyTx</a> <a id="5241" class="Symbol">:</a> <a id="5243" class="Keyword">let</a> <a id="5247" href="EUTxO.html#5247" class="Bound">utxos′</a> <a id="5254" class="Symbol">=</a> <a id="5256" href="EUTxO.html#3439" class="Function">applyTx</a> <a id="5264" href="EUTxO.html#5062" class="Generalizable">tx</a> <a id="5267" href="EUTxO.html#5109" class="Generalizable">utxos</a> <a id="5273" class="Keyword">in</a>
    <a id="5280" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="5282" class="Symbol">(</a><a id="5283" href="EUTxO.html#4885" class="Function">checkTx</a> <a id="5291" href="EUTxO.html#5080" class="Generalizable">txi</a> <a id="5295" href="EUTxO.html#5095" class="Generalizable">slot</a> <a id="5300" href="EUTxO.html#5109" class="Generalizable">utxos</a> <a id="5306" href="EUTxO.html#5062" class="Generalizable">tx</a><a id="5308" class="Symbol">)</a>
    <a id="5314" href="Prelude.InferenceRules.html#13683" class="Function Operator">──────────────────────────────────</a>
    <a id="5353" href="EUTxO.html#5095" class="Generalizable">slot</a> <a id="5358" href="EUTxO.html#5186" class="Datatype Operator">⊢</a> <a id="5360" href="EUTxO.html#5109" class="Generalizable">utxos</a> <a id="5366" href="EUTxO.html#5186" class="Datatype Operator">—⟨</a> <a id="5369" href="EUTxO.html#5062" class="Generalizable">tx</a> <a id="5372" href="EUTxO.html#5186" class="Datatype Operator">∣LEDGER⟩→</a> <a id="5382" href="EUTxO.html#5247" class="Bound">utxos′</a>
</pre></body></html>