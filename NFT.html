<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>NFT</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/structured-contracts/tree/master/NFT.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="NFT.html" class="Module">NFT</a> <a id="12" class="Keyword">where</a>

<a id="19" class="Keyword">open</a> <a id="24" class="Keyword">import</a> <a id="31" href="Prelude.html" class="Module">Prelude</a>
<a id="39" class="Keyword">open</a> <a id="44" class="Keyword">import</a> <a id="51" href="EUTxO.html" class="Module">EUTxO</a>
<a id="57" class="Keyword">open</a> <a id="62" class="Keyword">import</a> <a id="69" href="Struc.html" class="Module">Struc</a>

<a id="oneT"></a><a id="76" href="NFT.html#76" class="Function">oneT</a> <a id="81" class="Symbol">:</a> <a id="83" href="EUTxO.html#79" class="Function">PolicyID</a> <a id="92" class="Symbol">→</a> <a id="94" href="EUTxO.html#93" class="Function">TokenName</a> <a id="104" class="Symbol">→</a> <a id="106" href="EUTxO.html#159" class="Function">Value</a>
<a id="112" href="NFT.html#76" class="Function">oneT</a> <a id="117" href="NFT.html#117" class="Bound">pid</a> <a id="121" href="NFT.html#121" class="Bound">tk</a> <a id="124" class="Symbol">=</a> <a id="126" href="Prelude.Maps.AsSets.html#944" class="Function">singleton</a> <a id="136" class="Symbol">(</a><a id="137" href="NFT.html#117" class="Bound">pid</a> <a id="141" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="143" href="Prelude.Maps.AsSets.html#944" class="Function">singleton</a> <a id="153" class="Symbol">(</a><a id="154" href="NFT.html#121" class="Bound">tk</a> <a id="157" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="159" class="Number">1</a><a id="160" class="Symbol">))</a>

<a id="164" class="Comment">-- assume unspent origin for non-fungibility</a>
<a id="209" class="Keyword">postulate</a> <a id="myNFTRef"></a><a id="219" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="228" class="Symbol">:</a> <a id="230" href="EUTxO.html#899" class="Record">TxOutputRef</a>

<a id="myNFTToken"></a><a id="243" href="NFT.html#243" class="Function">myNFTToken</a> <a id="254" class="Symbol">:</a> <a id="256" href="EUTxO.html#93" class="Function">TokenName</a>
<a id="266" href="NFT.html#243" class="Function">myNFTToken</a> <a id="277" class="Symbol">=</a> <a id="279" class="Number">42</a>

<a id="myNFTPolicyScript"></a><a id="283" href="NFT.html#283" class="Function">myNFTPolicyScript</a> <a id="301" class="Symbol">:</a> <a id="303" href="EUTxO.html#1609" class="Function">MintingPolicy</a>
<a id="317" href="NFT.html#283" class="Function">myNFTPolicyScript</a> <a id="335" class="Symbol">(</a><a id="336" href="NFT.html#336" class="Bound">txi</a> <a id="340" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="342" href="NFT.html#342" class="Bound">pid</a><a id="345" class="Symbol">)</a> <a id="347" class="Symbol">_</a>
  <a id="351" class="Symbol">=</a> <a id="353" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌊</a> <a id="355" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="357" class="Symbol">(</a><a id="358" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="367" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="369" class="Symbol">(</a><a id="370" href="EUTxO.html#1159" class="Field">InputInfo.outputRef</a> <a id="390" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="394" href="NFT.html#336" class="Bound">txi</a> <a id="398" class="Symbol">.</a><a id="399" href="EUTxO.html#1362" class="Field">TxInfo.inputs</a><a id="412" class="Symbol">))</a>
      <a id="421" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="423" class="Symbol">(</a><a id="424" href="Prelude.Maps.AsSets.html#3369" class="Function">filterK</a> <a id="432" class="Symbol">(</a><a id="433" href="Prelude.DecEq.Core.html#190" class="Field Operator">_≟</a> <a id="436" href="NFT.html#342" class="Bound">pid</a><a id="439" class="Symbol">)</a> <a id="441" class="Symbol">(</a><a id="442" href="NFT.html#336" class="Bound">txi</a> <a id="446" class="Symbol">.</a><a id="447" href="EUTxO.html#1427" class="Field">TxInfo.mint</a><a id="458" class="Symbol">)</a> <a id="460" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="462" href="NFT.html#76" class="Function">oneT</a> <a id="467" href="NFT.html#342" class="Bound">pid</a> <a id="471" href="NFT.html#243" class="Function">myNFTToken</a><a id="481" class="Symbol">)</a> <a id="483" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="485" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌋</a>

<a id="myNFTPolicy"></a><a id="488" href="NFT.html#488" class="Function">myNFTPolicy</a> <a id="500" class="Symbol">:</a> <a id="502" href="EUTxO.html#214" class="Function">Hash</a>
<a id="507" href="NFT.html#488" class="Function">myNFTPolicy</a> <a id="519" class="Symbol">=</a> <a id="521" href="NFT.html#283" class="Function">myNFTPolicyScript</a> <a id="539" href="EUTxO.html#570" class="Postulate Operator">♯</a>

<a id="myOneNFT"></a><a id="542" href="NFT.html#542" class="Function">myOneNFT</a> <a id="551" class="Symbol">:</a> <a id="553" href="EUTxO.html#159" class="Function">Value</a>
<a id="559" href="NFT.html#542" class="Function">myOneNFT</a> <a id="568" class="Symbol">=</a> <a id="570" href="NFT.html#76" class="Function">oneT</a> <a id="575" href="NFT.html#488" class="Function">myNFTPolicy</a> <a id="587" href="NFT.html#243" class="Function">myNFTToken</a>

<a id="filterNFT"></a><a id="599" href="NFT.html#599" class="Function">filterNFT</a> <a id="609" class="Symbol">:</a> <a id="611" href="Algebra.Core.html#484" class="Function">Op₁</a> <a id="615" href="EUTxO.html#159" class="Function">Value</a>
<a id="621" href="NFT.html#599" class="Function">filterNFT</a> <a id="631" class="Symbol">=</a> <a id="633" href="Prelude.Maps.AsSets.html#3369" class="Function">filterK</a> <a id="641" class="Symbol">(</a><a id="642" href="Prelude.DecEq.Core.html#190" class="Field Operator">_≟</a> <a id="645" href="NFT.html#488" class="Function">myNFTPolicy</a><a id="656" class="Symbol">)</a>

<a id="659" class="Keyword">data</a> <a id="_⊢_—⟨_∣NFT⟩→_"></a><a id="664" href="NFT.html#664" class="Datatype Operator">_⊢_—⟨_∣NFT⟩→_</a> <a id="678" class="Symbol">:</a> <a id="680" href="Prelude.html#2479" class="Function">SSRel</a> <a id="686" href="Agda.Builtin.Unit.html#158" class="Record">⊤</a> <a id="688" href="EUTxO.html#159" class="Function">Value</a> <a id="694" href="EUTxO.html#1880" class="Record">Tx</a> <a id="697" class="Keyword">where</a>
  <a id="_⊢_—⟨_∣NFT⟩→_.UpdateNFTTotal"></a><a id="705" href="NFT.html#705" class="InductiveConstructor">UpdateNFTTotal</a> <a id="720" class="Symbol">:</a>
    <a id="726" class="Keyword">let</a>
      <a id="736" href="NFT.html#736" class="Bound">i</a> <a id="738" class="Symbol">:</a> <a id="740" href="EUTxO.html#159" class="Function">Value</a>
      <a id="752" href="NFT.html#736" class="Bound">i</a>  <a id="755" class="Symbol">=</a> <a id="757" href="NFT.html#599" class="Function">filterNFT</a> <a id="767" class="Symbol">(</a><a id="768" href="EUTxO.html#2132" class="Generalizable">tx</a> <a id="771" class="Symbol">.</a><a id="772" href="EUTxO.html#1969" class="Field">mint</a><a id="776" class="Symbol">)</a>
      <a id="784" href="NFT.html#784" class="Bound">v′</a> <a id="787" class="Symbol">:</a> <a id="789" href="EUTxO.html#159" class="Function">Value</a>
      <a id="801" href="NFT.html#784" class="Bound">v′</a> <a id="804" class="Symbol">=</a> <a id="806" href="EUTxO.html#288" class="Generalizable">v</a> <a id="808" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="810" href="NFT.html#736" class="Bound">i</a>
    <a id="816" class="Keyword">in</a>

    <a id="824" href="NFT.html#784" class="Bound">v′</a> <a id="827" href="Prelude.Maps.AsSets.html#5651" class="Function Operator">≤ᵐ</a> <a id="830" href="NFT.html#542" class="Function">myOneNFT</a>
    <a id="843" href="Prelude.InferenceRules.html#13287" class="Function Operator">───────────────────────────────────────────</a>
    <a id="891" class="Symbol">_</a> <a id="893" href="NFT.html#664" class="Datatype Operator">⊢</a> <a id="895" href="EUTxO.html#288" class="Generalizable">v</a> <a id="897" href="NFT.html#664" class="Datatype Operator">—⟨</a> <a id="900" href="EUTxO.html#2132" class="Generalizable">tx</a> <a id="903" href="NFT.html#664" class="Datatype Operator">∣NFT⟩→</a> <a id="910" href="NFT.html#784" class="Bound">v′</a>

<a id="914" href="NFT.html#914" class="Function">_</a> <a id="916" class="Symbol">:</a> <a id="918" href="Struc.html#91" class="Record">StrucSimulation</a> <a id="934" href="EUTxO.html#159" class="Function">Value</a> <a id="940" href="EUTxO.html#1880" class="Record">Tx</a> <a id="943" href="NFT.html#664" class="Datatype Operator">_⊢_—⟨_∣NFT⟩→_</a>
<a id="957" class="Symbol">_</a> <a id="959" class="Symbol">=</a> <a id="961" class="Keyword">record</a> <a id="968" class="Symbol">{</a> <a id="970" href="Struc.html#168" class="Field">πˢ</a> <a id="973" class="Symbol">=</a> <a id="975" href="NFT.html#1061" class="Function">π</a> <a id="977" class="Symbol">;</a> <a id="979" href="Struc.html#192" class="Field">πⁱ</a> <a id="982" class="Symbol">=</a> <a id="984" href="Function.Base.html#624" class="Function">id</a> <a id="987" class="Symbol">;</a> <a id="989" href="Struc.html#350" class="Field">simulates</a> <a id="999" class="Symbol">=</a> <a id="1001" href="NFT.html#2381" class="Function">sim</a> <a id="1005" class="Symbol">}</a>
  <a id="1009" class="Keyword">where</a>
  <a id="1017" class="Keyword">open</a> <a id="1022" href="Relation.Binary.PropositionalEquality.Core.html#2717" class="Module">≡-Reasoning</a>

  <a id="1037" class="Comment">-- * state projection</a>
  <a id="1061" href="NFT.html#1061" class="Function">π</a> <a id="1063" class="Symbol">:</a> <a id="1065" href="EUTxO.html#3354" class="Function">UTxO</a> <a id="1070" class="Symbol">→</a> <a id="1072" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="1078" href="EUTxO.html#159" class="Function">Value</a>
  <a id="1086" href="NFT.html#1061" class="Function">π</a> <a id="1088" href="NFT.html#1088" class="Bound">utxos</a> <a id="1094" class="Symbol">=</a> <a id="1096" class="Keyword">let</a> <a id="1100" href="NFT.html#1100" class="Bound">s</a> <a id="1102" class="Symbol">=</a> <a id="1104" href="NFT.html#599" class="Function">filterNFT</a> <a id="1114" class="Symbol">(</a><a id="1115" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="1118" href="NFT.html#1088" class="Bound">utxos</a><a id="1123" class="Symbol">)</a> <a id="1125" class="Keyword">in</a>
    <a id="1132" href="Data.Bool.Base.html#1292" class="Function Operator">if</a> <a id="1135" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌊</a> <a id="1137" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="1139" class="Symbol">((</a><a id="1141" href="NFT.html#1100" class="Bound">s</a> <a id="1143" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1145" href="NFT.html#542" class="Function">myOneNFT</a><a id="1153" class="Symbol">)</a> <a id="1155" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1157" class="Symbol">(</a><a id="1158" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="1167" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="1170" href="NFT.html#1088" class="Bound">utxos</a><a id="1175" class="Symbol">))</a> <a id="1178" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="1180" class="Symbol">(</a><a id="1181" href="NFT.html#1100" class="Bound">s</a> <a id="1183" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1185" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a><a id="1186" class="Symbol">)</a> <a id="1188" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="1190" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌋</a> <a id="1192" href="Data.Bool.Base.html#1292" class="Function Operator">then</a>
      <a id="1203" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="1208" href="NFT.html#1100" class="Bound">s</a>
    <a id="1214" href="Data.Bool.Base.html#1292" class="Function Operator">else</a>
      <a id="1225" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>

  <a id="1236" class="Comment">-- Assume reminting protection</a>
  <a id="1269" class="Keyword">postulate</a>
    <a id="1283" href="NFT.html#1283" class="Postulate">remintingProtection</a> <a id="1303" class="Symbol">:</a>
      <a id="1311" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="1313" href="EUTxO.html#306" class="Generalizable">slot</a> <a id="1318" href="EUTxO.html#6443" class="Datatype Operator">⊢</a> <a id="1320" href="EUTxO.html#3400" class="Generalizable">utxos</a> <a id="1326" href="EUTxO.html#6443" class="Datatype Operator">—⟨</a> <a id="1329" href="EUTxO.html#2132" class="Generalizable">tx</a> <a id="1332" href="EUTxO.html#6443" class="Datatype Operator">∣LEDGER⟩→</a> <a id="1342" href="EUTxO.html#3406" class="Generalizable">utxos′</a>
      <a id="1355" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="1357" class="Symbol">(</a><a id="1358" href="NFT.html#1061" class="Function">π</a> <a id="1360" href="EUTxO.html#3400" class="Generalizable">utxos</a> <a id="1366" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1368" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="1373" href="NFT.html#542" class="Function">myOneNFT</a><a id="1381" class="Symbol">)</a> <a id="1383" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="1385" class="Symbol">(</a><a id="1386" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="1395" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="1397" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="1408" href="EUTxO.html#2132" class="Generalizable">tx</a><a id="1410" class="Symbol">)</a>
        <a id="1420" href="Prelude.InferenceRules.html#12693" class="Function Operator">──────────────────────────────────────────────────────</a>
        <a id="1483" href="EUTxO.html#2132" class="Generalizable">tx</a> <a id="1486" href="EUTxO.html#570" class="Postulate Operator">♯</a> <a id="1488" href="Relation.Binary.PropositionalEquality.Core.html#839" class="Function Operator">≢</a> <a id="1490" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="1499" class="Symbol">.</a><a id="1500" href="EUTxO.html#959" class="Field">txId</a>

  <a id="1508" class="Comment">-- * lemmas about state projection</a>
  <a id="1545" href="NFT.html#1545" class="Function">π-ok</a> <a id="1550" class="Symbol">:</a> <a id="1552" class="Keyword">let</a> <a id="1556" href="NFT.html#1556" class="Bound">s</a> <a id="1558" class="Symbol">=</a> <a id="1560" href="NFT.html#599" class="Function">filterNFT</a> <a id="1570" class="Symbol">(</a><a id="1571" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="1574" href="EUTxO.html#3400" class="Generalizable">utxos</a><a id="1579" class="Symbol">)</a> <a id="1581" class="Keyword">in</a>
    <a id="1588" class="Symbol">((</a><a id="1590" href="NFT.html#1556" class="Bound">s</a> <a id="1592" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1594" href="NFT.html#542" class="Function">myOneNFT</a><a id="1602" class="Symbol">)</a> <a id="1604" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1606" class="Symbol">(</a><a id="1607" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="1616" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="1619" href="EUTxO.html#3400" class="Generalizable">utxos</a><a id="1624" class="Symbol">))</a> <a id="1627" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="1629" class="Symbol">(</a><a id="1630" href="NFT.html#1556" class="Bound">s</a> <a id="1632" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1634" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a><a id="1635" class="Symbol">)</a>
    <a id="1641" href="Prelude.InferenceRules.html#68927" class="Function Operator">═══════════════════════════════════════════════════</a>
    <a id="1697" href="NFT.html#1061" class="Function">π</a> <a id="1699" href="EUTxO.html#3400" class="Generalizable">utxos</a> <a id="1705" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1707" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="1712" href="NFT.html#1556" class="Bound">s</a>
  <a id="1716" href="NFT.html#1545" class="Function">π-ok</a> <a id="1721" class="Symbol">{</a><a id="1722" href="NFT.html#1722" class="Bound">utxos</a><a id="1727" class="Symbol">}</a> <a id="1729" class="Symbol">=</a> <a id="1731" href="NFT.html#1840" class="Function">↝</a> <a id="1733" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1735" href="NFT.html#2004" class="Function">↜</a>
    <a id="1741" class="Keyword">where</a>
    <a id="1751" href="NFT.html#1751" class="Function">s</a>  <a id="1754" class="Symbol">=</a> <a id="1756" href="NFT.html#599" class="Function">filterNFT</a> <a id="1766" class="Symbol">(</a><a id="1767" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="1770" href="NFT.html#1722" class="Bound">utxos</a><a id="1775" class="Symbol">)</a>
    <a id="1781" href="NFT.html#1781" class="Function">Ps</a> <a id="1784" class="Symbol">=</a> <a id="1786" class="Symbol">((</a><a id="1788" href="NFT.html#1751" class="Function">s</a> <a id="1790" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1792" href="NFT.html#542" class="Function">myOneNFT</a><a id="1800" class="Symbol">)</a> <a id="1802" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1804" class="Symbol">(</a><a id="1805" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="1814" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="1817" href="NFT.html#1722" class="Bound">utxos</a><a id="1822" class="Symbol">))</a> <a id="1825" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="1827" class="Symbol">(</a><a id="1828" href="NFT.html#1751" class="Function">s</a> <a id="1830" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1832" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a><a id="1833" class="Symbol">)</a>

    <a id="1840" href="NFT.html#1840" class="Function">↝</a> <a id="1842" class="Symbol">:</a> <a id="1844" href="NFT.html#1781" class="Function">Ps</a> <a id="1847" class="Symbol">→</a> <a id="1849" href="NFT.html#1061" class="Function">π</a> <a id="1851" href="NFT.html#1722" class="Bound">utxos</a> <a id="1857" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1859" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="1864" href="NFT.html#1751" class="Function">s</a>
    <a id="1870" href="NFT.html#1840" class="Function">↝</a> <a id="1872" href="NFT.html#1872" class="Bound">p</a> <a id="1874" class="Keyword">with</a> <a id="1879" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="1881" href="NFT.html#1781" class="Function">Ps</a> <a id="1884" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a>
    <a id="1890" class="Symbol">...</a> <a id="1894" class="Symbol">|</a> <a id="1896" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="1899" href="NFT.html#1899" class="Bound">¬p</a> <a id="1902" class="Symbol">=</a> <a id="1904" href="Data.Empty.html#637" class="Function">⊥-elim</a> <a id="1911" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="1913" href="NFT.html#1899" class="Bound">¬p</a> <a id="1916" class="Bound">p</a>
    <a id="1922" class="Symbol">...</a> <a id="1926" class="Symbol">|</a> <a id="1928" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="1932" class="Symbol">_</a> <a id="1934" class="Symbol">=</a> <a id="1936" href="Prelude.General.html#4849" class="Function">if-true</a> <a id="1944" class="Symbol">{</a><a id="1945" class="Argument">b</a> <a id="1947" class="Symbol">=</a> <a id="1949" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌊</a> <a id="1951" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="1953" href="NFT.html#1781" class="Function">Ps</a> <a id="1956" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="1958" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌋</a><a id="1959" class="Symbol">}</a> <a id="1961" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="1963" href="Prelude.General.html#4148" class="Function">T⇒true</a> <a id="1970" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="1972" href="Relation.Nullary.Decidable.Core.html#1662" class="Function">fromWitness</a> <a id="1984" class="Symbol">{</a><a id="1985" class="Argument">Q</a> <a id="1987" class="Symbol">=</a> <a id="1989" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="1991" href="NFT.html#1781" class="Function">Ps</a> <a id="1994" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a><a id="1995" class="Symbol">}</a> <a id="1997" class="Bound">p</a>

    <a id="2004" href="NFT.html#2004" class="Function">↜</a> <a id="2006" class="Symbol">:</a> <a id="2008" href="NFT.html#1061" class="Function">π</a> <a id="2010" href="NFT.html#1722" class="Bound">utxos</a> <a id="2016" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2018" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2023" href="NFT.html#1751" class="Function">s</a> <a id="2025" class="Symbol">→</a> <a id="2027" href="NFT.html#1781" class="Function">Ps</a>
    <a id="2034" href="NFT.html#2004" class="Function">↜</a> <a id="2036" href="NFT.html#2036" class="Bound">π≡</a> <a id="2039" class="Keyword">with</a> <a id="2044" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="2046" href="NFT.html#1781" class="Function">Ps</a> <a id="2049" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="2051" class="Symbol">|</a> <a id="2053" href="NFT.html#2036" class="Bound">π≡</a>
    <a id="2060" class="Symbol">...</a> <a id="2064" class="Symbol">|</a> <a id="2066" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="2070" href="NFT.html#2070" class="Bound">p</a> <a id="2072" class="Symbol">|</a> <a id="2074" class="Symbol">_</a> <a id="2076" class="Symbol">=</a> <a id="2078" href="NFT.html#2070" class="Bound">p</a>

  <a id="2083" href="NFT.html#2083" class="Function">π≡just</a> <a id="2090" class="Symbol">:</a>
    <a id="2096" href="NFT.html#1061" class="Function">π</a> <a id="2098" href="EUTxO.html#3400" class="Generalizable">utxos</a> <a id="2104" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2106" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2111" href="EUTxO.html#288" class="Generalizable">v</a>
    <a id="2117" href="Prelude.InferenceRules.html#14057" class="Function Operator">───────────────────────</a>
    <a id="2145" href="EUTxO.html#288" class="Generalizable">v</a> <a id="2147" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2149" href="NFT.html#599" class="Function">filterNFT</a> <a id="2159" class="Symbol">(</a><a id="2160" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="2163" href="EUTxO.html#3400" class="Generalizable">utxos</a><a id="2168" class="Symbol">)</a>
  <a id="2172" href="NFT.html#2083" class="Function">π≡just</a> <a id="2179" class="Symbol">{</a><a id="2180" href="NFT.html#2180" class="Bound">utxos</a><a id="2185" class="Symbol">}</a> <a id="2187" href="NFT.html#2187" class="Bound">π≡</a>
    <a id="2194" class="Keyword">with</a> <a id="2199" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="2201" class="Symbol">(</a><a id="2202" class="Keyword">let</a> <a id="2206" href="NFT.html#2206" class="Bound">s</a> <a id="2208" class="Symbol">=</a> <a id="2210" href="NFT.html#599" class="Function">filterNFT</a> <a id="2220" class="Symbol">(</a><a id="2221" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="2224" href="NFT.html#2180" class="Bound">utxos</a><a id="2229" class="Symbol">)</a> <a id="2231" class="Keyword">in</a>
          <a id="2244" class="Symbol">((</a><a id="2246" href="NFT.html#2206" class="Bound">s</a> <a id="2248" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2250" href="NFT.html#542" class="Function">myOneNFT</a><a id="2258" class="Symbol">)</a> <a id="2260" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2262" class="Symbol">(</a><a id="2263" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="2272" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="2275" href="NFT.html#2180" class="Bound">utxos</a><a id="2280" class="Symbol">))</a> <a id="2283" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="2285" class="Symbol">(</a><a id="2286" href="NFT.html#2206" class="Bound">s</a> <a id="2288" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2290" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a><a id="2291" class="Symbol">))</a> <a id="2294" href="Prelude.Decidable.Core.html#475" class="Function Operator">¿</a> <a id="2296" class="Symbol">|</a> <a id="2298" href="NFT.html#2187" class="Bound">π≡</a>
  <a id="2303" class="Symbol">...</a> <a id="2307" class="Symbol">|</a> <a id="2309" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="2313" class="Symbol">_</a> <a id="2315" class="Symbol">|</a> <a id="2317" href="NFT.html#2317" class="Bound">just≡</a> <a id="2323" class="Symbol">=</a> <a id="2325" href="Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="2329" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="2331" href="Data.Maybe.Properties.html#946" class="Function">M.just-injective</a> <a id="2348" href="NFT.html#2317" class="Bound">just≡</a>

  <a id="2357" class="Comment">-- * simulation proof</a>
  <a id="2381" href="NFT.html#2381" class="Function">sim</a> <a id="2385" class="Symbol">:</a> <a id="2387" class="Symbol">∀</a> <a id="2389" href="NFT.html#2389" class="Bound">slot</a> <a id="2394" href="NFT.html#2394" class="Bound">Γ</a> <a id="2396" href="NFT.html#2396" class="Bound">utxos</a> <a id="2402" href="NFT.html#2402" class="Bound">v</a> <a id="2404" href="NFT.html#2404" class="Bound">tx</a> <a id="2407" href="NFT.html#2407" class="Bound">tx′</a> <a id="2411" href="NFT.html#2411" class="Bound">utxos′</a> <a id="2418" class="Symbol">→</a>
    <a id="2424" href="Prelude.InferenceRules.html#56141" class="Function Operator">∙</a> <a id="2426" href="NFT.html#2389" class="Bound">slot</a> <a id="2431" href="EUTxO.html#6443" class="Datatype Operator">⊢</a> <a id="2433" href="NFT.html#2396" class="Bound">utxos</a> <a id="2439" href="EUTxO.html#6443" class="Datatype Operator">—⟨</a> <a id="2442" href="NFT.html#2404" class="Bound">tx</a> <a id="2445" href="EUTxO.html#6443" class="Datatype Operator">∣LEDGER⟩→</a> <a id="2455" href="NFT.html#2411" class="Bound">utxos′</a>
    <a id="2466" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="2468" href="Function.Base.html#624" class="Function">id</a> <a id="2471" href="NFT.html#2404" class="Bound">tx</a> <a id="2474" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2476" href="NFT.html#2407" class="Bound">tx′</a>
    <a id="2484" href="Prelude.InferenceRules.html#56072" class="Function Operator">∙</a> <a id="2486" href="NFT.html#1061" class="Function">π</a> <a id="2488" href="NFT.html#2396" class="Bound">utxos</a> <a id="2494" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2496" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2501" href="NFT.html#2402" class="Bound">v</a>
      <a id="2509" href="Prelude.InferenceRules.html#13722" class="Function Operator">─────────────────────────────────</a>
      <a id="2549" href="Data.Product.html#1378" class="Function">∃</a> <a id="2551" class="Symbol">λ</a> <a id="2553" href="NFT.html#2553" class="Bound">v′</a> <a id="2556" class="Symbol">→</a> <a id="2558" class="Symbol">(</a><a id="2559" href="NFT.html#1061" class="Function">π</a> <a id="2561" href="NFT.html#2411" class="Bound">utxos′</a> <a id="2568" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2570" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2575" href="NFT.html#2553" class="Bound">v′</a><a id="2577" class="Symbol">)</a>
            <a id="2591" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2593" class="Symbol">(</a><a id="2594" href="NFT.html#2394" class="Bound">Γ</a> <a id="2596" href="NFT.html#664" class="Datatype Operator">⊢</a> <a id="2598" href="NFT.html#2402" class="Bound">v</a> <a id="2600" href="NFT.html#664" class="Datatype Operator">—⟨</a> <a id="2603" href="NFT.html#2407" class="Bound">tx′</a> <a id="2607" href="NFT.html#664" class="Datatype Operator">∣NFT⟩→</a> <a id="2614" href="NFT.html#2553" class="Bound">v′</a><a id="2616" class="Symbol">)</a>
  <a id="2620" href="NFT.html#2381" class="Function">sim</a> <a id="2624" href="NFT.html#2624" class="Bound">slot</a> <a id="2629" class="Symbol">_</a> <a id="2631" href="NFT.html#2631" class="Bound">utxos</a> <a id="2637" href="NFT.html#2637" class="Bound">v</a> <a id="2639" href="NFT.html#2639" class="Bound">tx</a> <a id="2642" class="DottedPattern Symbol">.</a><a id="2643" href="NFT.html#2639" class="DottedPattern Bound">tx</a> <a id="2646" href="NFT.html#2646" class="Bound">utxos′</a><a id="2652" class="Symbol">@(</a><a id="2654" class="DottedPattern Symbol">.(</a><a id="2656" href="EUTxO.html#3974" class="DottedPattern Function">applyTx</a> <a id="2664" href="NFT.html#2639" class="DottedPattern Bound">tx</a> <a id="2667" href="NFT.html#2631" class="DottedPattern Bound">utxos</a><a id="2672" class="DottedPattern Symbol">)</a><a id="2673" class="Symbol">)</a>
      <a id="2681" href="NFT.html#2681" class="Bound">LEDGER→</a><a id="2688" class="Symbol">@(</a><a id="2690" href="EUTxO.html#6490" class="InductiveConstructor">ApplyTx</a> <a id="2698" href="NFT.html#2698" class="Bound">check≡</a><a id="2704" class="Symbol">)</a> <a id="2706" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="2711" href="NFT.html#2711" class="Bound">π≡</a>
    <a id="2718" class="Keyword">with</a> <a id="2723" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> ← <a id="2730" href="NFT.html#2083" class="Function">π≡just</a> <a id="2737" class="Symbol">{</a><a id="2738" class="Argument">utxos</a> <a id="2744" class="Symbol">=</a> <a id="2746" href="NFT.html#2631" class="Bound">utxos</a><a id="2751" class="Symbol">}</a> <a id="2753" href="NFT.html#2711" class="Bound">π≡</a>
    <a id="2760" class="Symbol">=</a> <a id="2762" href="NFT.html#2825" class="Function">s′</a> <a id="2765" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2767" href="Prelude.Bifunctor.html#835" class="Field">bimap</a> <a id="2773" class="Symbol">(</a><a id="2774" href="NFT.html#1545" class="Function">π-ok</a> <a id="2779" class="Symbol">{</a><a id="2780" href="NFT.html#2646" class="Bound">utxos′</a><a id="2786" class="Symbol">}</a> <a id="2788" class="Symbol">.</a><a id="2789" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="2794" class="Symbol">)</a> <a id="2796" href="NFT.html#4312" class="Function">mkNFT→</a> <a id="2803" href="NFT.html#4496" class="Function">QED</a>
    <a id="2811" class="Keyword">where</a>
    <a id="2821" href="NFT.html#2821" class="Function">i</a> <a id="2823" href="NFT.html#2823" class="Function">s</a> <a id="2825" href="NFT.html#2825" class="Function">s′</a> <a id="2828" class="Symbol">:</a> <a id="2830" href="EUTxO.html#159" class="Function">Value</a>
    <a id="2840" href="NFT.html#2821" class="Function">i</a>  <a id="2843" class="Symbol">=</a> <a id="2845" href="NFT.html#599" class="Function">filterNFT</a> <a id="2855" class="Symbol">(</a><a id="2856" href="NFT.html#2639" class="Bound">tx</a> <a id="2859" class="Symbol">.</a><a id="2860" href="EUTxO.html#1969" class="Field">mint</a><a id="2864" class="Symbol">)</a>
    <a id="2870" href="NFT.html#2823" class="Function">s</a>  <a id="2873" class="Symbol">=</a> <a id="2875" href="NFT.html#599" class="Function">filterNFT</a> <a id="2885" class="Symbol">(</a><a id="2886" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="2889" href="NFT.html#2631" class="Bound">utxos</a><a id="2894" class="Symbol">)</a>
    <a id="2900" href="NFT.html#2825" class="Function">s′</a> <a id="2903" class="Symbol">=</a> <a id="2905" href="NFT.html#599" class="Function">filterNFT</a> <a id="2915" class="Symbol">(</a><a id="2916" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="2919" href="NFT.html#2646" class="Bound">utxos′</a><a id="2925" class="Symbol">)</a>

    <a id="2932" href="NFT.html#2932" class="Function">valid</a> <a id="2938" class="Symbol">:</a> <a id="2940" href="EUTxO.html#4140" class="Record">IsValidTx</a> <a id="2950" href="NFT.html#2624" class="Bound">slot</a> <a id="2955" href="NFT.html#2639" class="Bound">tx</a> <a id="2958" href="NFT.html#2631" class="Bound">utxos</a>
    <a id="2968" href="NFT.html#2932" class="Function">valid</a> <a id="2974" class="Symbol">=</a> <a id="2976" href="Relation.Nullary.Decidable.Core.html#1493" class="Function">toWitness</a> <a id="2986" href="NFT.html#2698" class="Bound">check≡</a>

    <a id="2998" href="NFT.html#2998" class="Function">s′≡s∪i</a> <a id="3005" class="Symbol">:</a> <a id="3007" href="NFT.html#2825" class="Function">s′</a> <a id="3010" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3012" href="NFT.html#2823" class="Function">s</a> <a id="3014" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3016" href="NFT.html#2821" class="Function">i</a>
    <a id="3022" href="NFT.html#2998" class="Function">s′≡s∪i</a> <a id="3029" class="Symbol">=</a>
      <a id="3037" href="Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
        <a id="3051" href="NFT.html#2825" class="Function">s′</a>
      <a id="3060" href="Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
        <a id="3072" href="NFT.html#599" class="Function">filterNFT</a> <a id="3082" class="Symbol">(</a><a id="3083" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3086" href="NFT.html#2646" class="Bound">utxos′</a><a id="3092" class="Symbol">)</a>
      <a id="3100" href="Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
        <a id="3112" href="NFT.html#599" class="Function">filterNFT</a> <a id="3122" class="Symbol">(</a><a id="3123" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3126" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="3128" href="EUTxO.html#3974" class="Function">applyTx</a> <a id="3136" href="NFT.html#2639" class="Bound">tx</a> <a id="3139" href="NFT.html#2631" class="Bound">utxos</a><a id="3144" class="Symbol">)</a>
      <a id="3152" href="Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
        <a id="3164" href="NFT.html#599" class="Function">filterNFT</a> <a id="3174" class="Symbol">(</a><a id="3175" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3178" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="3180" class="Symbol">(</a><a id="3181" href="NFT.html#2631" class="Bound">utxos</a> <a id="3187" href="Prelude.html#1432" class="Function Operator">─ᵏˢ</a> <a id="3191" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="3202" href="NFT.html#2639" class="Bound">tx</a><a id="3204" class="Symbol">)</a> <a id="3206" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3208" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="3215" href="NFT.html#2639" class="Bound">tx</a><a id="3217" class="Symbol">)</a>
      <a id="3225" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="3228" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="3233" href="NFT.html#599" class="Function">filterNFT</a> <a id="3243" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="3245" href="EUTxO.html#3825" class="Postulate">∑ᵐ-∪</a> <a id="3250" class="Symbol">{</a><a id="3251" href="NFT.html#2631" class="Bound">utxos</a> <a id="3257" href="Prelude.html#1432" class="Function Operator">─ᵏˢ</a> <a id="3261" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="3272" href="NFT.html#2639" class="Bound">tx</a><a id="3274" class="Symbol">}{</a><a id="3276" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="3283" href="NFT.html#2639" class="Bound">tx</a><a id="3285" class="Symbol">}</a> <a id="3287" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="3297" href="NFT.html#599" class="Function">filterNFT</a> <a id="3307" class="Symbol">(</a><a id="3308" href="NFT.html#4268" class="Function">∑utxos─</a> <a id="3316" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3318" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3321" class="Symbol">(</a><a id="3322" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="3329" href="NFT.html#2639" class="Bound">tx</a><a id="3331" class="Symbol">))</a>
      <a id="3340" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="3343" href="Prelude.html#2127" class="Postulate">filter-∪</a> <a id="3352" class="Symbol">(</a><a id="3353" href="Prelude.DecEq.Core.html#190" class="Field Operator">_≟</a> <a id="3356" href="NFT.html#488" class="Function">myNFTPolicy</a><a id="3367" class="Symbol">)</a> <a id="3369" class="Symbol">{</a><a id="3370" href="NFT.html#4268" class="Function">∑utxos─</a><a id="3377" class="Symbol">}{</a><a id="3379" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3382" class="Symbol">(</a><a id="3383" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="3390" href="NFT.html#2639" class="Bound">tx</a><a id="3392" class="Symbol">)}</a> <a id="3395" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="3405" href="NFT.html#599" class="Function">filterNFT</a> <a id="3415" href="NFT.html#4268" class="Function">∑utxos─</a> <a id="3423" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3425" href="NFT.html#599" class="Function">filterNFT</a> <a id="3435" class="Symbol">(</a><a id="3436" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="3439" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="3441" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="3448" href="NFT.html#2639" class="Bound">tx</a><a id="3450" class="Symbol">)</a>
      <a id="3458" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="3461" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="3466" class="Symbol">(λ</a> <a id="3469" href="NFT.html#3469" class="Bound">◆</a> <a id="3471" class="Symbol">→</a> <a id="3473" href="NFT.html#599" class="Function">filterNFT</a> <a id="3483" href="NFT.html#4268" class="Function">∑utxos─</a> <a id="3491" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3493" href="NFT.html#599" class="Function">filterNFT</a> <a id="3503" href="NFT.html#3469" class="Bound">◆</a><a id="3504" class="Symbol">)</a> <a id="3506" class="Symbol">(</a><a id="3507" href="EUTxO.html#5719" class="Function">∑utxoTx≡</a> <a id="3516" href="NFT.html#2932" class="Function">valid</a><a id="3521" class="Symbol">)</a> <a id="3523" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="3533" href="NFT.html#599" class="Function">filterNFT</a> <a id="3543" href="NFT.html#4268" class="Function">∑utxos─</a> <a id="3551" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3553" href="NFT.html#599" class="Function">filterNFT</a> <a id="3563" class="Symbol">(</a><a id="3564" href="NFT.html#2639" class="Bound">tx</a> <a id="3567" class="Symbol">.</a><a id="3568" href="EUTxO.html#1969" class="Field">mint</a> <a id="3573" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3575" href="NFT.html#4201" class="Function">∑rins</a><a id="3580" class="Symbol">)</a>
      <a id="3588" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="3591" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="3596" class="Symbol">(</a><a id="3597" href="NFT.html#599" class="Function">filterNFT</a> <a id="3607" href="NFT.html#4268" class="Function">∑utxos─</a> <a id="3615" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪_</a><a id="3617" class="Symbol">)</a> <a id="3619" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="3621" href="Prelude.html#2127" class="Postulate">filter-∪</a> <a id="3630" class="Symbol">(</a><a id="3631" href="Prelude.DecEq.Core.html#190" class="Field Operator">_≟</a> <a id="3634" href="NFT.html#488" class="Function">myNFTPolicy</a><a id="3645" class="Symbol">)</a> <a id="3647" class="Symbol">{</a><a id="3648" href="NFT.html#2639" class="Bound">tx</a> <a id="3651" class="Symbol">.</a><a id="3652" href="EUTxO.html#1969" class="Field">mint</a><a id="3656" class="Symbol">}{</a><a id="3658" href="NFT.html#4201" class="Function">∑rins</a><a id="3663" class="Symbol">}</a> <a id="3665" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="3675" href="NFT.html#599" class="Function">filterNFT</a> <a id="3685" href="NFT.html#4268" class="Function">∑utxos─</a> <a id="3693" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3695" href="NFT.html#599" class="Function">filterNFT</a> <a id="3705" class="Symbol">(</a><a id="3706" href="NFT.html#2639" class="Bound">tx</a> <a id="3709" class="Symbol">.</a><a id="3710" href="EUTxO.html#1969" class="Field">mint</a><a id="3714" class="Symbol">)</a> <a id="3716" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3718" href="NFT.html#599" class="Function">filterNFT</a> <a id="3728" href="NFT.html#4201" class="Function">∑rins</a>
      <a id="3740" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="3743" href="Prelude.html#1732" class="Postulate">∪-reassoc</a> <a id="3753" class="Symbol">{</a><a id="3754" class="Argument">m</a> <a id="3756" class="Symbol">=</a> <a id="3758" href="NFT.html#599" class="Function">filterNFT</a> <a id="3768" href="NFT.html#4268" class="Function">∑utxos─</a><a id="3775" class="Symbol">}{</a><a id="3777" href="NFT.html#599" class="Function">filterNFT</a> <a id="3787" class="Symbol">(</a><a id="3788" href="NFT.html#2639" class="Bound">tx</a> <a id="3791" class="Symbol">.</a><a id="3792" href="EUTxO.html#1969" class="Field">mint</a><a id="3796" class="Symbol">)}{</a><a id="3799" href="NFT.html#599" class="Function">filterNFT</a> <a id="3809" href="NFT.html#4201" class="Function">∑rins</a><a id="3814" class="Symbol">}</a> <a id="3816" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="3826" class="Symbol">(</a><a id="3827" href="NFT.html#599" class="Function">filterNFT</a> <a id="3837" href="NFT.html#4268" class="Function">∑utxos─</a> <a id="3845" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3847" href="NFT.html#599" class="Function">filterNFT</a> <a id="3857" href="NFT.html#4201" class="Function">∑rins</a><a id="3862" class="Symbol">)</a> <a id="3864" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="3866" href="NFT.html#599" class="Function">filterNFT</a> <a id="3876" class="Symbol">(</a><a id="3877" href="NFT.html#2639" class="Bound">tx</a> <a id="3880" class="Symbol">.</a><a id="3881" href="EUTxO.html#1969" class="Field">mint</a><a id="3885" class="Symbol">)</a>
      <a id="3893" href="Relation.Binary.PropositionalEquality.Core.html#3019" class="Function">≡˘⟨</a> <a id="3897" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="3902" class="Symbol">(</a><a id="3903" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">_∪</a> <a id="3906" href="NFT.html#599" class="Function">filterNFT</a> <a id="3916" class="Symbol">(</a><a id="3917" href="NFT.html#2639" class="Bound">tx</a> <a id="3920" class="Symbol">.</a><a id="3921" href="EUTxO.html#1969" class="Field">mint</a><a id="3925" class="Symbol">))</a> <a id="3928" class="Symbol">(</a><a id="3929" href="Prelude.html#2127" class="Postulate">filter-∪</a> <a id="3938" class="Symbol">(</a><a id="3939" href="Prelude.DecEq.Core.html#190" class="Field Operator">_≟</a> <a id="3942" href="NFT.html#488" class="Function">myNFTPolicy</a><a id="3953" class="Symbol">)</a> <a id="3955" class="Symbol">{</a><a id="3956" href="NFT.html#4268" class="Function">∑utxos─</a><a id="3963" class="Symbol">}{</a><a id="3965" href="NFT.html#4201" class="Function">∑rins</a><a id="3970" class="Symbol">})</a> <a id="3973" href="Relation.Binary.PropositionalEquality.Core.html#3019" class="Function">⟩</a>
        <a id="3983" href="NFT.html#599" class="Function">filterNFT</a> <a id="3993" class="Symbol">(</a><a id="3994" href="NFT.html#4268" class="Function">∑utxos─</a> <a id="4002" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="4004" href="NFT.html#4201" class="Function">∑rins</a><a id="4009" class="Symbol">)</a> <a id="4011" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="4013" href="NFT.html#599" class="Function">filterNFT</a> <a id="4023" class="Symbol">(</a><a id="4024" href="NFT.html#2639" class="Bound">tx</a> <a id="4027" class="Symbol">.</a><a id="4028" href="EUTxO.html#1969" class="Field">mint</a><a id="4032" class="Symbol">)</a>
      <a id="4040" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="4043" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="4048" class="Symbol">(</a><a id="4049" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">_∪</a> <a id="4052" href="NFT.html#599" class="Function">filterNFT</a> <a id="4062" class="Symbol">(</a><a id="4063" href="NFT.html#2639" class="Bound">tx</a> <a id="4066" class="Symbol">.</a><a id="4067" href="EUTxO.html#1969" class="Field">mint</a><a id="4071" class="Symbol">))</a> <a id="4074" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="4076" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="4081" href="NFT.html#599" class="Function">filterNFT</a> <a id="4091" class="Symbol">(</a><a id="4092" href="EUTxO.html#6034" class="Postulate">∑utxos─∪≡</a> <a id="4102" href="NFT.html#2932" class="Function">valid</a><a id="4107" class="Symbol">)</a> <a id="4109" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="4119" href="NFT.html#599" class="Function">filterNFT</a> <a id="4129" class="Symbol">(</a><a id="4130" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="4133" href="NFT.html#2631" class="Bound">utxos</a><a id="4138" class="Symbol">)</a> <a id="4140" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="4142" href="NFT.html#599" class="Function">filterNFT</a> <a id="4152" class="Symbol">(</a><a id="4153" href="NFT.html#2639" class="Bound">tx</a> <a id="4156" class="Symbol">.</a><a id="4157" href="EUTxO.html#1969" class="Field">mint</a><a id="4161" class="Symbol">)</a>
      <a id="4169" href="Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
        <a id="4181" href="NFT.html#2823" class="Function">s</a> <a id="4183" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="4185" href="NFT.html#2821" class="Function">i</a>
      <a id="4193" href="Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a> <a id="4195" class="Keyword">where</a> <a id="4201" href="NFT.html#4201" class="Function">∑rins</a>   <a id="4209" class="Symbol">=</a> <a id="4211" href="EUTxO.html#623" class="Function">∑</a> <a id="4213" class="Symbol">(</a><a id="4214" href="EUTxO.html#734" class="Field">value</a> <a id="4220" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="4222" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="4228" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="4232" href="EUTxO.html#4543" class="Function">resolvedInputs</a> <a id="4247" href="NFT.html#2932" class="Function">valid</a><a id="4252" class="Symbol">)</a>
              <a id="4268" href="NFT.html#4268" class="Function">∑utxos─</a> <a id="4276" class="Symbol">=</a> <a id="4278" href="EUTxO.html#3768" class="Function">∑ᵐ</a> <a id="4281" class="Symbol">(</a><a id="4282" href="NFT.html#2631" class="Bound">utxos</a> <a id="4288" href="Prelude.html#1432" class="Function Operator">─ᵏˢ</a> <a id="4292" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="4303" href="NFT.html#2639" class="Bound">tx</a><a id="4305" class="Symbol">)</a>

    <a id="4312" href="NFT.html#4312" class="Function">mkNFT→</a> <a id="4319" class="Symbol">:</a> <a id="4321" href="NFT.html#2825" class="Function">s′</a> <a id="4324" href="Prelude.Maps.AsSets.html#5651" class="Function Operator">≤ᵐ</a> <a id="4327" href="NFT.html#542" class="Function">myOneNFT</a> <a id="4336" class="Symbol">→</a> <a id="4338" class="Symbol">(_</a> <a id="4341" href="NFT.html#664" class="Datatype Operator">⊢</a> <a id="4343" href="NFT.html#2823" class="Function">s</a> <a id="4345" href="NFT.html#664" class="Datatype Operator">—⟨</a> <a id="4348" href="NFT.html#2639" class="Bound">tx</a> <a id="4351" href="NFT.html#664" class="Datatype Operator">∣NFT⟩→</a> <a id="4358" href="NFT.html#2825" class="Function">s′</a><a id="4360" class="Symbol">)</a>
    <a id="4366" href="NFT.html#4312" class="Function">mkNFT→</a> <a id="4373" href="NFT.html#4373" class="Bound">p</a> <a id="4375" class="Symbol">=</a> <a id="4377" href="Relation.Binary.PropositionalEquality.Core.html#1789" class="Function">subst</a> <a id="4383" class="Symbol">(_</a> <a id="4386" href="NFT.html#664" class="Datatype Operator">⊢</a> <a id="4388" href="NFT.html#2823" class="Function">s</a> <a id="4390" href="NFT.html#664" class="Datatype Operator">—⟨</a> <a id="4393" href="NFT.html#2639" class="Bound">tx</a> <a id="4396" href="NFT.html#664" class="Datatype Operator">∣NFT⟩→_</a><a id="4403" class="Symbol">)</a> <a id="4405" class="Symbol">(</a><a id="4406" href="Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="4410" href="NFT.html#2998" class="Function">s′≡s∪i</a><a id="4416" class="Symbol">)</a>
            <a id="4430" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="4432" href="NFT.html#705" class="InductiveConstructor">UpdateNFTTotal</a>
            <a id="4459" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="4461" href="Relation.Binary.PropositionalEquality.Core.html#1789" class="Function">subst</a> <a id="4467" class="Symbol">(</a><a id="4468" href="Prelude.Maps.AsSets.html#5651" class="Function Operator">_≤ᵐ</a> <a id="4472" href="NFT.html#542" class="Function">myOneNFT</a><a id="4480" class="Symbol">)</a> <a id="4482" href="NFT.html#2998" class="Function">s′≡s∪i</a> <a id="4489" href="NFT.html#4373" class="Bound">p</a>

    <a id="4496" href="NFT.html#4496" class="Function">QED</a> <a id="4500" class="Symbol">:</a> <a id="4502" class="Symbol">(</a> <a id="4504" class="Symbol">((</a><a id="4506" href="NFT.html#2825" class="Function">s′</a> <a id="4509" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4511" href="NFT.html#542" class="Function">myOneNFT</a><a id="4519" class="Symbol">)</a> <a id="4521" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="4523" class="Symbol">(</a><a id="4524" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="4533" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="4536" href="NFT.html#2646" class="Bound">utxos′</a><a id="4542" class="Symbol">))</a>
          <a id="4555" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="4557" class="Symbol">(</a><a id="4558" href="NFT.html#2825" class="Function">s′</a> <a id="4561" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4563" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a><a id="4564" class="Symbol">)</a> <a id="4566" class="Symbol">)</a>
        <a id="4576" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="4578" class="Symbol">(</a><a id="4579" href="NFT.html#2825" class="Function">s′</a> <a id="4582" href="Prelude.Maps.AsSets.html#5651" class="Function Operator">≤ᵐ</a> <a id="4585" href="NFT.html#542" class="Function">myOneNFT</a><a id="4593" class="Symbol">)</a>
    <a id="4599" href="NFT.html#4496" class="Function">QED</a> <a id="4603" class="Symbol">=</a>
      <a id="4611" href="Function.Base.html#4130" class="Function Operator">case</a> <a id="4616" href="NFT.html#2821" class="Function">i</a> <a id="4618" href="Prelude.DecEq.Core.html#190" class="Field Operator">≟</a> <a id="4620" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a> <a id="4622" href="Function.Base.html#4130" class="Function Operator">of</a> <a id="4625" class="Symbol">λ</a> <a id="4627" class="Keyword">where</a>
      <a id="4639" class="Symbol">(</a><a id="4640" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="4644" href="NFT.html#4644" class="Bound">i≡∅</a><a id="4647" class="Symbol">)</a> <a id="4649" class="Symbol">→</a>
        <a id="4659" class="Keyword">let</a>
          <a id="4673" href="NFT.html#4673" class="Bound">s≡s′</a> <a id="4678" class="Symbol">:</a> <a id="4680" href="NFT.html#2823" class="Function">s</a> <a id="4682" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4684" href="NFT.html#2825" class="Function">s′</a>
          <a id="4697" href="NFT.html#4673" class="Bound">s≡s′</a> <a id="4702" class="Symbol">=</a> <a id="4704" href="Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="4708" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="4710" href="Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
            <a id="4728" href="NFT.html#2825" class="Function">s′</a>    <a id="4734" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="4737" href="NFT.html#2998" class="Function">s′≡s∪i</a> <a id="4744" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
            <a id="4758" href="NFT.html#2823" class="Function">s</a> <a id="4760" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="4762" href="NFT.html#2821" class="Function">i</a> <a id="4764" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="4767" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="4772" class="Symbol">(</a><a id="4773" href="NFT.html#2823" class="Function">s</a> <a id="4775" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪_</a><a id="4777" class="Symbol">)</a> <a id="4779" href="NFT.html#4644" class="Bound">i≡∅</a> <a id="4783" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
            <a id="4797" href="NFT.html#2823" class="Function">s</a> <a id="4799" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="4801" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a> <a id="4803" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="4806" href="Prelude.html#1704" class="Postulate">∅-identityʳ</a> <a id="4818" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
            <a id="4832" href="NFT.html#2823" class="Function">s</a>     <a id="4838" href="Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
        <a id="4848" class="Keyword">in</a>
        <a id="4859" href="Function.Base.html#4130" class="Function Operator">case</a> <a id="4864" href="NFT.html#2823" class="Function">s</a> <a id="4866" href="Prelude.DecEq.Core.html#190" class="Field Operator">≟</a> <a id="4868" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a> <a id="4870" href="Function.Base.html#4130" class="Function Operator">of</a> <a id="4873" class="Symbol">λ</a> <a id="4875" class="Keyword">where</a>
        <a id="4889" class="Symbol">(</a><a id="4890" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="4894" href="NFT.html#4894" class="Bound">s≡∅</a><a id="4897" class="Symbol">)</a> <a id="4899" class="Symbol">→</a>
          <a id="4911" class="Keyword">let</a>
            <a id="4927" href="NFT.html#4927" class="Bound">s′≡∅</a> <a id="4932" class="Symbol">:</a> <a id="4934" href="NFT.html#2825" class="Function">s′</a> <a id="4937" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4939" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a>
            <a id="4953" href="NFT.html#4927" class="Bound">s′≡∅</a> <a id="4958" class="Symbol">=</a> <a id="4960" href="Relation.Binary.PropositionalEquality.Core.html#1789" class="Function">subst</a> <a id="4966" class="Symbol">(</a><a id="4967" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡</a> <a id="4970" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a><a id="4971" class="Symbol">)</a> <a id="4973" href="NFT.html#4673" class="Bound">s≡s′</a> <a id="4978" href="NFT.html#4894" class="Bound">s≡∅</a>
          <a id="4992" class="Keyword">in</a>
            <a id="5007" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="5012" href="NFT.html#4927" class="Bound">s′≡∅</a> <a id="5017" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5019" href="Prelude.html#2395" class="Postulate">⊆-∅</a> <a id="5023" class="Symbol">{</a><a id="5024" class="Argument">m′</a> <a id="5027" class="Symbol">=</a> <a id="5029" href="NFT.html#542" class="Function">myOneNFT</a><a id="5037" class="Symbol">}</a> <a id="5039" href="NFT.html#4927" class="Bound">s′≡∅</a>
        <a id="5052" class="Symbol">(</a><a id="5053" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="5056" href="NFT.html#5056" class="Bound">s≢∅</a><a id="5059" class="Symbol">)</a> <a id="5061" class="Symbol">→</a>
          <a id="5073" class="Keyword">let</a>
            <a id="5089" href="NFT.html#5089" class="Bound">Ps</a> <a id="5092" class="Symbol">:</a> <a id="5094" class="Symbol">((</a><a id="5096" href="NFT.html#2823" class="Function">s</a> <a id="5098" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5100" href="NFT.html#542" class="Function">myOneNFT</a><a id="5108" class="Symbol">)</a> <a id="5110" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="5112" class="Symbol">(</a><a id="5113" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="5122" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="5125" href="NFT.html#2631" class="Bound">utxos</a><a id="5130" class="Symbol">))</a>
                <a id="5149" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="5151" class="Symbol">(</a><a id="5152" href="NFT.html#2823" class="Function">s</a> <a id="5154" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5156" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a><a id="5157" class="Symbol">)</a>
            <a id="5171" href="NFT.html#5089" class="Bound">Ps</a> <a id="5174" class="Symbol">=</a> <a id="5176" href="NFT.html#1545" class="Function">π-ok</a> <a id="5181" class="Symbol">{</a><a id="5182" class="Argument">utxos</a> <a id="5188" class="Symbol">=</a> <a id="5190" href="NFT.html#2631" class="Bound">utxos</a><a id="5195" class="Symbol">}</a> <a id="5197" class="Symbol">.</a><a id="5198" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="5204" href="NFT.html#2711" class="Bound">π≡</a>

            <a id="5220" href="NFT.html#5220" class="Bound">s≡𝟙</a> <a id="5224" class="Symbol">:</a> <a id="5226" href="NFT.html#2823" class="Function">s</a> <a id="5228" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5230" href="NFT.html#542" class="Function">myOneNFT</a>
            <a id="5251" href="NFT.html#5220" class="Bound">s≡𝟙</a> <a id="5255" class="Symbol">=</a> <a id="5257" href="Function.Base.html#4130" class="Function Operator">case</a> <a id="5262" href="NFT.html#5089" class="Bound">Ps</a> <a id="5265" href="Function.Base.html#4130" class="Function Operator">of</a> <a id="5268" class="Symbol">λ</a> <a id="5270" class="Keyword">where</a>
              <a id="5290" class="Symbol">(</a><a id="5291" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="5296" class="Symbol">(</a><a id="5297" href="NFT.html#5297" class="Bound">s≡𝟙</a> <a id="5301" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5303" class="Symbol">_))</a> <a id="5307" class="Symbol">→</a> <a id="5309" href="NFT.html#5297" class="Bound">s≡𝟙</a>
              <a id="5327" class="Symbol">(</a><a id="5328" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="5333" href="NFT.html#5333" class="Bound">s≡∅</a><a id="5336" class="Symbol">)</a>       <a id="5344" class="Symbol">→</a> <a id="5346" href="Data.Empty.html#637" class="Function">⊥-elim</a> <a id="5353" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="5355" href="NFT.html#5056" class="Bound">s≢∅</a> <a id="5359" href="NFT.html#5333" class="Bound">s≡∅</a>

            <a id="5376" href="NFT.html#5376" class="Bound">∉utxo</a> <a id="5382" class="Symbol">:</a> <a id="5384" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="5393" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="5396" href="NFT.html#2631" class="Bound">utxos</a>
            <a id="5414" href="NFT.html#5376" class="Bound">∉utxo</a> <a id="5420" class="Symbol">=</a> <a id="5422" href="Function.Base.html#4130" class="Function Operator">case</a> <a id="5427" href="NFT.html#5089" class="Bound">Ps</a> <a id="5430" href="Function.Base.html#4130" class="Function Operator">of</a> <a id="5433" class="Symbol">λ</a> <a id="5435" class="Keyword">where</a>
              <a id="5455" class="Symbol">(</a><a id="5456" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="5461" class="Symbol">(_</a> <a id="5464" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5466" href="NFT.html#5466" class="Bound">p</a><a id="5467" class="Symbol">))</a> <a id="5470" class="Symbol">→</a> <a id="5472" href="NFT.html#5466" class="Bound">p</a>
              <a id="5488" class="Symbol">(</a><a id="5489" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="5494" href="NFT.html#5494" class="Bound">s≡∅</a><a id="5497" class="Symbol">)</a>     <a id="5503" class="Symbol">→</a> <a id="5505" href="Data.Empty.html#637" class="Function">⊥-elim</a> <a id="5512" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="5514" href="NFT.html#5056" class="Bound">s≢∅</a> <a id="5518" href="NFT.html#5494" class="Bound">s≡∅</a>

            <a id="5535" href="NFT.html#5535" class="Bound">s′≡𝟙</a> <a id="5540" class="Symbol">:</a> <a id="5542" href="NFT.html#2825" class="Function">s′</a> <a id="5545" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5547" href="NFT.html#542" class="Function">myOneNFT</a>
            <a id="5568" href="NFT.html#5535" class="Bound">s′≡𝟙</a> <a id="5573" class="Symbol">=</a> <a id="5575" href="Relation.Binary.PropositionalEquality.Core.html#1789" class="Function">subst</a> <a id="5581" class="Symbol">(</a><a id="5582" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡</a> <a id="5585" href="NFT.html#542" class="Function">myOneNFT</a><a id="5593" class="Symbol">)</a> <a id="5595" href="NFT.html#4673" class="Bound">s≡s′</a> <a id="5600" href="NFT.html#5220" class="Bound">s≡𝟙</a>

            <a id="5617" href="NFT.html#5617" class="Bound">π≡𝟙</a> <a id="5621" class="Symbol">:</a> <a id="5623" href="NFT.html#1061" class="Function">π</a> <a id="5625" href="NFT.html#2631" class="Bound">utxos</a> <a id="5631" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5633" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="5638" href="NFT.html#542" class="Function">myOneNFT</a>
            <a id="5659" href="NFT.html#5617" class="Bound">π≡𝟙</a> <a id="5663" class="Symbol">=</a> <a id="5665" href="Relation.Binary.PropositionalEquality.Core.html#1789" class="Function">subst</a> <a id="5671" class="Symbol">(λ</a> <a id="5674" href="NFT.html#5674" class="Bound">◆</a> <a id="5676" class="Symbol">→</a> <a id="5678" href="NFT.html#1061" class="Function">π</a> <a id="5680" href="NFT.html#2631" class="Bound">utxos</a> <a id="5686" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5688" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="5693" href="NFT.html#5674" class="Bound">◆</a><a id="5694" class="Symbol">)</a> <a id="5696" href="NFT.html#5220" class="Bound">s≡𝟙</a> <a id="5700" href="NFT.html#2711" class="Bound">π≡</a>

            <a id="5716" href="NFT.html#5716" class="Bound">∉utxo′</a> <a id="5723" class="Symbol">:</a> <a id="5725" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="5734" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="5737" href="NFT.html#2646" class="Bound">utxos′</a>
            <a id="5756" href="NFT.html#5716" class="Bound">∉utxo′</a> <a id="5763" class="Symbol">=</a> <a id="5765" href="Prelude.html#1934" class="Postulate">∉ᵈ-∪</a> <a id="5770" class="Symbol">{</a><a id="5771" class="Argument">m</a> <a id="5773" class="Symbol">=</a> <a id="5775" href="NFT.html#2631" class="Bound">utxos</a> <a id="5781" href="Prelude.html#1432" class="Function Operator">─ᵏˢ</a> <a id="5785" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="5796" href="NFT.html#2639" class="Bound">tx</a><a id="5798" class="Symbol">}{</a><a id="5800" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="5807" href="NFT.html#2639" class="Bound">tx</a><a id="5809" class="Symbol">}</a>
              <a id="5825" class="Symbol">(</a><a id="5826" href="Prelude.html#1978" class="Postulate">∉ᵈ-─ᵏˢ</a> <a id="5833" class="Symbol">{</a><a id="5834" class="Argument">m</a> <a id="5836" class="Symbol">=</a> <a id="5838" href="NFT.html#2631" class="Bound">utxos</a><a id="5843" class="Symbol">}</a> <a id="5845" href="NFT.html#5376" class="Bound">∉utxo</a><a id="5850" class="Symbol">)</a>
              <a id="5866" class="Symbol">(</a><a id="5867" href="EUTxO.html#3646" class="Postulate">∉utxoTx</a> <a id="5875" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="5877" href="NFT.html#1283" class="Postulate">remintingProtection</a> <a id="5897" href="NFT.html#2681" class="Bound">LEDGER→</a> <a id="5905" class="Symbol">(</a><a id="5906" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="5911" href="NFT.html#5617" class="Bound">π≡𝟙</a><a id="5914" class="Symbol">))</a>
          <a id="5927" class="Keyword">in</a>
            <a id="5942" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="5947" class="Symbol">(</a><a id="5948" href="NFT.html#5535" class="Bound">s′≡𝟙</a> <a id="5953" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5955" href="NFT.html#5716" class="Bound">∉utxo′</a><a id="5961" class="Symbol">)</a> <a id="5963" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="5965" href="Prelude.html#2425" class="Postulate">⊆-refl</a> <a id="5972" href="NFT.html#5535" class="Bound">s′≡𝟙</a>
      <a id="5983" class="Symbol">(</a><a id="5984" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="5987" href="NFT.html#5987" class="Bound">i≢∅</a><a id="5990" class="Symbol">)</a> <a id="5992" class="Symbol">→</a>
        <a id="6002" class="Keyword">let</a>
          <a id="6016" href="NFT.html#6016" class="Bound">txi</a> <a id="6020" class="Symbol">:</a> <a id="6022" href="EUTxO.html#1334" class="Record">TxInfo</a>
          <a id="6039" href="NFT.html#6016" class="Bound">txi</a> <a id="6043" class="Symbol">=</a> <a id="6045" href="EUTxO.html#4503" class="Function">txInfo</a> <a id="6052" href="NFT.html#2932" class="Function">valid</a>

          <a id="6069" href="NFT.html#6069" class="Bound">apv</a> <a id="6073" class="Symbol">:</a> <a id="6075" href="Prelude.html#1011" class="Function">∀[</a> <a id="6078" href="NFT.html#6078" class="Bound">(</a><a id="6079" href="NFT.html#6079" class="Bound">p</a> <a id="6081" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6083" href="NFT.html#6083" class="Bound">r</a><a id="6084" href="NFT.html#6078" class="Bound">)</a> <a id="6086" href="Prelude.html#1011" class="Function">∈</a> <a id="6088" href="Prelude.ToList.html#193" class="Field">toList</a> <a id="6095" class="Symbol">(</a><a id="6096" href="NFT.html#2639" class="Bound">tx</a> <a id="6099" class="Symbol">.</a><a id="6100" href="EUTxO.html#1994" class="Field">mintRdrs</a><a id="6108" class="Symbol">)</a> <a id="6110" href="Prelude.html#1011" class="Function">]</a>
                  <a id="6130" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="6132" class="Symbol">(</a><a id="6133" href="NFT.html#6079" class="Bound">p</a> <a id="6135" class="Symbol">(</a><a id="6136" href="NFT.html#6016" class="Bound">txi</a> <a id="6140" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6142" href="NFT.html#6079" class="Bound">p</a> <a id="6144" href="EUTxO.html#570" class="Postulate Operator">♯</a><a id="6145" class="Symbol">)</a> <a id="6147" href="NFT.html#6083" class="Bound">r</a><a id="6148" class="Symbol">)</a>
          <a id="6160" href="NFT.html#6069" class="Bound">apv</a> <a id="6164" class="Symbol">=</a> <a id="6166" href="NFT.html#2932" class="Function">valid</a> <a id="6172" class="Symbol">.</a><a id="6173" href="EUTxO.html#5038" class="Field">allPoliciesValidate</a>

          <a id="6204" href="NFT.html#6204" class="Bound">nft∈</a> <a id="6209" class="Symbol">:</a> <a id="6211" href="NFT.html#488" class="Function">myNFTPolicy</a> <a id="6223" href="Prelude.Maps.AsSets.html#1627" class="Function Operator">∈ᵈ</a> <a id="6226" href="NFT.html#2639" class="Bound">tx</a> <a id="6229" class="Symbol">.</a><a id="6230" href="EUTxO.html#1969" class="Field">mint</a>
          <a id="6245" href="NFT.html#6204" class="Bound">nft∈</a> <a id="6250" class="Symbol">=</a> <a id="6252" href="Prelude.html#2081" class="Postulate">filterK≢∅</a> <a id="6262" class="Symbol">{</a><a id="6263" class="Argument">m</a> <a id="6265" class="Symbol">=</a> <a id="6267" href="NFT.html#2639" class="Bound">tx</a> <a id="6270" class="Symbol">.</a><a id="6271" href="EUTxO.html#1969" class="Field">mint</a><a id="6275" class="Symbol">}</a> <a id="6277" href="NFT.html#5987" class="Bound">i≢∅</a>

          <a id="6292" href="NFT.html#6292" class="Bound">nft∈′</a> <a id="6298" class="Symbol">:</a> <a id="6300" href="NFT.html#488" class="Function">myNFTPolicy</a> <a id="6312" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="6314" href="Data.List.Base.html#1553" class="Function">map</a> <a id="6318" href="EUTxO.html#570" class="Postulate Operator">_♯</a> <a id="6321" class="Symbol">(</a><a id="6322" href="Prelude.html#1512" class="Function">keys</a> <a id="6327" class="Symbol">(</a><a id="6328" href="NFT.html#2639" class="Bound">tx</a> <a id="6331" class="Symbol">.</a><a id="6332" href="EUTxO.html#1994" class="Field">mintRdrs</a><a id="6340" class="Symbol">))</a>
          <a id="6353" href="NFT.html#6292" class="Bound">nft∈′</a> <a id="6359" class="Symbol">=</a> <a id="6361" href="NFT.html#2932" class="Function">valid</a> <a id="6367" class="Symbol">.</a><a id="6368" href="EUTxO.html#4959" class="Field">validMintRedeemers</a> <a id="6387" href="NFT.html#6204" class="Bound">nft∈</a>

          <a id="6403" href="NFT.html#6403" class="Bound">nft∈″</a> <a id="6409" class="Symbol">:</a> <a id="6411" href="NFT.html#283" class="Function">myNFTPolicyScript</a> <a id="6429" href="Prelude.Maps.AsSets.html#1627" class="Function Operator">∈ᵈ</a> <a id="6432" href="NFT.html#2639" class="Bound">tx</a> <a id="6435" class="Symbol">.</a><a id="6436" href="EUTxO.html#1994" class="Field">mintRdrs</a>
          <a id="6455" href="NFT.html#6403" class="Bound">nft∈″</a> <a id="6461" class="Symbol">=</a>
            <a id="6475" class="Keyword">let</a> <a id="6479" href="NFT.html#6479" class="Bound">f</a> <a id="6481" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6483" href="NFT.html#6483" class="Bound">f∈</a> <a id="6486" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6488" href="NFT.html#6488" class="Bound">f≡</a> <a id="6491" class="Symbol">=</a> <a id="6493" href="Data.List.Membership.Propositional.Properties.html#3491" class="Function">L.Mem.∈-map⁻</a> <a id="6506" href="EUTxO.html#570" class="Postulate Operator">_♯</a> <a id="6509" href="NFT.html#6292" class="Bound">nft∈′</a>
            <a id="6527" class="Keyword">in</a> <a id="6530" href="Relation.Binary.PropositionalEquality.Core.html#1789" class="Function">subst</a> <a id="6536" class="Symbol">(</a><a id="6537" href="Prelude.Maps.AsSets.html#1627" class="Function Operator">_∈ᵈ</a> <a id="6541" href="NFT.html#2639" class="Bound">tx</a> <a id="6544" class="Symbol">.</a><a id="6545" href="EUTxO.html#1994" class="Field">mintRdrs</a><a id="6553" class="Symbol">)</a> <a id="6555" class="Symbol">(</a><a id="6556" href="Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="6560" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="6562" href="EUTxO.html#586" class="Postulate">♯-injective</a> <a id="6574" href="NFT.html#6488" class="Bound">f≡</a><a id="6576" class="Symbol">)</a> <a id="6578" href="NFT.html#6483" class="Bound">f∈</a>

          <a id="6592" href="NFT.html#6592" class="Bound">∃kv</a> <a id="6596" class="Symbol">:</a> <a id="6598" href="Data.Product.html#1378" class="Function">∃</a> <a id="6600" class="Symbol">λ</a> <a id="6602" href="NFT.html#6602" class="Bound">r</a> <a id="6604" class="Symbol">→</a> <a id="6606" class="Symbol">(</a><a id="6607" href="NFT.html#283" class="Function">myNFTPolicyScript</a> <a id="6625" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6627" href="NFT.html#6602" class="Bound">r</a><a id="6628" class="Symbol">)</a> <a id="6630" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="6632" href="Prelude.ToList.html#193" class="Field">toList</a> <a id="6639" class="Symbol">(</a><a id="6640" href="NFT.html#2639" class="Bound">tx</a> <a id="6643" class="Symbol">.</a><a id="6644" href="EUTxO.html#1994" class="Field">mintRdrs</a><a id="6652" class="Symbol">)</a>
          <a id="6664" href="NFT.html#6592" class="Bound">∃kv</a> <a id="6668" class="Symbol">=</a> <a id="6670" href="Prelude.html#1879" class="Postulate">∈ᵈ⁻</a> <a id="6674" class="Symbol">{</a><a id="6675" class="Argument">m</a> <a id="6677" class="Symbol">=</a> <a id="6679" href="NFT.html#2639" class="Bound">tx</a> <a id="6682" class="Symbol">.</a><a id="6683" href="EUTxO.html#1994" class="Field">mintRdrs</a><a id="6691" class="Symbol">}</a> <a id="6693" href="NFT.html#6403" class="Bound">nft∈″</a>

          <a id="6710" href="NFT.html#6710" class="Bound">rdm</a> <a id="6714" class="Symbol">:</a> <a id="6716" href="EUTxO.html#1515" class="Function">Redeemer</a>
          <a id="6735" href="NFT.html#6710" class="Bound">rdm</a> <a id="6739" class="Symbol">=</a> <a id="6741" href="NFT.html#6592" class="Bound">∃kv</a> <a id="6745" class="Symbol">.</a><a id="6746" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a>

          <a id="6763" href="NFT.html#6763" class="Bound">policy≡</a> <a id="6771" class="Symbol">:</a> <a id="6773" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="6775" class="Symbol">(</a><a id="6776" href="NFT.html#283" class="Function">myNFTPolicyScript</a> <a id="6794" class="Symbol">(</a><a id="6795" href="NFT.html#6016" class="Bound">txi</a> <a id="6799" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6801" href="NFT.html#488" class="Function">myNFTPolicy</a><a id="6812" class="Symbol">)</a> <a id="6814" href="NFT.html#6710" class="Bound">rdm</a><a id="6817" class="Symbol">)</a>
          <a id="6829" href="NFT.html#6763" class="Bound">policy≡</a> <a id="6837" class="Symbol">=</a> <a id="6839" href="Data.List.Relation.Unary.All.html#5775" class="Function">L.All.lookup</a> <a id="6852" class="Symbol">(</a><a id="6853" href="NFT.html#2932" class="Function">valid</a> <a id="6859" class="Symbol">.</a><a id="6860" href="EUTxO.html#5038" class="Field">allPoliciesValidate</a><a id="6879" class="Symbol">)</a> <a id="6881" class="Symbol">(</a><a id="6882" href="NFT.html#6592" class="Bound">∃kv</a> <a id="6886" class="Symbol">.</a><a id="6887" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="6892" class="Symbol">)</a>

          <a id="6905" href="NFT.html#6905" class="Bound">∈txins</a> <a id="6912" class="Symbol">:</a> <a id="6914" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="6923" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="6925" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="6936" href="NFT.html#2639" class="Bound">tx</a>
          <a id="6949" href="NFT.html#6905" class="Bound">∈txins</a> <a id="6956" class="Symbol">=</a> <a id="6958" href="Relation.Binary.PropositionalEquality.Core.html#1789" class="Function">subst</a> <a id="6964" class="Symbol">(_</a> <a id="6967" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈_</a><a id="6969" class="Symbol">)</a> <a id="6971" class="Symbol">(</a><a id="6972" href="EUTxO.html#5288" class="Function">outRefs≡</a> <a id="6981" href="NFT.html#2932" class="Function">valid</a><a id="6986" class="Symbol">)</a> <a id="6988" class="Symbol">(</a><a id="6989" href="Relation.Nullary.Decidable.Core.html#1493" class="Function">toWitness</a> <a id="6999" href="NFT.html#6763" class="Bound">policy≡</a> <a id="7007" class="Symbol">.</a><a id="7008" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="7013" class="Symbol">)</a>

          <a id="7026" href="NFT.html#7026" class="Bound">∈utxo</a> <a id="7032" class="Symbol">:</a> <a id="7034" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="7043" href="Prelude.Maps.AsSets.html#1627" class="Function Operator">∈ᵈ</a> <a id="7046" href="NFT.html#2631" class="Bound">utxos</a>
          <a id="7062" href="NFT.html#7026" class="Bound">∈utxo</a> <a id="7068" class="Symbol">=</a> <a id="7070" href="Data.List.Relation.Unary.All.html#5775" class="Function">L.All.lookup</a> <a id="7083" class="Symbol">(</a><a id="7084" href="NFT.html#2932" class="Function">valid</a> <a id="7090" class="Symbol">.</a><a id="7091" href="EUTxO.html#4357" class="Field">validOutputRefs</a><a id="7106" class="Symbol">)</a> <a id="7108" href="NFT.html#6905" class="Bound">∈txins</a>

          <a id="7126" href="NFT.html#7126" class="Bound">i≡𝟙</a> <a id="7130" class="Symbol">:</a> <a id="7132" href="NFT.html#2821" class="Function">i</a> <a id="7134" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7136" href="NFT.html#542" class="Function">myOneNFT</a>
          <a id="7155" href="NFT.html#7126" class="Bound">i≡𝟙</a> <a id="7159" class="Symbol">=</a> <a id="7161" href="Relation.Nullary.Decidable.Core.html#1493" class="Function">toWitness</a> <a id="7171" href="NFT.html#6763" class="Bound">policy≡</a> <a id="7179" class="Symbol">.</a><a id="7180" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a>
        <a id="7194" class="Keyword">in</a>
        <a id="7205" href="Function.Base.html#4130" class="Function Operator">case</a> <a id="7210" href="NFT.html#2823" class="Function">s</a> <a id="7212" href="Prelude.DecEq.Core.html#190" class="Field Operator">≟</a> <a id="7214" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a> <a id="7216" href="Function.Base.html#4130" class="Function Operator">of</a> <a id="7219" class="Symbol">λ</a> <a id="7221" class="Keyword">where</a>
        <a id="7235" class="Symbol">(</a><a id="7236" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="7240" href="NFT.html#7240" class="Bound">s≡∅</a><a id="7243" class="Symbol">)</a> <a id="7245" class="Symbol">→</a>
          <a id="7257" class="Keyword">let</a>
            <a id="7273" href="NFT.html#7273" class="Bound">s′≡𝟙</a> <a id="7278" class="Symbol">:</a> <a id="7280" href="NFT.html#2825" class="Function">s′</a> <a id="7283" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7285" href="NFT.html#542" class="Function">myOneNFT</a>
            <a id="7306" href="NFT.html#7273" class="Bound">s′≡𝟙</a> <a id="7311" class="Symbol">=</a> <a id="7313" href="Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
              <a id="7333" href="NFT.html#2825" class="Function">s′</a>       <a id="7342" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="7345" href="NFT.html#2998" class="Function">s′≡s∪i</a> <a id="7352" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
              <a id="7368" href="NFT.html#2823" class="Function">s</a> <a id="7370" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="7372" href="NFT.html#2821" class="Function">i</a>    <a id="7377" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="7380" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="7385" class="Symbol">(</a><a id="7386" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">_∪</a> <a id="7389" href="NFT.html#2821" class="Function">i</a><a id="7390" class="Symbol">)</a> <a id="7392" href="NFT.html#7240" class="Bound">s≡∅</a> <a id="7396" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
              <a id="7412" href="Prelude.Maps.AsSets.html#930" class="InductiveConstructor">∅</a> <a id="7414" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="7416" href="NFT.html#2821" class="Function">i</a>    <a id="7421" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="7424" href="Prelude.html#1676" class="Postulate">∅-identityˡ</a> <a id="7436" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
              <a id="7452" href="NFT.html#2821" class="Function">i</a>        <a id="7461" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="7464" href="NFT.html#7126" class="Bound">i≡𝟙</a> <a id="7468" href="Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
              <a id="7484" href="NFT.html#542" class="Function">myOneNFT</a> <a id="7493" href="Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>

            <a id="7508" href="NFT.html#7508" class="Bound">∉utxo′</a> <a id="7515" class="Symbol">:</a> <a id="7517" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="7526" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="7529" href="NFT.html#2646" class="Bound">utxos′</a>
            <a id="7548" href="NFT.html#7508" class="Bound">∉utxo′</a> <a id="7555" class="Symbol">=</a> <a id="7557" href="Prelude.html#1934" class="Postulate">∉ᵈ-∪</a> <a id="7562" class="Symbol">{</a><a id="7563" class="Argument">m</a> <a id="7565" class="Symbol">=</a> <a id="7567" href="NFT.html#2631" class="Bound">utxos</a> <a id="7573" href="Prelude.html#1432" class="Function Operator">─ᵏˢ</a> <a id="7577" href="EUTxO.html#2388" class="Function">outputRefs</a> <a id="7588" href="NFT.html#2639" class="Bound">tx</a><a id="7590" class="Symbol">}{</a><a id="7592" href="EUTxO.html#3556" class="Function">utxoTx</a> <a id="7599" href="NFT.html#2639" class="Bound">tx</a><a id="7601" class="Symbol">}</a>
              <a id="7617" class="Symbol">(</a><a id="7618" href="Prelude.html#2016" class="Postulate">∈─⇒∉ᵈ</a> <a id="7624" class="Symbol">{</a><a id="7625" class="Argument">m</a> <a id="7627" class="Symbol">=</a> <a id="7629" href="NFT.html#2631" class="Bound">utxos</a><a id="7634" class="Symbol">}</a> <a id="7636" href="NFT.html#6905" class="Bound">∈txins</a><a id="7642" class="Symbol">)</a>
              <a id="7658" class="Symbol">(</a><a id="7659" href="EUTxO.html#3646" class="Postulate">∉utxoTx</a> <a id="7667" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="7669" href="NFT.html#1283" class="Postulate">remintingProtection</a> <a id="7689" href="NFT.html#2681" class="Bound">LEDGER→</a> <a id="7697" class="Symbol">(</a><a id="7698" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="7703" href="NFT.html#6905" class="Bound">∈txins</a><a id="7709" class="Symbol">))</a>
          <a id="7722" class="Keyword">in</a>
            <a id="7737" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="7742" class="Symbol">(</a><a id="7743" href="NFT.html#7273" class="Bound">s′≡𝟙</a> <a id="7748" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="7750" href="NFT.html#7508" class="Bound">∉utxo′</a><a id="7756" class="Symbol">)</a> <a id="7758" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="7760" href="Prelude.html#2425" class="Postulate">⊆-refl</a> <a id="7767" href="NFT.html#7273" class="Bound">s′≡𝟙</a>
        <a id="7780" class="Symbol">(</a><a id="7781" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="7784" href="NFT.html#7784" class="Bound">s≢∅</a><a id="7787" class="Symbol">)</a> <a id="7789" class="Symbol">→</a>
          <a id="7801" class="Keyword">let</a>
            <a id="7817" href="NFT.html#7817" class="Bound">∉utxo</a> <a id="7823" class="Symbol">:</a> <a id="7825" href="NFT.html#219" class="Postulate">myNFTRef</a> <a id="7834" href="Prelude.Maps.AsSets.html#1690" class="Function Operator">∉ᵈ</a> <a id="7837" href="NFT.html#2631" class="Bound">utxos</a>
            <a id="7855" href="NFT.html#7817" class="Bound">∉utxo</a> <a id="7861" class="Symbol">=</a> <a id="7863" href="Function.Base.html#4130" class="Function Operator">case</a> <a id="7868" href="NFT.html#1545" class="Function">π-ok</a> <a id="7873" class="Symbol">{</a><a id="7874" href="NFT.html#2631" class="Bound">utxos</a><a id="7879" class="Symbol">}</a> <a id="7881" class="Symbol">.</a><a id="7882" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="7888" href="NFT.html#2711" class="Bound">π≡</a> <a id="7891" href="Function.Base.html#4130" class="Function Operator">of</a> <a id="7894" class="Symbol">λ</a> <a id="7896" class="Keyword">where</a>
              <a id="7916" class="Symbol">(</a><a id="7917" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="7922" class="Symbol">(_</a> <a id="7925" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="7927" href="NFT.html#7927" class="Bound">∉utxo</a><a id="7932" class="Symbol">))</a> <a id="7935" class="Symbol">→</a> <a id="7937" href="NFT.html#7927" class="Bound">∉utxo</a>
              <a id="7957" class="Symbol">(</a><a id="7958" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="7963" href="NFT.html#7963" class="Bound">s≡∅</a><a id="7966" class="Symbol">)</a>         <a id="7976" class="Symbol">→</a> <a id="7978" href="Data.Empty.html#637" class="Function">⊥-elim</a> <a id="7985" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="7987" href="NFT.html#7784" class="Bound">s≢∅</a> <a id="7991" href="NFT.html#7963" class="Bound">s≡∅</a>
          <a id="8005" class="Keyword">in</a>
            <a id="8020" href="Data.Empty.html#637" class="Function">⊥-elim</a> <a id="8027" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="8029" href="NFT.html#7817" class="Bound">∉utxo</a> <a id="8035" href="NFT.html#7026" class="Bound">∈utxo</a>
</pre></body></html>