<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>UTxO</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/structured-contracts/tree/master/UTxO.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="UTxO.html" class="Module">UTxO</a> <a id="13" class="Keyword">where</a>

<a id="20" class="Keyword">open</a> <a id="25" class="Keyword">import</a> <a id="32" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="44" class="Symbol">;</a> <a id="46" class="Keyword">open</a> <a id="51" href="Prelude.Init.html#504" class="Module">SetAsType</a>
<a id="61" class="Keyword">open</a> <a id="66" href="Prelude.Init.html#7133" class="Module">L.Mem</a>
<a id="72" class="Keyword">open</a> <a id="77" class="Keyword">import</a> <a id="84" href="Prelude.General.html" class="Module">Prelude.General</a>
<a id="100" class="Keyword">open</a> <a id="105" class="Keyword">import</a> <a id="112" href="Prelude.Maybes.html" class="Module">Prelude.Maybes</a>
<a id="127" class="Keyword">open</a> <a id="132" class="Keyword">import</a> <a id="139" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Prelude.Decidable.html" class="Module">Prelude.Decidable</a>
<a id="183" class="Keyword">open</a> <a id="188" class="Keyword">import</a> <a id="195" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="207" class="Keyword">open</a> <a id="212" class="Keyword">import</a> <a id="219" href="Prelude.Lists.html" class="Module">Prelude.Lists</a> <a id="233" class="Keyword">hiding</a> <a id="240" class="Symbol">(</a><a id="241" href="Prelude.Lists.Indexed.html#663" class="Function Operator">_⁉_</a><a id="244" class="Symbol">;</a> <a id="246" href="Prelude.Lists.Indexed.html#600" class="Function Operator">_‼_</a><a id="249" class="Symbol">;</a> <a id="251" href="Prelude.Lists.Mappings.html#697" class="Function">map↦</a><a id="255" class="Symbol">)</a>
<a id="257" class="Keyword">open</a> <a id="262" class="Keyword">import</a> <a id="269" href="Prelude.Lists.Dec.html" class="Module">Prelude.Lists.Dec</a>
<a id="287" class="Keyword">open</a> <a id="292" class="Keyword">import</a> <a id="299" href="Prelude.Lists.WithK.html" class="Module">Prelude.Lists.WithK</a>
<a id="319" class="Keyword">open</a> <a id="324" class="Keyword">import</a> <a id="331" href="Prelude.Functor.html" class="Module">Prelude.Functor</a>
<a id="347" class="Keyword">open</a> <a id="352" class="Keyword">import</a> <a id="359" href="Prelude.Applicative.html" class="Module">Prelude.Applicative</a>
<a id="379" class="Keyword">open</a> <a id="384" class="Keyword">import</a> <a id="391" href="Prelude.Semigroup.html" class="Module">Prelude.Semigroup</a>
<a id="409" class="Keyword">open</a> <a id="414" class="Keyword">import</a> <a id="421" href="Prelude.Monoid.html" class="Module">Prelude.Monoid</a>
<a id="436" class="Keyword">open</a> <a id="441" class="Keyword">import</a> <a id="448" href="Prelude.FromList.html" class="Module">Prelude.FromList</a>
<a id="465" class="Keyword">open</a> <a id="470" class="Keyword">import</a> <a id="477" href="Prelude.Membership.html" class="Module">Prelude.Membership</a> <a id="496" class="Keyword">using</a> <a id="502" class="Symbol">(</a><a id="503" href="Prelude.Membership.html#455" class="Field Operator">_∈?_</a><a id="507" class="Symbol">;</a> <a id="509" href="Prelude.Membership.html#613" class="Function Operator">_∉?_</a><a id="513" class="Symbol">)</a>
<a id="515" class="Keyword">open</a> <a id="520" class="Keyword">import</a> <a id="527" href="Prelude.Irrelevance.html" class="Module">Prelude.Irrelevance</a>
<a id="547" class="Keyword">open</a> <a id="552" class="Keyword">import</a> <a id="559" href="Prelude.Apartness.html" class="Module">Prelude.Apartness</a>

<a id="578" class="Keyword">open</a> <a id="583" class="Keyword">import</a> <a id="590" href="Prelude.Maps.html" class="Module">Prelude.Maps</a>

<a id="Value"></a><a id="604" href="UTxO.html#604" class="Function">Value</a>   <a id="612" class="Symbol">=</a> <a id="614" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="HashId"></a><a id="616" href="UTxO.html#616" class="Function">HashId</a>  <a id="624" class="Symbol">=</a> <a id="626" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="Address"></a><a id="628" href="UTxO.html#628" class="Function">Address</a> <a id="636" class="Symbol">=</a> <a id="638" href="UTxO.html#616" class="Function">HashId</a>
<a id="645" class="Keyword">postulate</a> <a id="_♯"></a><a id="655" href="UTxO.html#655" class="Postulate Operator">_♯</a> <a id="658" class="Symbol">:</a> <a id="660" class="Symbol">∀</a> <a id="662" class="Symbol">{</a><a id="663" href="UTxO.html#663" class="Bound">A</a> <a id="665" class="Symbol">:</a> <a id="667" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="672" href="Prelude.Init.html#261" class="Generalizable">ℓ</a><a id="673" class="Symbol">}</a> <a id="675" class="Symbol">→</a> <a id="677" href="UTxO.html#663" class="Bound">A</a> <a id="679" class="Symbol">→</a> <a id="681" href="UTxO.html#616" class="Function">HashId</a>

<a id="DATA"></a><a id="689" href="UTxO.html#689" class="Function">DATA</a> <a id="694" class="Symbol">=</a> <a id="696" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="698" class="Comment">-- T0D0: more realistic data for redeemers</a>

<a id="∑"></a><a id="742" href="UTxO.html#742" class="Function">∑</a> <a id="744" class="Symbol">:</a> <a id="746" class="Symbol">∀</a> <a id="748" class="Symbol">{</a><a id="749" href="UTxO.html#749" class="Bound">A</a> <a id="751" class="Symbol">:</a> <a id="753" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="757" class="Symbol">}</a> <a id="759" class="Symbol">→</a> <a id="761" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="766" href="UTxO.html#749" class="Bound">A</a> <a id="768" class="Symbol">→</a> <a id="770" class="Symbol">(</a><a id="771" href="UTxO.html#749" class="Bound">A</a> <a id="773" class="Symbol">→</a> <a id="775" href="UTxO.html#604" class="Function">Value</a><a id="780" class="Symbol">)</a> <a id="782" class="Symbol">→</a> <a id="784" href="UTxO.html#604" class="Function">Value</a>
<a id="790" href="UTxO.html#742" class="Function">∑</a> <a id="792" href="UTxO.html#792" class="Bound">xs</a> <a id="795" href="UTxO.html#795" class="Bound">f</a> <a id="797" class="Symbol">=</a> <a id="799" href="Prelude.Lists.Sums.html#295" class="Function">∑ℕ</a> <a id="802" class="Symbol">(</a><a id="803" href="Data.List.Base.html#1553" class="Function">map</a> <a id="807" href="UTxO.html#795" class="Bound">f</a> <a id="809" href="UTxO.html#792" class="Bound">xs</a><a id="811" class="Symbol">)</a>

<a id="814" class="Keyword">record</a> <a id="TxOutput"></a><a id="821" href="UTxO.html#821" class="Record">TxOutput</a> <a id="830" class="Symbol">:</a> <a id="832" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="837" class="Keyword">where</a>
  <a id="845" class="Keyword">constructor</a> <a id="_at_"></a><a id="857" href="UTxO.html#857" class="InductiveConstructor Operator">_at_</a>
  <a id="864" class="Keyword">field</a> <a id="TxOutput.value"></a><a id="870" href="UTxO.html#870" class="Field">value</a>    <a id="879" class="Symbol">:</a> <a id="881" href="UTxO.html#604" class="Function">Value</a>
        <a id="TxOutput.address"></a><a id="895" href="UTxO.html#895" class="Field">address</a>  <a id="904" class="Symbol">:</a> <a id="906" href="UTxO.html#628" class="Function">Address</a>
<a id="914" class="Keyword">open</a> <a id="919" href="UTxO.html#821" class="Module">TxOutput</a> <a id="928" class="Keyword">public</a>
<a id="935" class="Keyword">unquoteDecl</a> <a id="DecEq-TxO"></a><a id="947" href="UTxO.html#947" class="Function">DecEq-TxO</a> <a id="957" class="Symbol">=</a> <a id="959" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="966" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="972" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="974" class="Keyword">quote</a> <a id="980" href="UTxO.html#821" class="Record">TxOutput</a> <a id="989" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="991" href="UTxO.html#947" class="Function">DecEq-TxO</a> <a id="1001" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="1004" class="Keyword">record</a> <a id="InputInfo"></a><a id="1011" href="UTxO.html#1011" class="Record">InputInfo</a> <a id="1021" class="Symbol">:</a> <a id="1023" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1028" class="Keyword">where</a>
  <a id="1036" class="Keyword">field</a> <a id="InputInfo.outputRef"></a><a id="1042" href="UTxO.html#1042" class="Field">outputRef</a>     <a id="1056" class="Symbol">:</a> <a id="1058" href="UTxO.html#821" class="Record">TxOutput</a>
        <a id="1075" class="Comment">-- NB: the actual implementation also keeps references here</a>
        <a id="InputInfo.validatorHash"></a><a id="1143" href="UTxO.html#1143" class="Field">validatorHash</a> <a id="1157" class="Symbol">:</a> <a id="1159" href="UTxO.html#616" class="Function">HashId</a>
        <a id="InputInfo.redeemerHash"></a><a id="1174" href="UTxO.html#1174" class="Field">redeemerHash</a>  <a id="1188" class="Symbol">:</a> <a id="1190" href="UTxO.html#616" class="Function">HashId</a>
<a id="1197" class="Keyword">unquoteDecl</a> <a id="DecEq-InputInfo"></a><a id="1209" href="UTxO.html#1209" class="Function">DecEq-InputInfo</a> <a id="1225" class="Symbol">=</a> <a id="1227" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="1234" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="1240" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="1242" class="Keyword">quote</a> <a id="1248" href="UTxO.html#1011" class="Record">InputInfo</a> <a id="1258" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1260" href="UTxO.html#1209" class="Function">DecEq-InputInfo</a> <a id="1276" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="1279" class="Keyword">record</a> <a id="TxInfo"></a><a id="1286" href="UTxO.html#1286" class="Record">TxInfo</a> <a id="1293" class="Symbol">:</a> <a id="1295" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1300" class="Keyword">where</a>
  <a id="1308" class="Keyword">field</a> <a id="TxInfo.inputs"></a><a id="1314" href="UTxO.html#1314" class="Field">inputs</a>  <a id="1322" class="Symbol">:</a> <a id="1324" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1329" href="UTxO.html#1011" class="Record">InputInfo</a>
        <a id="TxInfo.outputs"></a><a id="1347" href="UTxO.html#1347" class="Field">outputs</a> <a id="1355" class="Symbol">:</a> <a id="1357" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1362" href="UTxO.html#821" class="Record">TxOutput</a>
        <a id="TxInfo.forge"></a><a id="1379" href="UTxO.html#1379" class="Field">forge</a>   <a id="1387" class="Symbol">:</a> <a id="1389" href="UTxO.html#604" class="Function">Value</a>
<a id="1395" class="Keyword">unquoteDecl</a> <a id="DecEq-TxInfo"></a><a id="1407" href="UTxO.html#1407" class="Function">DecEq-TxInfo</a> <a id="1420" class="Symbol">=</a> <a id="1422" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="1429" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="1435" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="1437" class="Keyword">quote</a> <a id="1443" href="UTxO.html#1286" class="Record">TxInfo</a> <a id="1450" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1452" href="UTxO.html#1407" class="Function">DecEq-TxInfo</a> <a id="1465" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="1468" class="Keyword">module</a> <a id="CommonInfo"></a><a id="1475" href="UTxO.html#1475" class="Module">CommonInfo</a> <a id="1486" class="Symbol">(</a><a id="1487" href="UTxO.html#1487" class="Bound">TxOutputRef</a> <a id="1499" class="Symbol">:</a> <a id="1501" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="1505" class="Symbol">)</a> <a id="1507" class="Keyword">where</a>

  <a id="1516" class="Keyword">record</a> <a id="CommonInfo.TxInput"></a><a id="1523" href="UTxO.html#1523" class="Record">TxInput</a> <a id="1531" class="Symbol">:</a> <a id="1533" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1538" class="Keyword">where</a>
    <a id="1548" class="Keyword">field</a> <a id="CommonInfo.TxInput.outputRef"></a><a id="1554" href="UTxO.html#1554" class="Field">outputRef</a> <a id="1564" class="Symbol">:</a> <a id="1566" href="UTxO.html#1487" class="Bound">TxOutputRef</a>
          <a id="CommonInfo.TxInput.validator"></a><a id="1588" href="UTxO.html#1588" class="Field">validator</a> <a id="1598" class="Symbol">:</a> <a id="1600" href="UTxO.html#1286" class="Record">TxInfo</a> <a id="1607" class="Symbol">→</a> <a id="1609" href="UTxO.html#689" class="Function">DATA</a> <a id="1614" class="Symbol">→</a> <a id="1616" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
          <a id="CommonInfo.TxInput.redeemer"></a><a id="1631" href="UTxO.html#1631" class="Field">redeemer</a>  <a id="1641" class="Symbol">:</a> <a id="1643" href="UTxO.html#689" class="Function">DATA</a>
  <a id="1650" class="Keyword">open</a> <a id="1655" href="UTxO.html#1523" class="Module">TxInput</a> <a id="1663" class="Keyword">public</a>

  <a id="1673" class="Keyword">record</a> <a id="CommonInfo.Tx"></a><a id="1680" href="UTxO.html#1680" class="Record">Tx</a> <a id="1683" class="Symbol">:</a> <a id="1685" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="1690" class="Keyword">where</a>
    <a id="1700" class="Keyword">field</a> <a id="CommonInfo.Tx.inputs"></a><a id="1706" href="UTxO.html#1706" class="Field">inputs</a>  <a id="1714" class="Symbol">:</a> <a id="1716" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1721" href="UTxO.html#1523" class="Record">TxInput</a>
          <a id="CommonInfo.Tx.outputs"></a><a id="1739" href="UTxO.html#1739" class="Field">outputs</a> <a id="1747" class="Symbol">:</a> <a id="1749" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1754" href="UTxO.html#821" class="Record">TxOutput</a>
          <a id="CommonInfo.Tx.forge"></a><a id="1773" href="UTxO.html#1773" class="Field">forge</a>   <a id="1781" class="Symbol">:</a> <a id="1783" href="UTxO.html#604" class="Function">Value</a>
  <a id="1791" class="Keyword">open</a> <a id="1796" href="UTxO.html#1680" class="Module">Tx</a> <a id="1799" class="Keyword">public</a>

  <a id="1809" class="Comment">-- A ledger is a list of transactions.</a>
  <a id="CommonInfo.L"></a><a id="1850" href="UTxO.html#1850" class="Function">L</a> <a id="1852" class="Symbol">=</a> <a id="1854" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1859" href="UTxO.html#1680" class="Record">Tx</a>

  <a id="1865" class="Keyword">instance</a>
    <a id="CommonInfo.Semigroup-L"></a><a id="1878" href="UTxO.html#1878" class="Function">Semigroup-L</a> <a id="1890" class="Symbol">:</a> <a id="1892" href="Prelude.Semigroup.html#185" class="Record">Semigroup</a> <a id="1902" href="UTxO.html#1850" class="Function">L</a>
    <a id="1908" href="UTxO.html#1878" class="Function">Semigroup-L</a> <a id="1920" class="Symbol">.</a><a id="1921" href="Prelude.Semigroup.html#251" class="Field Operator">_◇_</a> <a id="1925" class="Symbol">=</a> <a id="1927" href="Data.List.Base.html#1819" class="Function Operator">_++_</a>

    <a id="CommonInfo.Monoid-L"></a><a id="1937" href="UTxO.html#1937" class="Function">Monoid-L</a> <a id="1946" class="Symbol">:</a> <a id="1948" href="Prelude.Monoid.html#159" class="Record">Monoid</a> <a id="1955" href="UTxO.html#1850" class="Function">L</a>
    <a id="1961" href="UTxO.html#1937" class="Function">Monoid-L</a> <a id="1970" class="Symbol">.</a><a id="1971" href="Prelude.Monoid.html#222" class="Field">ε</a> <a id="1973" class="Symbol">=</a> <a id="1975" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

  <a id="1981" class="Comment">-- Auxiliary definitions.</a>

  <a id="CommonInfo.outputRefs"></a><a id="2010" href="UTxO.html#2010" class="Function">outputRefs</a> <a id="2021" class="Symbol">:</a> <a id="2023" href="UTxO.html#1680" class="Record">Tx</a> <a id="2026" class="Symbol">→</a> <a id="2028" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="2033" href="UTxO.html#1487" class="Bound">TxOutputRef</a>
  <a id="2047" href="UTxO.html#2010" class="Function">outputRefs</a> <a id="2058" class="Symbol">=</a> <a id="2060" href="Data.List.Base.html#1553" class="Function">map</a> <a id="2064" href="UTxO.html#1554" class="Field">outputRef</a> <a id="2074" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2076" href="UTxO.html#1706" class="Field">inputs</a>

  <a id="CommonInfo.Resolved"></a><a id="2086" href="UTxO.html#2086" class="Function">Resolved</a> <a id="2095" class="Symbol">:</a> <a id="2097" href="Prelude.Init.html#13332" class="Function">Pred₀</a> <a id="2103" href="UTxO.html#1680" class="Record">Tx</a>
  <a id="2108" href="UTxO.html#2086" class="Function">Resolved</a> <a id="2117" href="UTxO.html#2117" class="Bound">tx</a> <a id="2120" class="Symbol">=</a> <a id="2122" class="Symbol">∀</a> <a id="2124" class="Symbol">{</a><a id="2125" href="UTxO.html#2125" class="Bound">r</a><a id="2126" class="Symbol">}</a> <a id="2128" class="Symbol">→</a> <a id="2130" href="UTxO.html#2125" class="Bound">r</a> <a id="2132" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="2134" href="UTxO.html#2010" class="Function">outputRefs</a> <a id="2145" href="UTxO.html#2117" class="Bound">tx</a> <a id="2148" class="Symbol">→</a> <a id="2150" href="UTxO.html#821" class="Record">TxOutput</a>

  <a id="CommonInfo.ResolvedInput"></a><a id="2162" href="UTxO.html#2162" class="Function">ResolvedInput</a>  <a id="2177" class="Symbol">=</a> <a id="2179" href="UTxO.html#1523" class="Record">TxInput</a> <a id="2187" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2189" href="UTxO.html#821" class="Record">TxOutput</a>
  <a id="CommonInfo.ResolvedInputs"></a><a id="2200" href="UTxO.html#2200" class="Function">ResolvedInputs</a> <a id="2215" class="Symbol">=</a> <a id="2217" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="2222" href="UTxO.html#2162" class="Function">ResolvedInput</a>

  <a id="CommonInfo.resolveInputs"></a><a id="2239" href="UTxO.html#2239" class="Function">resolveInputs</a> <a id="2253" class="Symbol">:</a> <a id="2255" class="Symbol">∀</a> <a id="2257" href="UTxO.html#2257" class="Bound">tx</a> <a id="2260" class="Symbol">→</a> <a id="2262" href="UTxO.html#2086" class="Function">Resolved</a> <a id="2271" href="UTxO.html#2257" class="Bound">tx</a> <a id="2274" class="Symbol">→</a> <a id="2276" href="UTxO.html#2200" class="Function">ResolvedInputs</a>
  <a id="2293" href="UTxO.html#2239" class="Function">resolveInputs</a> <a id="2307" href="UTxO.html#2307" class="Bound">tx</a> <a id="2310" href="UTxO.html#2310" class="Bound">resolvedTx</a> <a id="2321" class="Symbol">=</a> <a id="2323" href="Data.List.Membership.Setoid.html#1137" class="Function">mapWith∈</a> <a id="2332" class="Symbol">(</a><a id="2333" href="UTxO.html#2307" class="Bound">tx</a> <a id="2336" class="Symbol">.</a><a id="2337" href="UTxO.html#1706" class="Field">inputs</a><a id="2343" class="Symbol">)</a> <a id="2345" class="Symbol">λ</a> <a id="2347" class="Symbol">{</a><a id="2348" href="UTxO.html#2348" class="Bound">i</a><a id="2349" class="Symbol">}</a> <a id="2351" href="UTxO.html#2351" class="Bound">i∈</a> <a id="2354" class="Symbol">→</a>
    <a id="2360" href="UTxO.html#2348" class="Bound">i</a> <a id="2362" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2364" href="UTxO.html#2310" class="Bound">resolvedTx</a> <a id="2375" class="Symbol">(</a><a id="2376" href="Data.List.Membership.Propositional.Properties.html#3377" class="Function">∈-map⁺</a> <a id="2383" href="UTxO.html#1554" class="Field">outputRef</a> <a id="2393" href="UTxO.html#2351" class="Bound">i∈</a><a id="2395" class="Symbol">)</a>

  <a id="CommonInfo.mkInputInfo"></a><a id="2400" href="UTxO.html#2400" class="Function">mkInputInfo</a> <a id="2412" class="Symbol">:</a> <a id="2414" href="UTxO.html#2162" class="Function">ResolvedInput</a> <a id="2428" class="Symbol">→</a> <a id="2430" href="UTxO.html#1011" class="Record">InputInfo</a>
  <a id="2442" href="UTxO.html#2400" class="Function">mkInputInfo</a> <a id="2454" class="Symbol">(</a><a id="2455" href="UTxO.html#2455" class="Bound">i</a> <a id="2457" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2459" href="UTxO.html#2459" class="Bound">o</a><a id="2460" class="Symbol">)</a> <a id="2462" class="Symbol">=</a> <a id="2464" class="Keyword">record</a>
    <a id="2475" class="Symbol">{</a> <a id="2477" href="UTxO.html#1042" class="Field">outputRef</a>     <a id="2491" class="Symbol">=</a> <a id="2493" href="UTxO.html#2459" class="Bound">o</a>
    <a id="2499" class="Symbol">;</a> <a id="2501" href="UTxO.html#1143" class="Field">validatorHash</a> <a id="2515" class="Symbol">=</a> <a id="2517" href="UTxO.html#2455" class="Bound">i</a> <a id="2519" class="Symbol">.</a><a id="2520" href="UTxO.html#1588" class="Field">validator</a> <a id="2530" href="UTxO.html#655" class="Postulate Operator">♯</a>
    <a id="2536" class="Symbol">;</a> <a id="2538" href="UTxO.html#1174" class="Field">redeemerHash</a>  <a id="2552" class="Symbol">=</a> <a id="2554" href="UTxO.html#2455" class="Bound">i</a> <a id="2556" class="Symbol">.</a><a id="2557" href="UTxO.html#1631" class="Field">redeemer</a> <a id="2566" href="UTxO.html#655" class="Postulate Operator">♯</a> <a id="2568" class="Symbol">}</a>

  <a id="CommonInfo.mkTxInfo"></a><a id="2573" href="UTxO.html#2573" class="Function">mkTxInfo</a> <a id="2582" class="Symbol">:</a> <a id="2584" class="Symbol">∀</a> <a id="2586" class="Symbol">(</a><a id="2587" href="UTxO.html#2587" class="Bound">tx</a> <a id="2590" class="Symbol">:</a> <a id="2592" href="UTxO.html#1680" class="Record">Tx</a><a id="2594" class="Symbol">)</a> <a id="2596" class="Symbol">→</a> <a id="2598" href="UTxO.html#2086" class="Function">Resolved</a> <a id="2607" href="UTxO.html#2587" class="Bound">tx</a> <a id="2610" class="Symbol">→</a> <a id="2612" href="UTxO.html#1286" class="Record">TxInfo</a>
  <a id="2621" href="UTxO.html#2573" class="Function">mkTxInfo</a> <a id="2630" href="UTxO.html#2630" class="Bound">tx</a> <a id="2633" href="UTxO.html#2633" class="Bound">resolvedTx</a> <a id="2644" class="Symbol">=</a> <a id="2646" class="Keyword">record</a>
    <a id="2657" class="Symbol">{</a> <a id="2659" href="UTxO.html#1314" class="Field">inputs</a>  <a id="2667" class="Symbol">=</a> <a id="2669" href="UTxO.html#2400" class="Function">mkInputInfo</a> <a id="2681" href="Prelude.Functor.html#382" class="Field Operator">&lt;$&gt;</a> <a id="2685" href="UTxO.html#2239" class="Function">resolveInputs</a> <a id="2699" href="UTxO.html#2630" class="Bound">tx</a> <a id="2702" href="UTxO.html#2633" class="Bound">resolvedTx</a>
    <a id="2717" class="Symbol">;</a> <a id="2719" href="UTxO.html#1347" class="Field">outputs</a> <a id="2727" class="Symbol">=</a> <a id="2729" href="UTxO.html#2630" class="Bound">tx</a> <a id="2732" class="Symbol">.</a><a id="2733" href="UTxO.html#1739" class="Field">outputs</a>
    <a id="2745" class="Symbol">;</a> <a id="2747" href="UTxO.html#1379" class="Field">forge</a>   <a id="2755" class="Symbol">=</a> <a id="2757" href="UTxO.html#2630" class="Bound">tx</a> <a id="2760" class="Symbol">.</a><a id="2761" href="UTxO.html#1773" class="Field">forge</a> <a id="2767" class="Symbol">}</a>

<a id="All-syntax"></a><a id="2770" href="UTxO.html#2770" class="Function">All-syntax</a> <a id="2781" class="Symbol">=</a> <a id="2783" href="Data.List.Relation.Unary.All.html#1453" class="Datatype">All</a>
<a id="2787" class="Keyword">syntax</a> <a id="2794" href="UTxO.html#2770" class="Function">All-syntax</a> <a id="2805" class="Symbol">(λ</a> <a id="2808" class="Bound">i</a> <a id="2810" class="Symbol">→</a> <a id="2812" class="Bound">P</a><a id="2813" class="Symbol">)</a> <a id="2815" class="Bound">xs</a> <a id="2818" class="Symbol">=</a> <a id="2820" class="Function">∀[</a> <a id="2823" class="Bound">i</a> <a id="2825" class="Function">∈</a> <a id="2827" class="Bound">xs</a> <a id="2830" class="Function">]</a> <a id="2832" class="Bound">P</a>

<a id="Any-syntax"></a><a id="2835" href="UTxO.html#2835" class="Function">Any-syntax</a> <a id="2846" class="Symbol">=</a> <a id="2848" href="Data.List.Relation.Unary.Any.html#1165" class="Datatype">Any</a>
<a id="2852" class="Keyword">syntax</a> <a id="2859" href="UTxO.html#2835" class="Function">Any-syntax</a> <a id="2870" class="Symbol">(λ</a> <a id="2873" class="Bound">i</a> <a id="2875" class="Symbol">→</a> <a id="2877" class="Bound">P</a><a id="2878" class="Symbol">)</a> <a id="2880" class="Bound">xs</a> <a id="2883" class="Symbol">=</a> <a id="2885" class="Function">∃[</a> <a id="2888" class="Bound">i</a> <a id="2890" class="Function">∈</a> <a id="2892" class="Bound">xs</a> <a id="2895" class="Function">]</a> <a id="2897" class="Bound">P</a>

<a id="2900" class="Comment">--</a>

<a id="2904" class="Keyword">record</a> <a id="TxOutputRef"></a><a id="2911" href="UTxO.html#2911" class="Record">TxOutputRef</a> <a id="2923" class="Symbol">:</a> <a id="2925" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="2930" class="Keyword">where</a>
  <a id="2938" class="Keyword">constructor</a> <a id="_indexed-at_"></a><a id="2950" href="UTxO.html#2950" class="InductiveConstructor Operator">_indexed-at_</a>
  <a id="2965" class="Keyword">field</a> <a id="TxOutputRef.txId"></a><a id="2971" href="UTxO.html#2971" class="Field">txId</a>  <a id="2977" class="Symbol">:</a> <a id="2979" href="UTxO.html#616" class="Function">HashId</a>
        <a id="TxOutputRef.index"></a><a id="2994" href="UTxO.html#2994" class="Field">index</a> <a id="3000" class="Symbol">:</a> <a id="3002" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="3004" class="Keyword">open</a> <a id="3009" href="UTxO.html#2911" class="Module">TxOutputRef</a> <a id="3021" class="Keyword">public</a>
<a id="3028" class="Keyword">unquoteDecl</a> <a id="DecEq-TxOR"></a><a id="3040" href="UTxO.html#3040" class="Function">DecEq-TxOR</a> <a id="3051" class="Symbol">=</a> <a id="3053" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="3060" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="3066" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="3068" class="Keyword">quote</a> <a id="3074" href="UTxO.html#2911" class="Record">TxOutputRef</a> <a id="3086" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3088" href="UTxO.html#3040" class="Function">DecEq-TxOR</a> <a id="3099" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="3102" class="Keyword">open</a> <a id="3107" href="UTxO.html#1475" class="Module">CommonInfo</a> <a id="3118" href="UTxO.html#2911" class="Record">TxOutputRef</a> <a id="3130" class="Keyword">public</a>

<a id="3138" class="Comment">-- The state of a ledger maps output references locked by a validator to a value.</a>

<a id="3221" class="Keyword">private</a>
  <a id="S"></a><a id="3231" href="UTxO.html#3231" class="Function">S</a> <a id="3233" class="Symbol">:</a> <a id="3235" href="Agda.Primitive.html#320" class="Primitive">Type</a>
  <a id="3242" href="UTxO.html#3231" class="Function">S</a> <a id="3244" class="Symbol">=</a> <a id="3246" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3251" href="UTxO.html#2911" class="Record">TxOutputRef</a> <a id="3263" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3265" href="UTxO.html#821" class="Record">TxOutput</a> <a id="3274" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>

<a id="UTxO"></a><a id="3277" href="UTxO.html#3277" class="Function">UTxO</a> <a id="3282" class="Symbol">=</a> <a id="3284" href="UTxO.html#3231" class="Function">S</a>

<a id="mkUtxo"></a><a id="3287" href="UTxO.html#3287" class="Function">mkUtxo</a> <a id="3294" class="Symbol">:</a> <a id="3296" class="Symbol">∀</a> <a id="3298" class="Symbol">{</a><a id="3299" href="UTxO.html#3299" class="Bound">out</a><a id="3302" class="Symbol">}</a> <a id="3304" href="UTxO.html#3304" class="Bound">tx</a> <a id="3307" class="Symbol">→</a> <a id="3309" href="UTxO.html#3299" class="Bound">out</a> <a id="3313" href="Data.List.Membership.Setoid.html#896" class="Function Operator">L.Mem.∈</a> <a id="3321" href="UTxO.html#1739" class="Field">outputs</a> <a id="3329" href="UTxO.html#3304" class="Bound">tx</a> <a id="3332" class="Symbol">→</a> <a id="3334" href="UTxO.html#2911" class="Record">TxOutputRef</a> <a id="3346" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="3348" href="UTxO.html#821" class="Record">TxOutput</a>
<a id="3357" href="UTxO.html#3287" class="Function">mkUtxo</a> <a id="3364" class="Symbol">{</a><a id="3365" href="UTxO.html#3365" class="Bound">out</a><a id="3368" class="Symbol">}</a> <a id="3370" href="UTxO.html#3370" class="Bound">tx</a> <a id="3373" href="UTxO.html#3373" class="Bound">out∈</a> <a id="3378" class="Symbol">=</a> <a id="3380" class="Symbol">(</a><a id="3381" href="UTxO.html#3370" class="Bound">tx</a> <a id="3384" href="UTxO.html#655" class="Postulate Operator">♯</a><a id="3385" class="Symbol">)</a> <a id="3387" href="UTxO.html#2950" class="InductiveConstructor Operator">indexed-at</a> <a id="3398" href="Prelude.ToN.html#139" class="Field">toℕ</a> <a id="3402" class="Symbol">(</a><a id="3403" href="Data.List.Relation.Unary.Any.html#1826" class="Function">L.Any.index</a> <a id="3415" href="UTxO.html#3373" class="Bound">out∈</a><a id="3419" class="Symbol">)</a> <a id="3421" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3423" href="UTxO.html#3365" class="Bound">out</a>

<a id="utxoTx"></a><a id="3428" href="UTxO.html#3428" class="Function">utxoTx</a> <a id="3435" class="Symbol">:</a> <a id="3437" href="UTxO.html#1680" class="Record">Tx</a> <a id="3440" class="Symbol">→</a> <a id="3442" href="UTxO.html#3231" class="Function">S</a>
<a id="3444" href="UTxO.html#3428" class="Function">utxoTx</a> <a id="3451" href="UTxO.html#3451" class="Bound">tx</a> <a id="3454" class="Symbol">=</a> <a id="3456" href="Prelude.FromList.html#197" class="Field">fromList</a> <a id="3465" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="3467" href="Data.List.Membership.Setoid.html#1137" class="Function">L.Mem.mapWith∈</a> <a id="3482" class="Symbol">(</a><a id="3483" href="UTxO.html#3451" class="Bound">tx</a> <a id="3486" class="Symbol">.</a><a id="3487" href="UTxO.html#1739" class="Field">outputs</a><a id="3494" class="Symbol">)</a> <a id="3496" class="Symbol">(</a><a id="3497" href="UTxO.html#3287" class="Function">mkUtxo</a> <a id="3504" href="UTxO.html#3451" class="Bound">tx</a><a id="3506" class="Symbol">)</a>

<a id="3509" class="Comment">-- ** Utilities relating Prelude.Maps and Prelude.Bags.</a>
<a id="3565" class="Keyword">module</a> <a id="3572" href="UTxO.html#3572" class="Module">_</a> <a id="3574" class="Symbol">{</a><a id="3575" href="UTxO.html#3575" class="Bound">K</a> <a id="3577" href="UTxO.html#3577" class="Bound">V</a> <a id="3579" class="Symbol">:</a> <a id="3581" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="3585" class="Symbol">}</a> <a id="3587" class="Symbol">⦃</a> <a id="3589" href="UTxO.html#3589" class="Bound">_</a> <a id="3591" class="Symbol">:</a> <a id="3593" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="3599" href="UTxO.html#3575" class="Bound">K</a> <a id="3601" class="Symbol">⦄</a> <a id="3603" class="Symbol">⦃</a> <a id="3605" href="UTxO.html#3605" class="Bound">_</a> <a id="3607" class="Symbol">:</a> <a id="3609" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="3615" href="UTxO.html#3577" class="Bound">V</a> <a id="3617" class="Symbol">⦄</a> <a id="3619" class="Keyword">where</a>
  <a id="3627" class="Keyword">open</a> <a id="3632" class="Keyword">import</a> <a id="3639" href="Prelude.ToList.html" class="Module">Prelude.ToList</a>
  <a id="3656" class="Keyword">import</a> <a id="3663" href="Prelude.Sets.html" class="Module">Prelude.Sets</a> <a id="3676" class="Symbol">as</a> <a id="3679" class="Module">S</a>

  <a id="3684" href="UTxO.html#3684" class="Function Operator">_‼_</a> <a id="3688" class="Symbol">:</a> <a id="3690" class="Symbol">{</a><a id="3691" href="UTxO.html#3691" class="Bound">k</a> <a id="3693" class="Symbol">:</a> <a id="3695" href="UTxO.html#3575" class="Bound">K</a><a id="3696" class="Symbol">}</a> <a id="3698" class="Symbol">(</a><a id="3699" href="UTxO.html#3699" class="Bound">m</a> <a id="3701" class="Symbol">:</a> <a id="3703" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3708" href="UTxO.html#3575" class="Bound">K</a> <a id="3710" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3712" href="UTxO.html#3577" class="Bound">V</a> <a id="3714" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a><a id="3715" class="Symbol">)</a> <a id="3717" class="Symbol">→</a> <a id="3719" href="UTxO.html#3691" class="Bound">k</a> <a id="3721" href="Prelude.Maps.AsSets.html#1627" class="Function Operator">∈ᵈ</a> <a id="3724" href="UTxO.html#3699" class="Bound">m</a> <a id="3726" class="Symbol">→</a> <a id="3728" href="UTxO.html#3577" class="Bound">V</a>
  <a id="3732" href="UTxO.html#3732" class="Bound">m</a> <a id="3734" href="UTxO.html#3684" class="Function Operator">‼</a> <a id="3736" href="UTxO.html#3736" class="Bound">k∈</a> <a id="3739" class="Symbol">=</a> <a id="3741" href="Prelude.Maybes.html#2522" class="Function">destruct-Is-just</a> <a id="3758" class="Symbol">(</a><a id="3759" href="Prelude.Maps.AsSets.html#4597" class="Function">∈ᵈ⇒⁉</a> <a id="3764" href="UTxO.html#3732" class="Bound">m</a> <a id="3766" href="UTxO.html#3736" class="Bound">k∈</a><a id="3768" class="Symbol">)</a> <a id="3770" class="Symbol">.</a><a id="3771" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a>

  <a id="3780" href="UTxO.html#3780" class="Function Operator">_─ᵏˢ_</a> <a id="3786" class="Symbol">:</a> <a id="3788" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3793" href="UTxO.html#3575" class="Bound">K</a> <a id="3795" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3797" href="UTxO.html#3577" class="Bound">V</a> <a id="3799" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a> <a id="3801" class="Symbol">→</a> <a id="3803" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="3808" href="UTxO.html#3575" class="Bound">K</a> <a id="3810" class="Symbol">→</a> <a id="3812" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3817" href="UTxO.html#3575" class="Bound">K</a> <a id="3819" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3821" href="UTxO.html#3577" class="Bound">V</a> <a id="3823" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a>
  <a id="3827" href="UTxO.html#3827" class="Bound">m</a> <a id="3829" href="UTxO.html#3780" class="Function Operator">─ᵏˢ</a> <a id="3833" href="UTxO.html#3833" class="Bound">ks</a> <a id="3836" class="Symbol">=</a> <a id="3838" href="Prelude.Maps.AsSets.html#3369" class="Function">filterK</a> <a id="3846" class="Symbol">(</a><a id="3847" href="Prelude.Membership.html#613" class="Function Operator">_∉?</a> <a id="3851" href="UTxO.html#3833" class="Bound">ks</a><a id="3853" class="Symbol">)</a> <a id="3855" href="UTxO.html#3827" class="Bound">m</a>

  <a id="3860" href="UTxO.html#3860" class="Function">keys</a> <a id="3865" class="Symbol">:</a> <a id="3867" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3872" href="UTxO.html#3575" class="Bound">K</a> <a id="3874" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3876" href="UTxO.html#3577" class="Bound">V</a> <a id="3878" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a> <a id="3880" class="Symbol">→</a> <a id="3882" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="3887" href="UTxO.html#3575" class="Bound">K</a>
  <a id="3891" href="UTxO.html#3860" class="Function">keys</a> <a id="3896" class="Symbol">=</a> <a id="3898" href="Data.List.Base.html#1553" class="Function">map</a> <a id="3902" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="3908" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3910" href="Prelude.ToList.html#193" class="Field">toList</a>

  <a id="3920" href="UTxO.html#3920" class="Function">values</a> <a id="3927" class="Symbol">:</a> <a id="3929" href="Prelude.Maps.AsSets.html#550" class="Record">Map⟨</a> <a id="3934" href="UTxO.html#3575" class="Bound">K</a> <a id="3936" href="Prelude.Maps.AsSets.html#550" class="Record">↦</a> <a id="3938" href="UTxO.html#3577" class="Bound">V</a> <a id="3940" href="Prelude.Maps.AsSets.html#550" class="Record">⟩</a> <a id="3942" class="Symbol">→</a> <a id="3944" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="3949" href="UTxO.html#3577" class="Bound">V</a>
  <a id="3953" href="UTxO.html#3920" class="Function">values</a> <a id="3960" class="Symbol">=</a> <a id="3962" href="Data.List.Base.html#1553" class="Function">map</a> <a id="3966" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="3972" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3974" href="Prelude.ToList.html#193" class="Field">toList</a>

<a id="applyTx"></a><a id="3982" href="UTxO.html#3982" class="Function">applyTx</a> <a id="3990" class="Symbol">:</a> <a id="3992" href="UTxO.html#1680" class="Record">Tx</a> <a id="3995" class="Symbol">→</a> <a id="3997" class="Symbol">(</a><a id="3998" href="UTxO.html#3277" class="Function">UTxO</a> <a id="4003" class="Symbol">→</a> <a id="4005" href="UTxO.html#3277" class="Function">UTxO</a><a id="4009" class="Symbol">)</a>
<a id="4011" href="UTxO.html#3982" class="Function">applyTx</a> <a id="4019" href="UTxO.html#4019" class="Bound">tx</a> <a id="4022" href="UTxO.html#4022" class="Bound">utxo</a> <a id="4027" class="Symbol">=</a> <a id="4029" class="Symbol">(</a><a id="4030" href="UTxO.html#4022" class="Bound">utxo</a> <a id="4035" href="UTxO.html#3780" class="Function Operator">─ᵏˢ</a> <a id="4039" href="UTxO.html#2010" class="Function">outputRefs</a> <a id="4050" href="UTxO.html#4019" class="Bound">tx</a><a id="4052" class="Symbol">)</a> <a id="4054" href="Prelude.Maps.AsSets.html#1469" class="Function Operator">∪</a> <a id="4056" href="UTxO.html#3428" class="Function">utxoTx</a> <a id="4063" href="UTxO.html#4019" class="Bound">tx</a>

<a id="4067" class="Keyword">record</a> <a id="IsValidTx"></a><a id="4074" href="UTxO.html#4074" class="Record">IsValidTx</a> <a id="4084" class="Symbol">(</a><a id="4085" href="UTxO.html#4085" class="Bound">tx</a> <a id="4088" class="Symbol">:</a> <a id="4090" href="UTxO.html#1680" class="Record">Tx</a><a id="4092" class="Symbol">)</a> <a id="4094" class="Symbol">(</a><a id="4095" href="UTxO.html#4095" class="Bound">utxos</a> <a id="4101" class="Symbol">:</a> <a id="4103" href="UTxO.html#3231" class="Function">S</a><a id="4104" class="Symbol">)</a> <a id="4106" class="Symbol">:</a> <a id="4108" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="4113" class="Keyword">where</a>
  <a id="4121" class="Keyword">field</a>
    <a id="IsValidTx.noDoubleSpending"></a><a id="4131" href="UTxO.html#4131" class="Field">noDoubleSpending</a> <a id="4148" class="Symbol">:</a>
      <a id="4156" href="Prelude.Irrelevance.List.Unique.html#1002" class="Function">·Unique</a> <a id="4164" class="Symbol">(</a><a id="4165" href="UTxO.html#2010" class="Function">outputRefs</a> <a id="4176" href="UTxO.html#4085" class="Bound">tx</a><a id="4178" class="Symbol">)</a>

    <a id="IsValidTx.validOutputRefs"></a><a id="4185" href="UTxO.html#4185" class="Field">validOutputRefs</a> <a id="4201" class="Symbol">:</a>
      <a id="4209" href="UTxO.html#2770" class="Function">∀[</a> <a id="4212" href="UTxO.html#4212" class="Bound">ref</a> <a id="4216" href="UTxO.html#2770" class="Function">∈</a> <a id="4218" href="UTxO.html#2010" class="Function">outputRefs</a> <a id="4229" href="UTxO.html#4085" class="Bound">tx</a> <a id="4232" href="UTxO.html#2770" class="Function">]</a>
        <a id="4242" class="Symbol">(</a><a id="4243" href="UTxO.html#4212" class="Bound">ref</a> <a id="4247" href="Prelude.Maps.AsSets.html#1627" class="Function Operator">∈ᵈ</a> <a id="4250" href="UTxO.html#4095" class="Bound">utxos</a><a id="4255" class="Symbol">)</a>

  <a id="IsValidTx.resolved"></a><a id="4260" href="UTxO.html#4260" class="Function">resolved</a> <a id="4269" class="Symbol">:</a> <a id="4271" href="UTxO.html#2086" class="Function">Resolved</a> <a id="4280" href="UTxO.html#4085" class="Bound">tx</a>
  <a id="4285" href="UTxO.html#4260" class="Function">resolved</a> <a id="4294" class="Symbol">=</a> <a id="4296" class="Symbol">(</a><a id="4297" href="UTxO.html#4095" class="Bound">utxos</a> <a id="4303" href="UTxO.html#3684" class="Function Operator">‼_</a><a id="4305" class="Symbol">)</a> <a id="4307" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="4309" href="Data.List.Relation.Unary.All.html#5775" class="Function">L.All.lookup</a> <a id="4322" href="UTxO.html#4185" class="Field">validOutputRefs</a>

  <a id="IsValidTx.txInfo"></a><a id="4341" href="UTxO.html#4341" class="Function">txInfo</a> <a id="4348" class="Symbol">=</a> <a id="4350" href="UTxO.html#2573" class="Function">mkTxInfo</a> <a id="4359" href="UTxO.html#4085" class="Bound">tx</a> <a id="4362" href="UTxO.html#4260" class="Function">resolved</a>
  <a id="IsValidTx.resolvedInputs"></a><a id="4373" href="UTxO.html#4373" class="Function">resolvedInputs</a> <a id="4388" class="Symbol">=</a> <a id="4390" href="UTxO.html#2239" class="Function">resolveInputs</a> <a id="4404" href="UTxO.html#4085" class="Bound">tx</a> <a id="4407" href="UTxO.html#4260" class="Function">resolved</a>

  <a id="4419" class="Keyword">field</a>
    <a id="IsValidTx.preservesValues"></a><a id="4429" href="UTxO.html#4429" class="Field">preservesValues</a> <a id="4445" class="Symbol">:</a>
      <a id="4453" href="UTxO.html#4085" class="Bound">tx</a> <a id="4456" class="Symbol">.</a><a id="4457" href="UTxO.html#1773" class="Field">forge</a> <a id="4463" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="4465" href="UTxO.html#742" class="Function">∑</a> <a id="4467" href="UTxO.html#4373" class="Function">resolvedInputs</a> <a id="4482" class="Symbol">(</a><a id="4483" href="UTxO.html#870" class="Field">value</a> <a id="4489" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="4491" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="4496" class="Symbol">)</a> <a id="4498" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4500" href="UTxO.html#742" class="Function">∑</a> <a id="4502" class="Symbol">(</a><a id="4503" href="UTxO.html#4085" class="Bound">tx</a> <a id="4506" class="Symbol">.</a><a id="4507" href="UTxO.html#1739" class="Field">outputs</a><a id="4514" class="Symbol">)</a> <a id="4516" href="UTxO.html#870" class="Field">value</a>

    <a id="IsValidTx.allInputsValidate"></a><a id="4527" href="UTxO.html#4527" class="Field">allInputsValidate</a> <a id="4545" class="Symbol">:</a>
      <a id="4553" href="UTxO.html#2770" class="Function">∀[</a> <a id="4556" href="UTxO.html#4556" class="Bound">i</a> <a id="4558" href="UTxO.html#2770" class="Function">∈</a> <a id="4560" href="UTxO.html#4085" class="Bound">tx</a> <a id="4563" class="Symbol">.</a><a id="4564" href="UTxO.html#1706" class="Field">inputs</a> <a id="4571" href="UTxO.html#2770" class="Function">]</a>
        <a id="4581" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="4583" class="Symbol">(</a><a id="4584" href="UTxO.html#4556" class="Bound">i</a> <a id="4586" class="Symbol">.</a><a id="4587" href="UTxO.html#1588" class="Field">validator</a> <a id="4597" href="UTxO.html#4341" class="Function">txInfo</a> <a id="4604" class="Symbol">(</a><a id="4605" href="UTxO.html#4556" class="Bound">i</a> <a id="4607" class="Symbol">.</a><a id="4608" href="UTxO.html#1631" class="Field">redeemer</a><a id="4616" class="Symbol">))</a>

    <a id="IsValidTx.validateValidHashes"></a><a id="4624" href="UTxO.html#4624" class="Field">validateValidHashes</a> <a id="4644" class="Symbol">:</a>
      <a id="4652" href="UTxO.html#2770" class="Function">∀[</a> <a id="4655" href="UTxO.html#4655" class="Bound">(</a><a id="4656" href="UTxO.html#4656" class="Bound">i</a> <a id="4658" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="4660" href="UTxO.html#4660" class="Bound">o</a><a id="4661" href="UTxO.html#4655" class="Bound">)</a> <a id="4663" href="UTxO.html#2770" class="Function">∈</a> <a id="4665" href="UTxO.html#4373" class="Function">resolvedInputs</a> <a id="4680" href="UTxO.html#2770" class="Function">]</a>
        <a id="4690" class="Symbol">(</a><a id="4691" href="UTxO.html#4660" class="Bound">o</a> <a id="4693" class="Symbol">.</a><a id="4694" href="UTxO.html#895" class="Field">address</a> <a id="4702" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4704" href="UTxO.html#4656" class="Bound">i</a> <a id="4706" class="Symbol">.</a><a id="4707" href="UTxO.html#1588" class="Field">validator</a> <a id="4717" href="UTxO.html#655" class="Postulate Operator">♯</a><a id="4718" class="Symbol">)</a>

<a id="4721" class="Keyword">open</a> <a id="4726" href="UTxO.html#4074" class="Module">IsValidTx</a> <a id="4736" class="Keyword">public</a>

<a id="4744" class="Keyword">instance</a>
  <a id="·Valid"></a><a id="4755" href="UTxO.html#4755" class="Function">·Valid</a> <a id="4762" class="Symbol">:</a> <a id="4764" class="Symbol">∀</a> <a id="4766" class="Symbol">{</a><a id="4767" href="UTxO.html#4767" class="Bound">tx</a> <a id="4770" href="UTxO.html#4770" class="Bound">s</a><a id="4771" class="Symbol">}</a> <a id="4773" class="Symbol">→</a> <a id="4775" href="Prelude.Irrelevance.Core.html#215" class="Record Operator">·</a> <a id="4777" href="UTxO.html#4074" class="Record">IsValidTx</a> <a id="4787" href="UTxO.html#4767" class="Bound">tx</a> <a id="4790" href="UTxO.html#4770" class="Bound">s</a>
  <a id="4794" href="UTxO.html#4755" class="Function">·Valid</a> <a id="4801" class="Symbol">{</a><a id="4802" class="Argument">s</a> <a id="4804" class="Symbol">=</a> <a id="4806" class="Symbol">_</a> <a id="4808" href="Prelude.Maps.AsSets.html#581" class="InductiveConstructor Operator">⊣</a> <a id="4810" href="UTxO.html#4810" class="Bound">·uniq</a><a id="4815" class="Symbol">}</a> <a id="4817" class="Symbol">.</a><a id="4818" href="Prelude.Irrelevance.Core.html#254" class="Field">∀≡</a>
    <a id="4825" class="Symbol">(</a><a id="4826" class="Keyword">record</a> <a id="4833" class="Symbol">{</a> <a id="4835" href="UTxO.html#4131" class="Field">noDoubleSpending</a> <a id="4852" class="Symbol">=</a> <a id="4854" href="UTxO.html#4854" class="Bound">ndp</a>
            <a id="4870" class="Symbol">;</a> <a id="4872" href="UTxO.html#4185" class="Field">validOutputRefs</a> <a id="4888" class="Symbol">=</a> <a id="4890" href="UTxO.html#4890" class="Bound">vor</a>
            <a id="4906" class="Symbol">;</a> <a id="4908" href="UTxO.html#4429" class="Field">preservesValues</a> <a id="4924" class="Symbol">=</a> <a id="4926" href="UTxO.html#4926" class="Bound">pv</a>
            <a id="4941" class="Symbol">;</a> <a id="4943" href="UTxO.html#4527" class="Field">allInputsValidate</a> <a id="4961" class="Symbol">=</a> <a id="4963" href="UTxO.html#4963" class="Bound">aiv</a>
            <a id="4979" class="Symbol">;</a> <a id="4981" href="UTxO.html#4624" class="Field">validateValidHashes</a> <a id="5001" class="Symbol">=</a> <a id="5003" href="UTxO.html#5003" class="Bound">vvh</a>
            <a id="5019" class="Symbol">})</a>
    <a id="5026" class="Symbol">(</a><a id="5027" class="Keyword">record</a> <a id="5034" class="Symbol">{</a> <a id="5036" href="UTxO.html#4131" class="Field">noDoubleSpending</a> <a id="5053" class="Symbol">=</a> <a id="5055" href="UTxO.html#5055" class="Bound">ndp′</a>
            <a id="5072" class="Symbol">;</a> <a id="5074" href="UTxO.html#4185" class="Field">validOutputRefs</a> <a id="5090" class="Symbol">=</a> <a id="5092" href="UTxO.html#5092" class="Bound">vor′</a>
            <a id="5109" class="Symbol">;</a> <a id="5111" href="UTxO.html#4429" class="Field">preservesValues</a> <a id="5127" class="Symbol">=</a> <a id="5129" href="UTxO.html#5129" class="Bound">pv′</a>
            <a id="5145" class="Symbol">;</a> <a id="5147" href="UTxO.html#4527" class="Field">allInputsValidate</a> <a id="5165" class="Symbol">=</a> <a id="5167" href="UTxO.html#5167" class="Bound">aiv′</a>
            <a id="5184" class="Symbol">;</a> <a id="5186" href="UTxO.html#4624" class="Field">validateValidHashes</a> <a id="5206" class="Symbol">=</a> <a id="5208" href="UTxO.html#5208" class="Bound">vvh′</a>
            <a id="5225" class="Symbol">})</a>
    <a id="5232" class="Keyword">with</a> <a id="5237" href="UTxO.html#5237" class="Bound">uniq</a> ← <a id="5244" href="Relation.Nullary.html#1847" class="Function">recompute</a> <a id="5254" href="Prelude.Decidable.Core.html#166" class="Field">dec</a> <a id="5258" href="UTxO.html#4810" class="Bound">·uniq</a>
    <a id="5268" class="Keyword">rewrite</a> <a id="5276" href="Prelude.Irrelevance.Core.html#254" class="Field">∀≡</a> <a id="5279" href="UTxO.html#4854" class="Bound">ndp</a> <a id="5283" href="UTxO.html#5055" class="Bound">ndp′</a>
          <a id="5298" class="Symbol">|</a> <a id="5300" href="Data.List.Relation.Unary.All.html#6499" class="Function">L.All.irrelevant</a> <a id="5317" class="Symbol">(</a><a id="5318" href="Prelude.Lists.WithK.html#2778" class="Function">∈-irr</a> <a id="5324" href="UTxO.html#5237" class="Bound">uniq</a><a id="5328" class="Symbol">)</a> <a id="5330" href="UTxO.html#4890" class="Bound">vor</a> <a id="5334" href="UTxO.html#5092" class="Bound">vor′</a>
          <a id="5349" class="Symbol">|</a> <a id="5351" href="Prelude.Irrelevance.Core.html#254" class="Field">∀≡</a> <a id="5354" href="UTxO.html#4926" class="Bound">pv</a> <a id="5357" href="UTxO.html#5129" class="Bound">pv′</a>
          <a id="5371" class="Symbol">|</a> <a id="5373" href="Data.List.Relation.Unary.All.html#6499" class="Function">L.All.irrelevant</a> <a id="5390" href="Data.Bool.Properties.html#15414" class="Function">B.T-irrelevant</a> <a id="5405" href="UTxO.html#4963" class="Bound">aiv</a> <a id="5409" href="UTxO.html#5167" class="Bound">aiv′</a>
          <a id="5424" class="Symbol">|</a> <a id="5426" href="Prelude.Irrelevance.Core.html#254" class="Field">∀≡</a> <a id="5429" href="UTxO.html#5003" class="Bound">vvh</a> <a id="5433" href="UTxO.html#5208" class="Bound">vvh′</a>
          <a id="5448" class="Symbol">=</a> <a id="5450" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="isValidTx?"></a><a id="5456" href="UTxO.html#5456" class="Function">isValidTx?</a> <a id="5467" class="Symbol">:</a> <a id="5469" class="Symbol">∀</a> <a id="5471" href="UTxO.html#5471" class="Bound">tx</a> <a id="5474" href="UTxO.html#5474" class="Bound">s</a> <a id="5476" class="Symbol">→</a> <a id="5478" href="Relation.Nullary.html#1520" class="Record">Dec</a> <a id="5482" class="Symbol">(</a><a id="5483" href="UTxO.html#4074" class="Record">IsValidTx</a> <a id="5493" href="UTxO.html#5471" class="Bound">tx</a> <a id="5496" href="UTxO.html#5474" class="Bound">s</a><a id="5497" class="Symbol">)</a>
<a id="5499" href="UTxO.html#5456" class="Function">isValidTx?</a> <a id="5510" href="UTxO.html#5510" class="Bound">tx</a> <a id="5513" href="UTxO.html#5513" class="Bound">s</a><a id="5514" class="Symbol">@(_</a> <a id="5518" href="Prelude.Maps.AsSets.html#581" class="InductiveConstructor Operator">⊣</a> <a id="5520" href="UTxO.html#5520" class="Bound">·uniq</a><a id="5525" class="Symbol">)</a>
  <a id="5529" class="Keyword">with</a> <a id="5534" href="UTxO.html#5534" class="Bound">uniq</a> ← <a id="5541" href="Relation.Nullary.html#1847" class="Function">recompute</a> <a id="5551" href="Prelude.Decidable.Core.html#166" class="Field">dec</a> <a id="5555" href="UTxO.html#5520" class="Bound">·uniq</a>
  <a id="5563" class="Keyword">with</a> <a id="5568" href="Prelude.Decidable.Core.html#166" class="Field">dec</a>
<a id="5572" class="Symbol">...</a> <a id="5576" class="Symbol">|</a> <a id="5578" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="5581" href="UTxO.html#5581" class="Bound">¬p</a> <a id="5584" class="Symbol">=</a> <a id="5586" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="5589" class="Symbol">(</a><a id="5590" href="UTxO.html#5581" class="Bound">¬p</a> <a id="5593" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="5595" href="UTxO.html#4131" class="Field">noDoubleSpending</a><a id="5611" class="Symbol">)</a>
<a id="5613" class="Symbol">...</a> <a id="5617" class="Symbol">|</a> <a id="5619" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="5623" href="UTxO.html#5623" class="Bound">ndp</a> <a id="5627" class="Keyword">with</a> <a id="5632" href="Prelude.Decidable.Core.html#166" class="Field">dec</a>
<a id="5636" class="Symbol">...</a> <a id="5640" class="Symbol">|</a> <a id="5642" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="5645" href="UTxO.html#5645" class="Bound">¬p</a> <a id="5648" class="Symbol">=</a> <a id="5650" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="5653" class="Symbol">(</a><a id="5654" href="UTxO.html#5645" class="Bound">¬p</a> <a id="5657" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="5659" href="UTxO.html#4185" class="Field">validOutputRefs</a><a id="5674" class="Symbol">)</a>
<a id="5676" class="Symbol">...</a> <a id="5680" class="Symbol">|</a> <a id="5682" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="5686" href="UTxO.html#5686" class="Bound">vor</a> <a id="5690" class="Keyword">with</a> <a id="5695" href="Prelude.Decidable.Core.html#166" class="Field">dec</a>
<a id="5699" class="Symbol">...</a> <a id="5703" class="Symbol">|</a> <a id="5705" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="5708" href="UTxO.html#5708" class="Bound">¬p</a> <a id="5711" class="Symbol">=</a> <a id="5713" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="5716" href="UTxO.html#5731" class="Function">absurd</a>
  <a id="5725" class="Keyword">where</a> <a id="5731" href="UTxO.html#5731" class="Function">absurd</a> <a id="5738" class="Symbol">:</a> <a id="5740" href="Relation.Nullary.html#665" class="Function Operator">¬</a> <a id="5742" href="UTxO.html#4074" class="Record">IsValidTx</a> <a id="5752" class="Bound">tx</a> <a id="5755" class="Bound">s</a>
        <a id="5765" href="UTxO.html#5731" class="Function">absurd</a> <a id="5772" class="Symbol">(</a><a id="5773" class="Keyword">record</a> <a id="5780" class="Symbol">{</a><a id="5781" href="UTxO.html#4185" class="Field">validOutputRefs</a> <a id="5797" class="Symbol">=</a> <a id="5799" href="UTxO.html#5799" class="Bound">vor′</a><a id="5803" class="Symbol">;</a> <a id="5805" href="UTxO.html#4429" class="Field">preservesValues</a> <a id="5821" class="Symbol">=</a> <a id="5823" href="UTxO.html#5823" class="Bound">p</a><a id="5824" class="Symbol">})</a>
          <a id="5837" class="Keyword">rewrite</a> <a id="5845" href="Data.List.Relation.Unary.All.html#6499" class="Function">L.All.irrelevant</a> <a id="5862" class="Symbol">(</a><a id="5863" href="Prelude.Lists.WithK.html#2778" class="Function">∈-irr</a> <a id="5869" href="UTxO.html#5534" class="Bound">uniq</a><a id="5873" class="Symbol">)</a> <a id="5875" class="Bound">vor</a> <a id="5879" href="UTxO.html#5799" class="Bound">vor′</a> <a id="5884" class="Symbol">=</a> <a id="5886" href="UTxO.html#5708" class="Bound">¬p</a> <a id="5889" href="UTxO.html#5823" class="Bound">p</a>
<a id="5891" class="Symbol">...</a> <a id="5895" class="Symbol">|</a> <a id="5897" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="5901" href="UTxO.html#5901" class="Bound">pv</a> <a id="5904" class="Keyword">with</a> <a id="5909" href="Prelude.Decidable.Core.html#166" class="Field">dec</a>
<a id="5913" class="Symbol">...</a> <a id="5917" class="Symbol">|</a> <a id="5919" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="5922" href="UTxO.html#5922" class="Bound">¬p</a> <a id="5925" class="Symbol">=</a> <a id="5927" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="5930" href="UTxO.html#5945" class="Function">absurd</a>
  <a id="5939" class="Keyword">where</a> <a id="5945" href="UTxO.html#5945" class="Function">absurd</a> <a id="5952" class="Symbol">:</a> <a id="5954" href="Relation.Nullary.html#665" class="Function Operator">¬</a> <a id="5956" href="UTxO.html#4074" class="Record">IsValidTx</a> <a id="5966" class="Bound">tx</a> <a id="5969" class="Bound">s</a>
        <a id="5979" href="UTxO.html#5945" class="Function">absurd</a> <a id="5986" class="Symbol">(</a><a id="5987" class="Keyword">record</a> <a id="5994" class="Symbol">{</a><a id="5995" href="UTxO.html#4185" class="Field">validOutputRefs</a> <a id="6011" class="Symbol">=</a> <a id="6013" href="UTxO.html#6013" class="Bound">vor′</a><a id="6017" class="Symbol">;</a> <a id="6019" href="UTxO.html#4527" class="Field">allInputsValidate</a> <a id="6037" class="Symbol">=</a> <a id="6039" href="UTxO.html#6039" class="Bound">p</a><a id="6040" class="Symbol">})</a>
          <a id="6053" class="Keyword">rewrite</a> <a id="6061" href="Data.List.Relation.Unary.All.html#6499" class="Function">L.All.irrelevant</a> <a id="6078" class="Symbol">(</a><a id="6079" href="Prelude.Lists.WithK.html#2778" class="Function">∈-irr</a> <a id="6085" href="UTxO.html#5534" class="Bound">uniq</a><a id="6089" class="Symbol">)</a> <a id="6091" class="Bound">vor</a> <a id="6095" href="UTxO.html#6013" class="Bound">vor′</a> <a id="6100" class="Symbol">=</a> <a id="6102" href="UTxO.html#5922" class="Bound">¬p</a> <a id="6105" href="UTxO.html#6039" class="Bound">p</a>
<a id="6107" class="Symbol">...</a> <a id="6111" class="Symbol">|</a> <a id="6113" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="6117" href="UTxO.html#6117" class="Bound">aiv</a> <a id="6121" class="Keyword">with</a> <a id="6126" href="Prelude.Decidable.Core.html#166" class="Field">dec</a>
<a id="6130" class="Symbol">...</a> <a id="6134" class="Symbol">|</a> <a id="6136" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="6139" href="UTxO.html#6139" class="Bound">¬p</a> <a id="6142" class="Symbol">=</a> <a id="6144" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="6147" href="UTxO.html#6162" class="Function">absurd</a>
  <a id="6156" class="Keyword">where</a> <a id="6162" href="UTxO.html#6162" class="Function">absurd</a> <a id="6169" class="Symbol">:</a> <a id="6171" href="Relation.Nullary.html#665" class="Function Operator">¬</a> <a id="6173" href="UTxO.html#4074" class="Record">IsValidTx</a> <a id="6183" class="Bound">tx</a> <a id="6186" class="Bound">s</a>
        <a id="6196" href="UTxO.html#6162" class="Function">absurd</a> <a id="6203" class="Symbol">(</a><a id="6204" class="Keyword">record</a> <a id="6211" class="Symbol">{</a><a id="6212" href="UTxO.html#4185" class="Field">validOutputRefs</a> <a id="6228" class="Symbol">=</a> <a id="6230" href="UTxO.html#6230" class="Bound">vor′</a><a id="6234" class="Symbol">;</a> <a id="6236" href="UTxO.html#4624" class="Field">validateValidHashes</a> <a id="6256" class="Symbol">=</a> <a id="6258" href="UTxO.html#6258" class="Bound">p</a><a id="6259" class="Symbol">})</a>
          <a id="6272" class="Keyword">rewrite</a> <a id="6280" href="Data.List.Relation.Unary.All.html#6499" class="Function">L.All.irrelevant</a> <a id="6297" class="Symbol">(</a><a id="6298" href="Prelude.Lists.WithK.html#2778" class="Function">∈-irr</a> <a id="6304" href="UTxO.html#5534" class="Bound">uniq</a><a id="6308" class="Symbol">)</a> <a id="6310" class="Bound">vor</a> <a id="6314" href="UTxO.html#6230" class="Bound">vor′</a> <a id="6319" class="Symbol">=</a> <a id="6321" href="UTxO.html#6139" class="Bound">¬p</a> <a id="6324" href="UTxO.html#6258" class="Bound">p</a>
<a id="6326" class="Symbol">...</a> <a id="6330" class="Symbol">|</a> <a id="6332" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="6336" href="UTxO.html#6336" class="Bound">vvh</a> <a id="6340" class="Symbol">=</a> <a id="6342" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="6346" class="Keyword">record</a>
  <a id="6355" class="Symbol">{</a> <a id="6357" href="UTxO.html#4131" class="Field">noDoubleSpending</a> <a id="6374" class="Symbol">=</a> <a id="6376" class="Bound">ndp</a>
  <a id="6382" class="Symbol">;</a> <a id="6384" href="UTxO.html#4185" class="Field">validOutputRefs</a> <a id="6400" class="Symbol">=</a> <a id="6402" class="Bound">vor</a>
  <a id="6408" class="Symbol">;</a> <a id="6410" href="UTxO.html#4429" class="Field">preservesValues</a> <a id="6426" class="Symbol">=</a> <a id="6428" class="Bound">pv</a>
  <a id="6433" class="Symbol">;</a> <a id="6435" href="UTxO.html#4527" class="Field">allInputsValidate</a> <a id="6453" class="Symbol">=</a> <a id="6455" class="Bound">aiv</a>
  <a id="6461" class="Symbol">;</a> <a id="6463" href="UTxO.html#4624" class="Field">validateValidHashes</a> <a id="6483" class="Symbol">=</a> <a id="6485" href="UTxO.html#6336" class="Bound">vvh</a> <a id="6489" class="Symbol">}</a>

<a id="isValidTx"></a><a id="6492" href="UTxO.html#6492" class="Function">isValidTx</a> <a id="6502" class="Symbol">:</a> <a id="6504" href="UTxO.html#1680" class="Record">Tx</a> <a id="6507" class="Symbol">→</a> <a id="6509" href="UTxO.html#3231" class="Function">S</a> <a id="6511" class="Symbol">→</a> <a id="6513" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="6518" href="UTxO.html#6492" class="Function">isValidTx</a> <a id="6528" href="UTxO.html#6528" class="Bound">tx</a> <a id="6531" href="UTxO.html#6531" class="Bound">s</a> <a id="6533" class="Symbol">=</a> <a id="6535" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌊</a> <a id="6537" href="UTxO.html#5456" class="Function">isValidTx?</a> <a id="6548" href="UTxO.html#6528" class="Bound">tx</a> <a id="6551" href="UTxO.html#6531" class="Bound">s</a> <a id="6553" href="Relation.Nullary.Decidable.Core.html#1321" class="Function Operator">⌋</a>

<a id="checkTx"></a><a id="6556" href="UTxO.html#6556" class="Function">checkTx</a> <a id="6564" class="Symbol">:</a> <a id="6566" href="UTxO.html#1286" class="Record">TxInfo</a> <a id="6573" class="Symbol">→</a> <a id="6575" href="UTxO.html#3277" class="Function">UTxO</a> <a id="6580" class="Symbol">→</a> <a id="6582" href="UTxO.html#1680" class="Record">Tx</a> <a id="6585" class="Symbol">→</a> <a id="6587" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="6592" href="UTxO.html#6556" class="Function">checkTx</a> <a id="6600" href="UTxO.html#6600" class="Bound">txi</a> <a id="6604" href="UTxO.html#6604" class="Bound">s</a> <a id="6606" href="UTxO.html#6606" class="Bound">tx</a> <a id="6609" class="Keyword">with</a> <a id="6614" href="UTxO.html#5456" class="Function">isValidTx?</a> <a id="6625" href="UTxO.html#6606" class="Bound">tx</a> <a id="6628" href="UTxO.html#6604" class="Bound">s</a>
<a id="6630" class="Symbol">...</a> <a id="6634" class="Symbol">|</a> <a id="6636" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="6639" class="Symbol">_</a>  <a id="6642" class="Symbol">=</a> <a id="6644" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="6650" class="Symbol">...</a> <a id="6654" class="Symbol">|</a> <a id="6656" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="6660" href="UTxO.html#6660" class="Bound">valid</a> <a id="6666" class="Symbol">=</a> <a id="6668" class="Bound">txi</a> <a id="6672" href="Prelude.DecEq.Core.html#222" class="Function Operator">==</a> <a id="6675" href="UTxO.html#2573" class="Function">mkTxInfo</a> <a id="6684" class="Bound">tx</a> <a id="6687" class="Symbol">(</a><a id="6688" href="UTxO.html#4260" class="Function">resolved</a> <a id="6697" href="UTxO.html#6660" class="Bound">valid</a><a id="6702" class="Symbol">)</a>

<a id="mint"></a><a id="6705" href="UTxO.html#6705" class="Function">mint</a> <a id="6710" class="Symbol">:</a> <a id="6712" href="UTxO.html#1286" class="Record">TxInfo</a> <a id="6719" class="Symbol">→</a> <a id="6721" href="UTxO.html#604" class="Function">Value</a>
<a id="6727" href="UTxO.html#6705" class="Function">mint</a> <a id="6732" class="Symbol">=</a> <a id="6734" href="UTxO.html#1379" class="Field">TxInfo.forge</a>

<a id="6748" class="Keyword">variable</a>
  <a id="6759" href="UTxO.html#6759" class="Generalizable">tx</a> <a id="6762" class="Symbol">:</a> <a id="6764" href="UTxO.html#1680" class="Record">Tx</a>
  <a id="6769" href="UTxO.html#6769" class="Generalizable">txi</a> <a id="6773" class="Symbol">:</a> <a id="6775" href="UTxO.html#1286" class="Record">TxInfo</a>
  <a id="6784" href="UTxO.html#6784" class="Generalizable">utxo</a> <a id="6789" href="UTxO.html#6789" class="Generalizable">utxo′</a> <a id="6795" class="Symbol">:</a> <a id="6797" href="UTxO.html#3277" class="Function">UTxO</a>
  <a id="6804" href="UTxO.html#6804" class="Generalizable">v</a> <a id="6806" href="UTxO.html#6806" class="Generalizable">v′</a> <a id="6809" class="Symbol">:</a> <a id="6811" href="UTxO.html#604" class="Function">Value</a>
</pre></body></html>